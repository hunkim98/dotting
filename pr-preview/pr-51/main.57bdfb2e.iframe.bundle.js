(self.webpackChunkdotting=self.webpackChunkdotting||[]).push([[179],{"./.storybook/preview.js-generated-config-entry.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,{__namedExportsOrder:()=>__namedExportsOrder,parameters:()=>parameters});__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js"),parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}},options:{storySort:{order:["Introduction","Components","Hooks"]}}},__namedExportsOrder=["parameters"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":return(0,ClientApi.uc)(value);case"argTypes":return(0,ClientApi.v9)(value);case"decorators":return value.forEach((function(decorator){return(0,ClientApi.$9)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return(0,ClientApi.HZ)(loader,!1)}));case"parameters":return(0,ClientApi.h1)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return(0,ClientApi.My)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return(0,ClientApi._C)(enhancer)}));case"render":return(0,ClientApi.$P)(value);case"globals":case"globalTypes":var v={};return v[key]=value,(0,ClientApi.h1)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./stories/Dotting.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Dotting:()=>Dotting,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Dotting_stories});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/react/index.js");__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.values.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js");function generateComponentControl(_ref){var description=_ref.description,defaultValue=_ref.defaultValue;return{description,control:{disable:_ref.disable},defaultValue,table:_ref.table}}var types=__webpack_require__("./src/components/Canvas/types.ts"),components_Dotting=__webpack_require__("./src/components/Dotting.tsx"),DottingComponentArgTypes={width:generateComponentControl({description:"The width of the canvas. When you assign a string to width, it should be a valid CSS length value such as `100%`.",defaultValue:300,disable:!1}),height:generateComponentControl({description:"The height of the canvas. When you assign a string to height, it should be a valid CSS length value such as `100%`.",defaultValue:300,disable:!1}),style:generateComponentControl({description:"The style object for the canvas",disable:!0}),gridStrokeColor:generateComponentControl({description:"The stroke color of the grid",disable:!1}),gridStrokeWidth:generateComponentControl({defaultValue:1,description:"The stroke width of the grid",disable:!1}),isGridVisible:generateComponentControl({defaultValue:!0,description:"If set to `true` the grid lines will be visible",disable:!1}),backgroundMode:generateComponentControl({defaultValue:"checkerboard",description:"The background mode of the canvas.",disable:!1}),backgroundColor:generateComponentControl({defaultValue:"#c9c9c9",description:"The background color of the canvas.",disable:!1}),backgroundAlpha:generateComponentControl({defaultValue:.5,description:"The background alpha of the canvas.",disable:!1}),initData:generateComponentControl({description:"The initial data that you want to draw on the canvas",disable:!0}),isPanZoomable:generateComponentControl({description:"If set to `true` the canvas will be pan and zoomable",defaultValue:!0,disable:!1}),isGridFixed:generateComponentControl({defaultValue:!1,description:"If set to `true` the grid will not be extendable",disable:!1}),ref:generateComponentControl({description:"The ref object that you would like to connect to the Dotting Canvas.      You must pass the `DottingRef` object as props if you would like to use hooks",disable:!0}),brushTool:function generateComponentControlForEnum(_ref2){var description=_ref2.description,defaultValue=_ref2.defaultValue,enumProp=_ref2.enumProp,disable=_ref2.disable;return{description,mapping:enumProp,options:Object.keys(enumProp),control:{type:"select",labels:Object.values(enumProp),disable},defaultValue}}({defaultValue:types.G.DOT,description:"The brush tool is for changing the brush tool",enumProp:types.G,disable:!1}),brushColor:generateComponentControl({defaultValue:"#FF0000",description:"The brush color for drawing the grid.      You can make a `useState` for tracking brushColor       You can also use `useBrush` hook to change the brush color later.",disable:!1}),indicatorData:generateComponentControl({description:"The indicator data that you want to draw on the canvas.",disable:!0})};const Dotting_stories={title:"Components/Dotting",component:components_Dotting.Z,parameters:{docs:{description:{component:"A component that allows you to draw pixels on canvas.         You must set the width and height of the canvas if you want to use it.         You can also set the initial data of the canvas.         You can also set the initial brush color if you want to.          The canvas is pan and zoomable by default.            The canvas grids are visible by default.           You can also set the initial indicator data of the canvas."}}},argTypes:DottingComponentArgTypes};var Dotting=function Dotting(args){return react.createElement(components_Dotting.Z,{width:args.width,height:args.height,style:void 0,gridStrokeColor:args.gridStrokeColor,gridStrokeWidth:args.gridStrokeWidth,isGridVisible:args.isGridVisible,backgroundMode:args.backgroundMode,backgroundColor:args.backgroundColor,backgroundAlpha:args.backgroundAlpha,initData:void 0,isPanZoomable:args.isPanZoomable,isGridFixed:args.isGridFixed,brushColor:args.brushColor,brushTool:args.brushTool,indicatorData:[]})};Dotting.parameters=(0,objectSpread2.Z)({storySource:{source:"(args: DottingProps) => {\n  return (\n    <DottingComponent\n      width={args.width}\n      height={args.height}\n      style={undefined}\n      gridStrokeColor={args.gridStrokeColor}\n      gridStrokeWidth={args.gridStrokeWidth}\n      isGridVisible={args.isGridVisible}\n      backgroundMode={args.backgroundMode}\n      backgroundColor={args.backgroundColor}\n      backgroundAlpha={args.backgroundAlpha}\n      initData={undefined}\n      isPanZoomable={args.isPanZoomable}\n      isGridFixed={args.isGridFixed}\n      brushColor={args.brushColor}\n      brushTool={args.brushTool}\n      indicatorData={[]}\n    />\n  );\n}"}},Dotting.parameters);var __namedExportsOrder=["Dotting"];try{Dotting.displayName="Dotting",Dotting.__docgenInfo={description:"",displayName:"Dotting",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"string | number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"string | number"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"React.CSSProperties"}},gridStrokeColor:{defaultValue:null,description:"",name:"gridStrokeColor",required:!1,type:{name:"string"}},gridStrokeWidth:{defaultValue:null,description:"",name:"gridStrokeWidth",required:!1,type:{name:"number"}},isGridVisible:{defaultValue:null,description:"",name:"isGridVisible",required:!1,type:{name:"boolean"}},backgroundMode:{defaultValue:null,description:"",name:"backgroundMode",required:!1,type:{name:'"checkerboard" | "color"'}},backgroundColor:{defaultValue:null,description:"",name:"backgroundColor",required:!1,type:{name:"string"}},backgroundAlpha:{defaultValue:null,description:"",name:"backgroundAlpha",required:!1,type:{name:"number"}},initData:{defaultValue:null,description:"",name:"initData",required:!1,type:{name:"PixelData[][]"}},isPanZoomable:{defaultValue:null,description:"",name:"isPanZoomable",required:!1,type:{name:"boolean"}},isGridFixed:{defaultValue:null,description:"",name:"isGridFixed",required:!1,type:{name:"boolean"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"ForwardedRef<DottingRef>"}},brushTool:{defaultValue:null,description:"",name:"brushTool",required:!1,type:{name:"BrushTool"}},brushColor:{defaultValue:null,description:"",name:"brushColor",required:!1,type:{name:"string"}},indicatorData:{defaultValue:null,description:"",name:"indicatorData",required:!1,type:{name:"PixelModifyItem[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/Dotting.stories.tsx#Dotting"]={docgenInfo:Dotting.__docgenInfo,name:"Dotting",path:"stories/Dotting.stories.tsx#Dotting"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Canvas/types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var CanvasEvents,BrushTool;__webpack_require__.d(__webpack_exports__,{G:()=>BrushTool,v:()=>CanvasEvents}),function(CanvasEvents){CanvasEvents.DATA_CHANGE="dataChange",CanvasEvents.GRID_CHANGE="gridChange",CanvasEvents.STROKE_END="strokeEnd",CanvasEvents.BRUSH_CHANGE="brushChange",CanvasEvents.HOVER_PIXEL_CHANGE="hoverPixelChange"}(CanvasEvents||(CanvasEvents={})),function(BrushTool){BrushTool.DOT="DOT",BrushTool.ERASER="ERASER",BrushTool.PAINT_BUCKET="PAINT_BUCKET",BrushTool.SELECT="SELECT",BrushTool.NONE="NONE"}(BrushTool||(BrushTool={}))},"./src/components/Dotting.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>components_Dotting});__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js");var ButtonDirection,objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),createForOfIteratorHelper=(__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.object.entries.js"),__webpack_require__("./node_modules/core-js/modules/es.array.sort.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js")),classCallCheck=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),createClass=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/createClass.js"),inherits=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/inherits.js"),createSuper=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/createSuper.js"),DefaultPanZoom={scale:1,offset:{x:0,y:0}},DefaultGridSquareLength=20,DefaultButtonHeight=20;!function(ButtonDirection){ButtonDirection.TOP="TOP",ButtonDirection.BOTTOM="BOTTOM",ButtonDirection.LEFT="LEFT",ButtonDirection.RIGHT="RIGHT",ButtonDirection.TOPLEFT="TOPLEFT",ButtonDirection.TOPRIGHT="TOPRIGHT",ButtonDirection.BOTTOMLEFT="BOTTOMLEFT",ButtonDirection.BOTTOMRIGHT="BOTTOMRIGHT"}(ButtonDirection||(ButtonDirection={}));var MouseMode,DefaultPixelDataDimensions={columnCount:10,rowCount:10};!function(MouseMode){MouseMode.PANNING="PANNING",MouseMode.EXTENDING="EXTENDING",MouseMode.DRAWING="DRAWING"}(MouseMode||(MouseMode={}));var DefaultZoomSensitivity=200,DefaultMaxScale=1.5,DefaultMinScale=.3,convertCartesianToScreen=function convertCartesianToScreen(canvas,cartesianCoord,dpr){return{x:cartesianCoord.x+canvas.width/dpr/2,y:cartesianCoord.y+canvas.height/dpr/2}};function diffPoints(p1,p2){return{x:p1.x-p2.x,y:p1.y-p2.y}}function addPoints(p1,p2){return{x:p1.x+p2.x,y:p1.y+p2.y}}function getScreenPoint(point,panZoom){var offset=panZoom.offset,scale=panZoom.scale;return{x:Math.floor(point.x*scale+offset.x),y:Math.floor(point.y*scale+offset.y)}}function getWorldPoint(point,panZoom){var offset=panZoom.offset,scale=panZoom.scale;return{x:(point.x-offset.x)/scale,y:(point.y-offset.y)/scale}}function lerpRanges(value,range1Start,range1End,range2Start,range2End){return range2Start+(range2End-range2Start)*((value-range1Start)/(range1End-range1Start))}var getPointFromTouchyEvent=function getPointFromTouchyEvent(evt,element,panZoom){var originY,originX,offsetX,offsetY;if(window.TouchEvent&&evt instanceof TouchEvent){for(var isCanvasTouchIncluded=!1,firstCanvasTouchIndex=0,i=0;i<evt.touches.length;i++){if(evt.touches.item(i).target instanceof HTMLCanvasElement){isCanvasTouchIncluded=!0,firstCanvasTouchIndex=i;break}}return getPointFromTouch(isCanvasTouchIncluded?evt.touches[firstCanvasTouchIndex]:evt.touches[0],element,panZoom)}return originY=evt.clientY,originX=evt.clientX,offsetX=evt.offsetX,offsetY=evt.offsetY,originY+=window.scrollY,originX+=window.scrollX,{y:originY-panZoom.offset.y,x:originX-panZoom.offset.x,offsetX,offsetY}},getPointFromTouch=function getPointFromTouch(touch,element,panZoom){var r=element.getBoundingClientRect(),originY=touch.clientY,originX=touch.clientX,offsetX=touch.clientX-r.left,offsetY=touch.clientY-r.top;return{x:originX-panZoom.offset.x,y:originY-panZoom.offset.y,offsetX,offsetY}},getMouseCartCoord=function getMouseCartCoord(evt,element,panZoom,dpr){evt.preventDefault();var point=getPointFromTouchyEvent(evt,element,panZoom);return diffPoints(getWorldPoint({x:point.offsetX,y:point.offsetY},panZoom),{x:element.width/dpr/2,y:element.height/dpr/2})},getPixelIndexFromMouseCartCoord=function getPixelIndexFromMouseCartCoord(mouseCartCoord,rowCount,columnCount,gridSquareLength,currentTopIndex,currentLeftIndex){var leftTopPoint_x=0,leftTopPoint_y=0;return mouseCartCoord.x>leftTopPoint_x&&mouseCartCoord.x<leftTopPoint_x+columnCount*gridSquareLength&&mouseCartCoord.y>leftTopPoint_y&&mouseCartCoord.y<leftTopPoint_y+rowCount*gridSquareLength?{rowIndex:currentTopIndex+Math.floor((mouseCartCoord.y-leftTopPoint_y)/gridSquareLength),columnIndex:currentLeftIndex+Math.floor((mouseCartCoord.x-leftTopPoint_x)/gridSquareLength)}:null},getIsPointInsideRegion=function getIsPointInsideRegion(point,area){var _getAreaTopLeftAndBot=getAreaTopLeftAndBottomRight(area),areaTopLeftPos=_getAreaTopLeftAndBot.areaTopLeftPos,areaBottomRightPos=_getAreaTopLeftAndBot.areaBottomRightPos;return point.x>=areaTopLeftPos.x&&point.x<=areaBottomRightPos.x&&point.y>=areaTopLeftPos.y&&point.y<=areaBottomRightPos.y},getAreaTopLeftAndBottomRight=function getAreaTopLeftAndBottomRight(area){var isAreaFromLeftToRight=area.startWorldPos.x<area.endWorldPos.x,isAreaFromTopToBottom=area.startWorldPos.y<area.endWorldPos.y;return{areaTopLeftPos:{x:isAreaFromLeftToRight?area.startWorldPos.x:area.endWorldPos.x,y:isAreaFromTopToBottom?area.startWorldPos.y:area.endWorldPos.y},areaBottomRightPos:{x:isAreaFromLeftToRight?area.endWorldPos.x:area.startWorldPos.x,y:isAreaFromTopToBottom?area.endWorldPos.y:area.startWorldPos.y}}},convertWorldPosAreaToPixelGridArea=function convertWorldPosAreaToPixelGridArea(selectingArea,rowCount,columnCount,gridSquareLength,rowKeysInOrder,columnKeysInOrder){var _getAreaTopLeftAndBot3=getAreaTopLeftAndBottomRight(selectingArea),areaTopLeftPos=_getAreaTopLeftAndBot3.areaTopLeftPos,areaBottomRightPos=_getAreaTopLeftAndBot3.areaBottomRightPos,pixelGridLeftTopPoint_x=0,pixelGridLeftTopPoint_y=0,selectedRegionTopLeft={x:0,y:0},selectedRegionBottomRight={x:0,y:0},selectedAreaLeftOffsetAmount=areaTopLeftPos.x-pixelGridLeftTopPoint_x;if(selectedAreaLeftOffsetAmount<0)selectedRegionTopLeft.x=pixelGridLeftTopPoint_x;else{if(selectedAreaLeftOffsetAmount>columnCount*gridSquareLength)return null;selectedRegionTopLeft.x=pixelGridLeftTopPoint_x+Math.floor(selectedAreaLeftOffsetAmount/gridSquareLength)*gridSquareLength}var selectedAreaTopOffsetAmount=areaTopLeftPos.y-pixelGridLeftTopPoint_y;if(selectedAreaTopOffsetAmount<0)selectedRegionTopLeft.y=pixelGridLeftTopPoint_y;else{if(selectedAreaTopOffsetAmount>rowCount*gridSquareLength)return null;selectedRegionTopLeft.y=pixelGridLeftTopPoint_y+Math.floor(selectedAreaTopOffsetAmount/gridSquareLength)*gridSquareLength}var selectedAreaRightOffsetAmount=areaBottomRightPos.x-(pixelGridLeftTopPoint_x+columnCount*gridSquareLength);if(selectedAreaRightOffsetAmount>0)selectedRegionBottomRight.x=pixelGridLeftTopPoint_x+columnCount*gridSquareLength;else{if(selectedAreaRightOffsetAmount<-columnCount*gridSquareLength)return null;selectedRegionBottomRight.x=pixelGridLeftTopPoint_x+columnCount*gridSquareLength+Math.ceil(selectedAreaRightOffsetAmount/gridSquareLength)*gridSquareLength}var selectedAreaBottomOffsetAmount=areaBottomRightPos.y-(pixelGridLeftTopPoint_y+rowCount*gridSquareLength);if(selectedAreaBottomOffsetAmount>0)selectedRegionBottomRight.y=pixelGridLeftTopPoint_y+rowCount*gridSquareLength;else{if(selectedAreaBottomOffsetAmount<-rowCount*gridSquareLength)return null;selectedRegionBottomRight.y=pixelGridLeftTopPoint_y+rowCount*gridSquareLength+Math.ceil(selectedAreaBottomOffsetAmount/gridSquareLength)*gridSquareLength}for(var relativeTopLeftRowIndex=Math.floor((selectedRegionTopLeft.y-pixelGridLeftTopPoint_y)/gridSquareLength),relativeTopLeftColumnIndex=Math.floor((selectedRegionTopLeft.x-pixelGridLeftTopPoint_x)/gridSquareLength),relativeBottomRightRowIndex=Math.floor((selectedRegionBottomRight.y-pixelGridLeftTopPoint_y)/gridSquareLength),relativeBottomRightColumnIndex=Math.floor((selectedRegionBottomRight.x-pixelGridLeftTopPoint_x)/gridSquareLength),includedPixelsIndices=[],i=relativeTopLeftRowIndex;i<relativeBottomRightRowIndex;i++)for(var j=relativeTopLeftColumnIndex;j<relativeBottomRightColumnIndex;j++)includedPixelsIndices.push({rowIndex:rowKeysInOrder[i],columnIndex:columnKeysInOrder[j]});return{startWorldPos:selectedRegionTopLeft,endWorldPos:selectedRegionBottomRight,includedPixelsIndices}},returnScrollOffsetFromMouseOffset=function returnScrollOffsetFromMouseOffset(mouseOffset,panZoom,newScale){var scaleOffset=diffPoints(mouseOffset,getScreenPoint(getWorldPoint(mouseOffset,panZoom),{scale:newScale,offset:panZoom.offset}));return addPoints(panZoom.offset,scaleOffset)},getOverlappingPixelIndicesForModifiedPixels=function getOverlappingPixelIndicesForModifiedPixels(originalPixels,originPixelIndex,modifyPixelWidthRatio,modifyPixelHeightRatio,gridSquareLength){if(modifyPixelHeightRatio<0||modifyPixelWidthRatio<0)throw new Error("modifyPixelHeightRatio and modifyPixelWidthRatio should be positive");if(gridSquareLength<0)throw new Error("gridSquareLength should be positive");var _step,pixelsToColor=[],_iterator=(0,createForOfIteratorHelper.Z)(originalPixels);try{for(_iterator.s();!(_step=_iterator.n()).done;)for(var item=_step.value,pixelDistanceFromOrigin={rowOffset:item.rowIndex-originPixelIndex.rowIndex,columnOffset:item.columnIndex-originPixelIndex.columnIndex},pixelWordPosOffset={x:pixelDistanceFromOrigin.columnOffset*gridSquareLength,y:pixelDistanceFromOrigin.rowOffset*gridSquareLength},cornerWorldPos={topLeft:{x:pixelWordPosOffset.x*modifyPixelWidthRatio,y:pixelWordPosOffset.y*modifyPixelHeightRatio},topRight:{x:(pixelWordPosOffset.x+gridSquareLength)*modifyPixelWidthRatio,y:pixelWordPosOffset.y*modifyPixelHeightRatio},bottomLeft:{x:pixelWordPosOffset.x*modifyPixelWidthRatio,y:(pixelWordPosOffset.y+gridSquareLength)*modifyPixelHeightRatio},bottomRight:{x:(pixelWordPosOffset.x+gridSquareLength)*modifyPixelWidthRatio,y:(pixelWordPosOffset.y+gridSquareLength)*modifyPixelHeightRatio}},i=cornerWorldPos.topLeft.x;i<cornerWorldPos.topRight.x;i+=gridSquareLength)for(var j=cornerWorldPos.topLeft.y;j<cornerWorldPos.bottomLeft.y;j+=gridSquareLength){var pixelIndex={rowIndex:Math.round(originPixelIndex.rowIndex+Math.floor(j/gridSquareLength)),columnIndex:Math.round(originPixelIndex.columnIndex+Math.floor(i/gridSquareLength)),color:item.color,previousColor:item.previousColor};pixelsToColor.push(pixelIndex)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return pixelsToColor},getGridIndicesFromData=function getGridIndicesFromData(data){var allRowKeys=Array.from(data.keys()),allColumnKeys=Array.from(data.get(allRowKeys[0]).keys()),currentTopIndex=Math.min.apply(Math,allRowKeys),currentLeftIndex=Math.min.apply(Math,allColumnKeys);return{topRowIndex:currentTopIndex,bottomRowIndex:Math.max.apply(Math,allRowKeys),leftColumnIndex:currentLeftIndex,rightColumnIndex:Math.max.apply(Math,allColumnKeys)}},getRowKeysFromData=function getRowKeysFromData(data){return Array.from(data.keys())},getColumnKeysFromData=function getColumnKeysFromData(data){var allRowKeys=Array.from(data.keys());return Array.from(data.get(allRowKeys[0]).keys())},getColumnCountFromData=function getColumnCountFromData(data){return 0===data.size?0:data.entries().next().value[1].size},getRowCountFromData=function getRowCountFromData(data){return data.size},extractColoredPixelsFromRow=function extractColoredPixelsFromRow(data,rowIndex){var rowPixelsMap=data.get(rowIndex),pixelModifyItems=[];return Array.from(rowPixelsMap.entries()).forEach((function(columnData){var _columnData=(0,slicedToArray.Z)(columnData,2),key=_columnData[0],pixel=_columnData[1];pixel.color&&pixelModifyItems.push({color:pixel.color,rowIndex,columnIndex:key})})),pixelModifyItems},extractColoredPixelsFromColumn=function extractColoredPixelsFromColumn(data,columnIndex){var pixelModifyItems=[];return Array.from(data.entries()).map((function(rowData){var rowIndex=rowData[0],row=rowData[1];row.get(columnIndex).color&&pixelModifyItems.push({rowIndex,columnIndex,color:row.get(columnIndex).color})})),pixelModifyItems},deleteRowOfData=function deleteRowOfData(data,rowIndex){data.has(rowIndex)&&data.delete(rowIndex)},deleteColumnOfData=function deleteColumnOfData(data,columnIndex){data.forEach((function(row){row.has(columnIndex)&&row.delete(columnIndex)}))},addRowToData=function addRowToData(data,rowIndex){var columnKeys=getColumnKeysFromData(data);if(!data.has(rowIndex)){data.set(rowIndex,new Map);var _step,_iterator=(0,createForOfIteratorHelper.Z)(columnKeys);try{for(_iterator.s();!(_step=_iterator.n()).done;){var i=_step.value;data.get(rowIndex).set(i,{color:""})}}catch(err){_iterator.e(err)}finally{_iterator.f()}}},addColumnToData=function addColumnToData(data,columnIndex){data.forEach((function(row){row.has(columnIndex)||row.set(columnIndex,{color:""})}))},validateSquareArray=function validateSquareArray(data){var dataRowCount=data.length,columnCount=0,rowCount=dataRowCount,isDataValid=!0;if(dataRowCount<2)isDataValid=!1;else{var dataColumnCount=data[0].length;if(columnCount=dataColumnCount,dataColumnCount<2)isDataValid=!1;else for(var i=0;i<dataRowCount;i++)if(data[i].length!==dataColumnCount){isDataValid=!1;break}}return{isDataValid,columnCount,rowCount}},createRowKeyOrderMapfromData=function createRowKeyOrderMapfromData(data){var sortedRowKeys=getRowKeysFromData(data).sort((function(a,b){return a-b})),rowKeyOrderMap=new Map;return sortedRowKeys.forEach((function(key,index){rowKeyOrderMap.set(key,index)})),rowKeyOrderMap},createColumnKeyOrderMapfromData=function createColumnKeyOrderMapfromData(data){var sortedColumnKeys=getColumnKeysFromData(data).sort((function(a,b){return a-b})),columnKeyOrderMap=new Map;return sortedColumnKeys.forEach((function(key,index){columnKeyOrderMap.set(key,index)})),columnKeyOrderMap},getInBetweenPixelIndicesfromCoords=function getInBetweenPixelIndicesfromCoords(previousCoord,currentCoord,gridSquareLength,data){if(previousCoord&&currentCoord&&gridSquareLength&&(Math.abs(currentCoord.x-previousCoord.x)>=gridSquareLength||Math.abs(currentCoord.y-previousCoord.y)>=gridSquareLength)){var gridIndices=getGridIndicesFromData(data),pixelIndex=getPixelIndexFromMouseCartCoord(currentCoord,getRowCountFromData(data),getColumnCountFromData(data),gridSquareLength,gridIndices.topRowIndex,gridIndices.leftColumnIndex),previousIndex=getPixelIndexFromMouseCartCoord(previousCoord,getRowCountFromData(data),getColumnCountFromData(data),gridSquareLength,gridIndices.topRowIndex,gridIndices.leftColumnIndex);if(!previousIndex||!pixelIndex)return;if(Math.abs(pixelIndex.columnIndex-previousIndex.columnIndex)>=1||Math.abs(pixelIndex.rowIndex-previousIndex.rowIndex)>=1){var missingIndices=function getBressenhamIndices(x1,y1,x2,y2){var startPosition={x1,y1},endPosition_x2=x2,endPosition_y2=y2,width=x2-x1,height=y2-y1,isGradualSlope=Math.abs(width)>=Math.abs(height),directionX=width>=0?1:-1,directionY=height>=0?1:-1,fw=directionX*width,fh=directionY*height,f=isGradualSlope?2*fh-fw:2*fw-fh,f1=isGradualSlope?2*fh:2*fw,f2=isGradualSlope?2*(fh-fw):2*(fw-fh),x=startPosition.x1,y=startPosition.y1,missingPoints=[];if(isGradualSlope)for(;x!=endPosition_x2;)missingPoints.push({rowIndex:x,columnIndex:y}),f<0?f+=f1:(f+=f2,y+=directionY),x+=directionX;else for(;y!=endPosition_y2;)missingPoints.push({rowIndex:x,columnIndex:y}),f<0?f+=f1:(f+=f2,x+=directionX),y+=directionY;return missingPoints}(previousIndex.rowIndex,previousIndex.columnIndex,pixelIndex.rowIndex,pixelIndex.columnIndex);if(missingIndices.length>0)return missingIndices}}},BaseLayer=function(){function BaseLayer(_ref){var canvas=_ref.canvas;(0,classCallCheck.Z)(this,BaseLayer),this.ctx=void 0,this.element=void 0,this.dpr=void 0,this.panZoom=DefaultPanZoom,this.width=void 0,this.height=void 0,this.criterionDataForRendering=void 0,this.rowKeyOrderMap=new Map,this.columnKeyOrderMap=new Map,this.ctx=canvas.getContext("2d"),this.element=canvas}return(0,createClass.Z)(BaseLayer,[{key:"getContext",value:function getContext(){return this.ctx}},{key:"getElement",value:function getElement(){return this.element}},{key:"getRowKeyOrderMap",value:function getRowKeyOrderMap(){return this.rowKeyOrderMap}},{key:"getColumnKeyOrderMap",value:function getColumnKeyOrderMap(){return this.columnKeyOrderMap}},{key:"setPanZoom",value:function setPanZoom(panZoom){this.panZoom=panZoom}},{key:"setCriterionDataForRendering",value:function setCriterionDataForRendering(criterionDataForRendering){this.criterionDataForRendering=criterionDataForRendering,this.rowKeyOrderMap=createRowKeyOrderMapfromData(criterionDataForRendering),this.columnKeyOrderMap=createColumnKeyOrderMapfromData(criterionDataForRendering)}},{key:"scale",value:function scale(x,y){this.ctx.scale(x,y)}},{key:"setWidth",value:function setWidth(width,devicePixelRatio){this.width=width,this.element.width=devicePixelRatio?width*devicePixelRatio:width,this.element.style.width="".concat(width,"px")}},{key:"setHeight",value:function setHeight(height,devicePixelRatio){this.height=height,this.element.height=devicePixelRatio?height*devicePixelRatio:height,this.element.style.height="".concat(height,"px")}},{key:"setDpr",value:function setDpr(dpr){this.dpr=dpr}},{key:"getWidth",value:function getWidth(){return this.width}},{key:"getHeight",value:function getHeight(){return this.height}},{key:"setSize",value:function setSize(width,height,devicePixelRatio){this.setWidth(width,devicePixelRatio),this.setHeight(height,devicePixelRatio),this.dpr=devicePixelRatio||this.dpr}}]),BaseLayer}(),BackgroundLayer=function(_BaseLayer){(0,inherits.Z)(BackgroundLayer,_BaseLayer);var _super=(0,createSuper.Z)(BackgroundLayer);function BackgroundLayer(_ref){var _this,canvas=_ref.canvas;return(0,classCallCheck.Z)(this,BackgroundLayer),(_this=_super.call(this,{canvas})).backgroundMode=void 0,_this.backgroundColor="#c9c9c9",_this.backgroundAlpha=void 0,_this}return(0,createClass.Z)(BackgroundLayer,[{key:"setBackgroundMode",value:function setBackgroundMode(backgroundMode){this.backgroundMode=backgroundMode||"checkerboard"}},{key:"setBackgroundAlpha",value:function setBackgroundAlpha(alpha){void 0===alpha&&(this.backgroundAlpha=.5),this.backgroundAlpha=alpha?alpha>=1?1:alpha<0?0:alpha:.5}},{key:"setBackgroundColor",value:function setBackgroundColor(color){this.backgroundColor=color||"#c9c9c9"}},{key:"render",value:function render(){var ctx=this.ctx;if(ctx.clearRect(0,0,this.width,this.height),ctx.save(),ctx.globalAlpha=this.backgroundAlpha,"color"===this.backgroundMode)ctx.fillStyle=this.backgroundColor,ctx.fillRect(0,0,this.width,this.height);else for(var cellCount={x:this.width/12,y:this.height/12},i=0;i<cellCount.x;i++)for(var j=0;j<cellCount.y;j++){var isEvenCol=j%2==0,color=i%2==0?isEvenCol?"white":this.backgroundColor:isEvenCol?this.backgroundColor:"white";color&&(ctx.fillStyle=color,ctx.fillRect(12*i,12*j,12,12))}ctx.restore()}}]),BackgroundLayer}(BaseLayer),DataLayer=(__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.string.includes.js"),function(_BaseLayer){(0,inherits.Z)(DataLayer,_BaseLayer);var _super=(0,createSuper.Z)(DataLayer);function DataLayer(_ref){var _this,canvas=_ref.canvas,initData=_ref.initData;if((0,classCallCheck.Z)(this,DataLayer),(_this=_super.call(this,{canvas})).swipedPixels=[],_this.data=new Map,_this.gridSquareLength=DefaultGridSquareLength,initData&&validateSquareArray(initData).isDataValid)for(var i=0;i<initData.length;i++){_this.data.set(i,new Map);for(var j=0;j<initData[i].length;j++)_this.data.get(i).set(j,{color:initData[i][j].color})}else for(var rowCount=DefaultPixelDataDimensions.rowCount,columnCount=DefaultPixelDataDimensions.columnCount,_i=0;_i<rowCount;_i++){_this.data.set(_i,new Map);for(var _j=0;_j<columnCount;_j++)_this.data.get(_i).set(_j,{color:""})}return _this}return(0,createClass.Z)(DataLayer,[{key:"getColumnCount",value:function getColumnCount(){return getColumnCountFromData(this.data)}},{key:"getRowCount",value:function getRowCount(){return getRowCountFromData(this.data)}},{key:"getGridIndices",value:function getGridIndices(){return getGridIndicesFromData(this.data)}},{key:"getDimensions",value:function getDimensions(){return{columnCount:this.getColumnCount(),rowCount:this.getRowCount()}}},{key:"getData",value:function getData(){return this.data}},{key:"getCopiedData",value:function getCopiedData(){var copiedMap=new Map;return Array.from(this.data.entries()).forEach((function(_ref2){var _ref3=(0,slicedToArray.Z)(_ref2,2),rowIndex=_ref3[0],row=_ref3[1],copiedRow=new Map;Array.from(row.entries()).forEach((function(_ref4){var _ref5=(0,slicedToArray.Z)(_ref4,2),columnIndex=_ref5[0],pixelData=_ref5[1];copiedRow.set(columnIndex,(0,objectSpread2.Z)({},pixelData))})),copiedMap.set(rowIndex,copiedRow)})),copiedMap}},{key:"getSwipedPixels",value:function getSwipedPixels(){return this.swipedPixels}},{key:"resetSwipedPixels",value:function resetSwipedPixels(){this.swipedPixels=[]}},{key:"setData",value:function setData(data){this.data=data}},{key:"shortenGridBy",value:function shortenGridBy(direction,amount,startIndex){for(var shouldIncreaseIndex=direction===ButtonDirection.TOP||direction===ButtonDirection.LEFT,i=0;i<amount;i++){var index=startIndex+(shouldIncreaseIndex?i:-i);this.shortenGrid(direction,index)}}},{key:"shortenGrid",value:function shortenGrid(direction,index){var _this$getDimensions=this.getDimensions(),columnCount=_this$getDimensions.columnCount,rowCount=_this$getDimensions.rowCount,rowKeys=getRowKeysFromData(this.data),columnKeys=getColumnKeysFromData(this.data);if(direction===ButtonDirection.TOP){var _this$swipedPixels;if(rowCount<=2||!rowKeys.includes(index))return;var swipedPixels=extractColoredPixelsFromRow(this.data,index);(_this$swipedPixels=this.swipedPixels).push.apply(_this$swipedPixels,(0,toConsumableArray.Z)(swipedPixels)),deleteRowOfData(this.data,index)}else if(direction===ButtonDirection.BOTTOM){var _this$swipedPixels2;if(rowCount<=2||!rowKeys.includes(index))return;var _swipedPixels=extractColoredPixelsFromRow(this.data,index);(_this$swipedPixels2=this.swipedPixels).push.apply(_this$swipedPixels2,(0,toConsumableArray.Z)(_swipedPixels)),deleteRowOfData(this.data,index)}else if(direction===ButtonDirection.LEFT){var _this$swipedPixels3;if(columnCount<=2||!columnKeys.includes(index))return;var _swipedPixels2=extractColoredPixelsFromColumn(this.data,index);(_this$swipedPixels3=this.swipedPixels).push.apply(_this$swipedPixels3,(0,toConsumableArray.Z)(_swipedPixels2)),deleteColumnOfData(this.data,index)}else if(direction===ButtonDirection.RIGHT){var _this$swipedPixels4;if(columnCount<=2||!columnKeys.includes(index))return;var _swipedPixels3=extractColoredPixelsFromColumn(this.data,index);(_this$swipedPixels4=this.swipedPixels).push.apply(_this$swipedPixels4,(0,toConsumableArray.Z)(_swipedPixels3)),deleteColumnOfData(this.data,index)}}},{key:"updatePixelColors",value:function updatePixelColors(data){var _step,_iterator=(0,createForOfIteratorHelper.Z)(data);try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value,rowIndex=item.rowIndex,columnIndex=item.columnIndex,color=item.color;this.data.get(rowIndex)&&this.data.get(rowIndex).get(columnIndex)&&this.data.get(rowIndex).set(columnIndex,{color})}}catch(err){_iterator.e(err)}finally{_iterator.f()}}},{key:"colorPixels",value:function colorPixels(data){var rowIndices=data.map((function(change){return change.rowIndex})),columnIndices=data.map((function(change){return change.columnIndex})),minRowIndex=Math.min.apply(Math,(0,toConsumableArray.Z)(rowIndices)),maxRowIndex=Math.max.apply(Math,(0,toConsumableArray.Z)(rowIndices)),minColumnIndex=Math.min.apply(Math,(0,toConsumableArray.Z)(columnIndices)),maxColumnIndex=Math.max.apply(Math,(0,toConsumableArray.Z)(columnIndices)),currentCanvasIndices=this.getGridIndices(),changeAmounts=[];if(minRowIndex<currentCanvasIndices.topRowIndex){var amount=currentCanvasIndices.topRowIndex-minRowIndex;this.extendGridBy(ButtonDirection.TOP,amount,currentCanvasIndices.topRowIndex),changeAmounts.push({direction:ButtonDirection.TOP,amount,startIndex:currentCanvasIndices.topRowIndex})}if(maxRowIndex>currentCanvasIndices.bottomRowIndex){var _amount=maxRowIndex-currentCanvasIndices.bottomRowIndex;this.extendGridBy(ButtonDirection.BOTTOM,_amount,currentCanvasIndices.bottomRowIndex),changeAmounts.push({direction:ButtonDirection.BOTTOM,amount:_amount,startIndex:currentCanvasIndices.bottomRowIndex})}if(minColumnIndex<currentCanvasIndices.leftColumnIndex){var _amount2=currentCanvasIndices.leftColumnIndex-minColumnIndex;this.extendGridBy(ButtonDirection.LEFT,_amount2,currentCanvasIndices.leftColumnIndex),changeAmounts.push({direction:ButtonDirection.LEFT,amount:_amount2,startIndex:currentCanvasIndices.leftColumnIndex})}if(maxColumnIndex>currentCanvasIndices.rightColumnIndex){var _amount3=maxColumnIndex-currentCanvasIndices.rightColumnIndex;this.extendGridBy(ButtonDirection.RIGHT,_amount3,currentCanvasIndices.rightColumnIndex),changeAmounts.push({direction:ButtonDirection.RIGHT,amount:_amount3,startIndex:currentCanvasIndices.rightColumnIndex})}var _step2,dataForAction=[],_iterator2=(0,createForOfIteratorHelper.Z)(data);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var change=_step2.value,previousColor=this.data.get(change.rowIndex).get(change.columnIndex).color,color=change.color;this.data.get(change.rowIndex).set(change.columnIndex,{color:change.color}),dataForAction.push((0,objectSpread2.Z)((0,objectSpread2.Z)({},change),{},{color,previousColor}))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return{dataForAction,changeAmounts}}},{key:"erasePixels",value:function erasePixels(data){var _step3,dataForAction=[],_iterator3=(0,createForOfIteratorHelper.Z)(data);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var change=_step3.value,previousColor=this.data.get(change.rowIndex).get(change.columnIndex).color;this.data.get(change.rowIndex).set(change.columnIndex,{color:""}),dataForAction.push((0,objectSpread2.Z)((0,objectSpread2.Z)({},change),{},{color:"",previousColor}))}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}return{dataForAction}}},{key:"extendGridBy",value:function extendGridBy(direction,amount,startIndex){for(var shouldIncreaseIndex=direction===ButtonDirection.BOTTOM||direction===ButtonDirection.RIGHT,i=1;i<=amount;i++){var index=startIndex+(shouldIncreaseIndex?i:-i);this.extendGrid(direction,index)}}},{key:"extendGrid",value:function extendGrid(direction,index){direction===ButtonDirection.TOP||direction===ButtonDirection.BOTTOM?addRowToData(this.data,index):(direction===ButtonDirection.LEFT||direction===ButtonDirection.RIGHT)&&addColumnToData(this.data,index)}},{key:"render",value:function render(){var squareLength=this.gridSquareLength*this.panZoom.scale,ctx=this.ctx;ctx.clearRect(0,0,this.width,this.height);var correctedLeftTopScreenPoint=getScreenPoint(convertCartesianToScreen(this.element,{x:0,y:0},this.dpr),this.panZoom),allRowKeys=getRowKeysFromData(this.data),allColumnKeys=getColumnKeysFromData(this.data);ctx.save();var _step4,_iterator4=(0,createForOfIteratorHelper.Z)(allRowKeys);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _step5,i=_step4.value,_iterator5=(0,createForOfIteratorHelper.Z)(allColumnKeys);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _this$data$get,_this$data$get$get,j=_step5.value,rowIndex=i,columnIndex=j,relativeRowIndex=this.rowKeyOrderMap.get(rowIndex),relativeColumnIndex=this.columnKeyOrderMap.get(columnIndex);if(void 0!==relativeRowIndex&&void 0!==relativeColumnIndex){var color=null===(_this$data$get=this.data.get(rowIndex))||void 0===_this$data$get||null===(_this$data$get$get=_this$data$get.get(columnIndex))||void 0===_this$data$get$get?void 0:_this$data$get$get.color;color&&(ctx.fillStyle=color,ctx.fillRect(relativeColumnIndex*squareLength+correctedLeftTopScreenPoint.x,relativeRowIndex*squareLength+correctedLeftTopScreenPoint.y,squareLength,squareLength))}}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}ctx.restore()}}]),DataLayer}(BaseLayer)),drawArrowHead=(__webpack_require__("./node_modules/core-js/modules/es.array.fill.js"),function drawArrowHead(ctx,x,y,radians,scale){ctx.save(),ctx.beginPath(),ctx.translate(x,y),ctx.rotate(radians),ctx.moveTo(0,0),ctx.lineTo(7*scale,5*scale),ctx.lineTo(-7*scale,5*scale),ctx.closePath(),ctx.fillStyle="#949494",ctx.fill(),ctx.restore()}),drawExtendButton=function drawExtendButton(ctx,leftTopPos,color,buttonWidth,buttonHeight,scale){ctx.save(),ctx.fillStyle=color,ctx.fillRect(leftTopPos.x,leftTopPos.y,buttonWidth*scale,buttonHeight*scale),ctx.restore()},GridLayer=function(_BaseLayer){(0,inherits.Z)(GridLayer,_BaseLayer);var _super=(0,createSuper.Z)(GridLayer);function GridLayer(_ref){var _this,columnCount=_ref.columnCount,rowCount=_ref.rowCount,canvas=_ref.canvas;return(0,classCallCheck.Z)(this,GridLayer),(_this=_super.call(this,{canvas})).columnCount=void 0,_this.rowCount=void 0,_this.isGridVisible=!0,_this.isGridFixed=!1,_this.gridStrokeColor=void 0,_this.gridStrokeWidth=void 0,_this.gridSquareLength=DefaultGridSquareLength,_this.buttonHeight=DefaultButtonHeight,_this.buttonMargin=DefaultButtonHeight/2+5,_this.hoveredButton=null,_this.topButtonDimensions={x:0,y:0,width:0,height:0},_this.bottomButtonDimensions={x:0,y:0,width:0,height:0},_this.leftButtonDimensions={x:0,y:0,width:0,height:0},_this.rightButtonDimensions={x:0,y:0,width:0,height:0},_this.topLeftButtonDimensions={x:0,y:0,width:0,height:0},_this.topRightButtonDimensions={x:0,y:0,width:0,height:0},_this.bottomLeftButtonDimensions={x:0,y:0,width:0,height:0},_this.bottomRightButtonDimensions={x:0,y:0,width:0,height:0},_this.columnCount=columnCount,_this.rowCount=rowCount,_this.ctx=canvas.getContext("2d"),_this.element=canvas,_this}return(0,createClass.Z)(GridLayer,[{key:"setColumnCount",value:function setColumnCount(columnCount){this.columnCount=columnCount}},{key:"setRowCount",value:function setRowCount(rowCount){this.rowCount=rowCount}},{key:"setIsGridVisible",value:function setIsGridVisible(isGridVisible){void 0!==isGridVisible&&(this.isGridVisible=isGridVisible)}},{key:"getIsGridVisible",value:function getIsGridVisible(){return this.isGridVisible}},{key:"setIsGridFixed",value:function setIsGridFixed(isGridFixed){void 0!==isGridFixed&&(this.isGridFixed=isGridFixed)}},{key:"getIsGridFixed",value:function getIsGridFixed(){return this.isGridFixed}},{key:"getHoveredButton",value:function getHoveredButton(){return this.hoveredButton}},{key:"setGridStrokeColor",value:function setGridStrokeColor(gridStrokeColor){""===gridStrokeColor&&void 0===gridStrokeColor||(this.gridStrokeColor=gridStrokeColor)}},{key:"getGridStrokeColor",value:function getGridStrokeColor(){return this.gridStrokeColor}},{key:"setGridStrokeWidth",value:function setGridStrokeWidth(gridStrokeWidth){0===gridStrokeWidth&&void 0===gridStrokeWidth||(this.gridStrokeWidth=gridStrokeWidth)}},{key:"getGridStrokeWidth",value:function getGridStrokeWidth(){return this.gridStrokeWidth}},{key:"setHoveredButton",value:function setHoveredButton(hoveredButton){this.hoveredButton=hoveredButton}},{key:"getButtonsDimensions",value:function getButtonsDimensions(){return{top:this.topButtonDimensions,bottom:this.bottomButtonDimensions,left:this.leftButtonDimensions,right:this.rightButtonDimensions,topLeft:this.topLeftButtonDimensions,topRight:this.topRightButtonDimensions,bottomLeft:this.bottomLeftButtonDimensions,bottomRight:this.bottomRightButtonDimensions}}},{key:"findLeftTopPosForButton",value:function findLeftTopPosForButton(direction,buttonWidth,buttonHeight){var gridsWidth=this.gridSquareLength*this.columnCount,gridsHeight=this.gridSquareLength*this.rowCount,buttonPos={x:gridsWidth/2+this.buttonMargin,y:-gridsHeight/2};if(direction===ButtonDirection.LEFT)buttonPos.x=-this.buttonMargin-buttonWidth/2,buttonPos.y=0;else if(direction===ButtonDirection.RIGHT)buttonPos.x=gridsWidth+this.buttonMargin-buttonWidth/2,buttonPos.y=0;else if(direction===ButtonDirection.TOP)buttonPos.x=0,buttonPos.y=-this.buttonMargin-buttonHeight/2;else if(direction===ButtonDirection.BOTTOM)buttonPos.x=0,buttonPos.y=gridsHeight+this.buttonMargin-buttonHeight/2;else if(direction===ButtonDirection.TOPLEFT)buttonPos.x=-this.buttonMargin-buttonWidth/2,buttonPos.y=-this.buttonMargin-buttonHeight/2;else if(direction===ButtonDirection.TOPRIGHT)buttonPos.x=gridsWidth+this.buttonMargin-buttonWidth/2,buttonPos.y=-this.buttonMargin-buttonHeight/2;else if(direction===ButtonDirection.BOTTOMLEFT)buttonPos.x=-this.buttonMargin-buttonWidth/2,buttonPos.y=gridsHeight+this.buttonMargin-buttonHeight/2;else{if(direction!==ButtonDirection.BOTTOMRIGHT)throw new Error("Invalid button direction");buttonPos.x=gridsWidth+this.buttonMargin-buttonWidth/2,buttonPos.y=gridsHeight+this.buttonMargin-buttonHeight/2}return{worldPos:buttonPos,screenPos:getScreenPoint(convertCartesianToScreen(this.element,buttonPos,this.dpr),this.panZoom)}}},{key:"drawRightButton",value:function drawRightButton(color){var width=this.buttonHeight,height=this.rowCount*this.gridSquareLength,_this$findLeftTopPosF=this.findLeftTopPosForButton(ButtonDirection.RIGHT,width,height),screenPos=_this$findLeftTopPosF.screenPos,worldPos=_this$findLeftTopPosF.worldPos;this.rightButtonDimensions={x:worldPos.x,y:worldPos.y,width,height},drawExtendButton(this.ctx,screenPos,color,width,height,this.panZoom.scale),drawArrowHead(this.ctx,screenPos.x,screenPos.y+height*this.panZoom.scale/2,-Math.PI/2,this.panZoom.scale),drawArrowHead(this.ctx,screenPos.x+width*this.panZoom.scale,screenPos.y+height*this.panZoom.scale/2,Math.PI/2,this.panZoom.scale)}},{key:"drawLeftButton",value:function drawLeftButton(color){var width=this.buttonHeight,height=this.rowCount*this.gridSquareLength,_this$findLeftTopPosF2=this.findLeftTopPosForButton(ButtonDirection.LEFT,width,height),screenPos=_this$findLeftTopPosF2.screenPos,worldPos=_this$findLeftTopPosF2.worldPos;this.leftButtonDimensions={x:worldPos.x,y:worldPos.y,width,height},drawExtendButton(this.ctx,screenPos,color,width,height,this.panZoom.scale),drawArrowHead(this.ctx,screenPos.x,screenPos.y+height*this.panZoom.scale/2,-Math.PI/2,this.panZoom.scale),drawArrowHead(this.ctx,screenPos.x+width*this.panZoom.scale,screenPos.y+height*this.panZoom.scale/2,Math.PI/2,this.panZoom.scale)}},{key:"drawTopButton",value:function drawTopButton(color){var width=this.columnCount*this.gridSquareLength,height=this.buttonHeight,_this$findLeftTopPosF3=this.findLeftTopPosForButton(ButtonDirection.TOP,width,height),screenPos=_this$findLeftTopPosF3.screenPos,worldPos=_this$findLeftTopPosF3.worldPos;this.topButtonDimensions={x:worldPos.x,y:worldPos.y,width,height},drawExtendButton(this.ctx,screenPos,color,width,height,this.panZoom.scale),drawArrowHead(this.ctx,screenPos.x+width*this.panZoom.scale/2,screenPos.y,2*Math.PI,this.panZoom.scale),drawArrowHead(this.ctx,screenPos.x+width*this.panZoom.scale/2,screenPos.y+height*this.panZoom.scale,Math.PI,this.panZoom.scale)}},{key:"drawBottomButton",value:function drawBottomButton(color){var width=this.columnCount*this.gridSquareLength,height=this.buttonHeight,_this$findLeftTopPosF4=this.findLeftTopPosForButton(ButtonDirection.BOTTOM,width,height),screenPos=_this$findLeftTopPosF4.screenPos,worldPos=_this$findLeftTopPosF4.worldPos;this.bottomButtonDimensions={x:worldPos.x,y:worldPos.y,width,height},drawExtendButton(this.ctx,screenPos,color,width,height,this.panZoom.scale),drawArrowHead(this.ctx,screenPos.x+width*this.panZoom.scale/2,screenPos.y,2*Math.PI,this.panZoom.scale),drawArrowHead(this.ctx,screenPos.x+width*this.panZoom.scale/2,screenPos.y+height*this.panZoom.scale,Math.PI,this.panZoom.scale)}},{key:"drawDiagonalButtons",value:function drawDiagonalButtons(color,direction){var height=this.buttonHeight,width=this.buttonHeight,_this$findLeftTopPosF5=this.findLeftTopPosForButton(direction,width,height),screenPos=_this$findLeftTopPosF5.screenPos,worldPos=_this$findLeftTopPosF5.worldPos;switch(drawExtendButton(this.ctx,screenPos,color,width,height,this.panZoom.scale),direction){case ButtonDirection.TOPLEFT:this.topLeftButtonDimensions={x:worldPos.x,y:worldPos.y,width,height};break;case ButtonDirection.TOPRIGHT:this.topRightButtonDimensions={x:worldPos.x,y:worldPos.y,width,height};break;case ButtonDirection.BOTTOMLEFT:this.bottomLeftButtonDimensions={x:worldPos.x,y:worldPos.y,width,height};break;case ButtonDirection.BOTTOMRIGHT:this.bottomRightButtonDimensions={x:worldPos.x,y:worldPos.y,width,height}}}},{key:"drawButtons",value:function drawButtons(){var _this2=this;this.drawTopButton(this.hoveredButton===ButtonDirection.TOP?"#b2b2b2":"#c8c8c8"),this.drawBottomButton(this.hoveredButton===ButtonDirection.BOTTOM?"#b2b2b2":"#c8c8c8"),this.drawLeftButton(this.hoveredButton===ButtonDirection.LEFT?"#b2b2b2":"#c8c8c8"),this.drawRightButton(this.hoveredButton===ButtonDirection.RIGHT?"#b2b2b2":"#c8c8c8"),[ButtonDirection.TOPLEFT,ButtonDirection.TOPRIGHT,ButtonDirection.BOTTOMLEFT,ButtonDirection.BOTTOMRIGHT].forEach((function(direction){return _this2.drawDiagonalButtons(_this2.hoveredButton===direction?"#b2b2b2":"#c8c8c8",direction)}))}},{key:"renderSelection",value:function renderSelection(area){var ctx=this.ctx,startWorldPos=area.startWorldPos,endWorldPos=area.endWorldPos,convertedStartWorldPos=convertCartesianToScreen(this.element,startWorldPos,this.dpr),convertedEndWorldPos=convertCartesianToScreen(this.element,endWorldPos,this.dpr),startScreenPos=getScreenPoint(convertedStartWorldPos,this.panZoom),endScreenPos=getScreenPoint(convertedEndWorldPos,this.panZoom);ctx.save(),ctx.beginPath(),ctx.moveTo(startScreenPos.x,startScreenPos.y),ctx.lineTo(endScreenPos.x,startScreenPos.y),ctx.lineTo(endScreenPos.x,endScreenPos.y),ctx.lineTo(startScreenPos.x,endScreenPos.y),ctx.lineTo(startScreenPos.x,startScreenPos.y),ctx.closePath(),ctx.strokeStyle="#fc933c",ctx.lineWidth=5,ctx.stroke(),ctx.restore()}},{key:"render",value:function render(){var ctx=this.ctx;if(ctx.clearRect(0,0,this.width,this.height),this.isGridFixed||this.drawButtons(),this.isGridVisible){var squareLength=this.gridSquareLength*this.panZoom.scale,correctedScreenPoint=getScreenPoint(convertCartesianToScreen(this.element,{x:0,y:0},this.dpr),this.panZoom);ctx.save(),ctx.lineWidth=this.gridStrokeWidth,ctx.strokeStyle=this.gridStrokeColor;for(var i=0;i<=this.columnCount;i++)0!==i&&i!==this.columnCount||(ctx.beginPath(),ctx.moveTo(correctedScreenPoint.x+i*squareLength,correctedScreenPoint.y-this.gridStrokeWidth/2),ctx.lineTo(correctedScreenPoint.x+i*squareLength,correctedScreenPoint.y+this.rowCount*squareLength+this.gridStrokeWidth/2),ctx.stroke(),ctx.closePath()),ctx.beginPath(),ctx.moveTo(correctedScreenPoint.x+i*squareLength,correctedScreenPoint.y),ctx.lineTo(correctedScreenPoint.x+i*squareLength,correctedScreenPoint.y+this.rowCount*squareLength),ctx.stroke(),ctx.closePath();for(var j=0;j<=this.rowCount;j++)0!==j&&j!==this.rowCount||(ctx.beginPath(),ctx.moveTo(correctedScreenPoint.x-this.gridStrokeWidth/2,correctedScreenPoint.y+j*squareLength),ctx.lineTo(correctedScreenPoint.x+this.columnCount*squareLength+this.gridStrokeWidth/2,correctedScreenPoint.y+j*squareLength),ctx.stroke(),ctx.closePath()),ctx.beginPath(),ctx.moveTo(correctedScreenPoint.x,correctedScreenPoint.y+j*squareLength),ctx.lineTo(correctedScreenPoint.x+this.columnCount*squareLength,correctedScreenPoint.y+j*squareLength),ctx.stroke(),ctx.closePath();ctx.restore()}}}]),GridLayer}(BaseLayer);__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.parse-int.js");function generatePixelId(rowIndex,columnIndex){return"".concat(rowIndex,"*").concat(columnIndex)}var ActionType,PixelChangeRecords=function(){function PixelChangeRecords(){(0,classCallCheck.Z)(this,PixelChangeRecords),this.rawChanges=void 0,this.effectiveChangesMap=void 0,this.rawChanges=[],this.effectiveChangesMap=new Map}return(0,createClass.Z)(PixelChangeRecords,[{key:"record",value:function record(pixel){if(this.rawChanges.length>0){var mostRecentRawChange=this.rawChanges[this.rawChanges.length-1];mostRecentRawChange.rowIndex===pixel.rowIndex&&mostRecentRawChange.columnIndex===pixel.columnIndex&&mostRecentRawChange.color===pixel.color&&mostRecentRawChange.previousColor===pixel.previousColor||this.rawChanges.push(pixel)}else this.rawChanges.push(pixel);var rowIndex=pixel.rowIndex,columnIndex=pixel.columnIndex,color=pixel.color,previousColor=pixel.previousColor,pixelId=generatePixelId(rowIndex,columnIndex);if(this.effectiveChangesMap.has(pixelId)){var originalPreviousColor=this.effectiveChangesMap.get(pixelId).previousColor;this.effectiveChangesMap.set(pixelId,{color,previousColor:originalPreviousColor})}else this.effectiveChangesMap.set(pixelId,{color,previousColor})}},{key:"reset",value:function reset(){this.rawChanges=[],this.effectiveChangesMap=new Map}},{key:"getIsChanged",value:function getIsChanged(){return this.effectiveChangesMap.size>0}},{key:"getRawChanges",value:function getRawChanges(){return this.rawChanges}},{key:"getEffectiveChanges",value:function getEffectiveChanges(){var result=[];return this.effectiveChangesMap.forEach((function(item,pixelId){var _parsePixelId=function parsePixelId(pixelId){var _pixelId$split=pixelId.split("*"),_pixelId$split2=(0,slicedToArray.Z)(_pixelId$split,2),rowIndex=_pixelId$split2[0],columnIndex=_pixelId$split2[1];return{rowIndex:parseInt(rowIndex),columnIndex:parseInt(columnIndex)}}(pixelId),rowIndex=_parsePixelId.rowIndex,columnIndex=_parsePixelId.columnIndex;result.push({rowIndex,columnIndex,color:item.color,previousColor:item.previousColor})})),result}}]),PixelChangeRecords}(),InteractionLayer=function(_BaseLayer){(0,inherits.Z)(InteractionLayer,_BaseLayer);var _super=(0,createSuper.Z)(InteractionLayer);function InteractionLayer(_ref){var _this,columnCount=_ref.columnCount,rowCount=_ref.rowCount,canvas=_ref.canvas;return(0,classCallCheck.Z)(this,InteractionLayer),(_this=_super.call(this,{canvas})).strokedPixelRecords=new Map,_this.erasedPixelRecords=new Map,_this.tempStrokedPixels=[],_this.indicatorPixels=[],_this.dataLayerRowCount=void 0,_this.dataLayerColumnCount=void 0,_this.selectingArea=null,_this.brushPattern=[[1]],_this.selectedArea=null,_this.directionToExtendSelectedArea=null,_this.movingSelectedArea=null,_this.movingSelectedPixels=null,_this.extendingSelectedArea=null,_this.extendingSelectedPixels=[],_this.capturedBaseExtendingSelectedArea=null,_this.capturedBaseExtendingSelectedAreaPixels=null,_this.selectedAreaPixels=null,_this.capturedData=null,_this.capturedDataOriginalIndices=null,_this.hoveredPixel=null,_this.gridSquareLength=DefaultGridSquareLength,_this.minimumCount=2,_this.dataLayerColumnCount=columnCount,_this.dataLayerRowCount=rowCount,_this}return(0,createClass.Z)(InteractionLayer,[{key:"getCapturedData",value:function getCapturedData(){return this.capturedData}},{key:"getDirectionToExtendSelectedArea",value:function getDirectionToExtendSelectedArea(){return this.directionToExtendSelectedArea}},{key:"getCapturedDataOriginalIndices",value:function getCapturedDataOriginalIndices(){return this.capturedDataOriginalIndices}},{key:"getBrushPattern",value:function getBrushPattern(){return this.brushPattern}},{key:"setBrushPattern",value:function setBrushPattern(pattern){this.brushPattern=pattern}},{key:"setDataLayerColumnCount",value:function setDataLayerColumnCount(columnCount){this.dataLayerColumnCount=columnCount}},{key:"setDataLayerRowCount",value:function setDataLayerRowCount(rowCount){this.dataLayerRowCount=rowCount}},{key:"setDirectionToExtendSelectedArea",value:function setDirectionToExtendSelectedArea(direction){this.directionToExtendSelectedArea=direction}},{key:"setSelectedArea",value:function setSelectedArea(area){this.selectedArea=area}},{key:"setSelectingArea",value:function setSelectingArea(area){this.selectingArea=area}},{key:"setMovingSelectedPixels",value:function setMovingSelectedPixels(pixels){this.movingSelectedPixels=pixels}},{key:"setMovingSelectedArea",value:function setMovingSelectedArea(area){this.movingSelectedArea=area}},{key:"setExtendingSelectedPixels",value:function setExtendingSelectedPixels(pixels){this.extendingSelectedPixels=pixels}},{key:"setExtendingSelectedArea",value:function setExtendingSelectedArea(area){this.extendingSelectedArea=area}},{key:"setSelectedAreaPixels",value:function setSelectedAreaPixels(pixelArray){this.selectedAreaPixels=pixelArray}},{key:"setCapturedData",value:function setCapturedData(gridChangeStartCapturedData){this.capturedData=new Map;for(var _i=0,_Array$from=Array.from(gridChangeStartCapturedData.entries());_i<_Array$from.length;_i++){var row=_Array$from[_i],_row=(0,slicedToArray.Z)(row,2),rowIndex=_row[0],rowData=_row[1];this.capturedData.set(rowIndex,new Map(rowData))}this.capturedDataOriginalIndices=getGridIndicesFromData(gridChangeStartCapturedData)}},{key:"setCapturedBaseExtendingSelectedArea",value:function setCapturedBaseExtendingSelectedArea(capturedBaseExtendingSelectedArea){this.capturedBaseExtendingSelectedArea=capturedBaseExtendingSelectedArea}},{key:"setCapturedBaseExtendingSelectedAreaPixels",value:function setCapturedBaseExtendingSelectedAreaPixels(capturedBaseExtendingSelectedAreaPixels){this.capturedBaseExtendingSelectedAreaPixels=capturedBaseExtendingSelectedAreaPixels}},{key:"resetCapturedData",value:function resetCapturedData(){this.capturedData=null,this.capturedDataOriginalIndices=null,this.deleteStrokePixelRecord("temporary-user-id")}},{key:"getHoveredPixel",value:function getHoveredPixel(){return this.hoveredPixel}},{key:"getMovingSelectedPixels",value:function getMovingSelectedPixels(){return this.movingSelectedPixels}},{key:"getMovingSelectedArea",value:function getMovingSelectedArea(){return this.movingSelectedArea}},{key:"getExtendingSelectedArea",value:function getExtendingSelectedArea(){return this.extendingSelectedArea}},{key:"getExtendingSelectedPixels",value:function getExtendingSelectedPixels(){return this.extendingSelectedPixels}},{key:"setHoveredPixel",value:function setHoveredPixel(hoveredPixel){this.hoveredPixel=hoveredPixel}},{key:"getSelectingArea",value:function getSelectingArea(){return this.selectingArea}},{key:"getSelectedArea",value:function getSelectedArea(){return this.selectedArea}},{key:"getSelectedAreaPixels",value:function getSelectedAreaPixels(){return this.selectedAreaPixels}},{key:"getStrokedPixelRecords",value:function getStrokedPixelRecords(){return this.strokedPixelRecords}},{key:"getEffectiveStrokePixelChanges",value:function getEffectiveStrokePixelChanges(userId){return this.strokedPixelRecords.has(userId)?this.strokedPixelRecords.get(userId).getEffectiveChanges():[]}},{key:"getErasedPixelRecords",value:function getErasedPixelRecords(){return this.erasedPixelRecords}},{key:"getEffectiveEraserPixelChanges",value:function getEffectiveEraserPixelChanges(userId){return this.erasedPixelRecords.has(userId)?this.erasedPixelRecords.get(userId).getEffectiveChanges():[]}},{key:"getIndicatorPixels",value:function getIndicatorPixels(){return this.indicatorPixels}},{key:"getMinimumCount",value:function getMinimumCount(){return this.minimumCount}},{key:"detectSelectedAreaExtendDirection",value:function detectSelectedAreaExtendDirection(coord){if(!this.selectedArea)return null;lerpRanges(this.panZoom.scale,DefaultMaxScale,DefaultMinScale,6,12);var scaledXWidth=lerpRanges(this.panZoom.scale,DefaultMaxScale,DefaultMinScale,6,12),x=coord.x,y=coord.y,selectedAreaWidth=this.selectedArea.endWorldPos.x-this.selectedArea.startWorldPos.x,selectedAreaHeight=this.selectedArea.endWorldPos.y-this.selectedArea.startWorldPos.y,top_x=this.selectedArea.startWorldPos.x,top_y=this.selectedArea.startWorldPos.y,top_width=selectedAreaWidth,bottom_x=this.selectedArea.startWorldPos.x,bottom_y=this.selectedArea.endWorldPos.y,bottom_width=selectedAreaWidth,left={x:this.selectedArea.startWorldPos.x,y:this.selectedArea.startWorldPos.y,width:scaledXWidth,height:selectedAreaHeight},right_x=this.selectedArea.endWorldPos.x,right_y=this.selectedArea.startWorldPos.y,right_height=selectedAreaHeight,cornerSquareHalfLength=left.width;return x>=top_x+cornerSquareHalfLength&&x<=top_x+top_width-cornerSquareHalfLength&&y>=top_y-cornerSquareHalfLength&&y<=top_y+cornerSquareHalfLength?ButtonDirection.TOP:x>=bottom_x+cornerSquareHalfLength&&x<=bottom_x+bottom_width-cornerSquareHalfLength&&y>=bottom_y-cornerSquareHalfLength&&y<=bottom_y+cornerSquareHalfLength?ButtonDirection.BOTTOM:x>=left.x-cornerSquareHalfLength&&x<=left.x+cornerSquareHalfLength&&y>=left.y+cornerSquareHalfLength&&y<=left.y+left.height-cornerSquareHalfLength?ButtonDirection.LEFT:x>=right_x-cornerSquareHalfLength&&x<=right_x+cornerSquareHalfLength&&y>=right_y+cornerSquareHalfLength&&y<=right_y+right_height-cornerSquareHalfLength?ButtonDirection.RIGHT:x>=top_x-cornerSquareHalfLength&&x<=top_x+cornerSquareHalfLength&&y>=top_y-cornerSquareHalfLength&&y<=top_y+cornerSquareHalfLength?ButtonDirection.TOPLEFT:x>=right_x-cornerSquareHalfLength&&x<=right_x+cornerSquareHalfLength&&y>=right_y-cornerSquareHalfLength&&y<=right_y+cornerSquareHalfLength?ButtonDirection.TOPRIGHT:x>=bottom_x-cornerSquareHalfLength&&x<=bottom_x+cornerSquareHalfLength&&y>=bottom_y-cornerSquareHalfLength&&y<=bottom_y+cornerSquareHalfLength?ButtonDirection.BOTTOMLEFT:x>=right_x-cornerSquareHalfLength&&x<=right_x+cornerSquareHalfLength&&y>=bottom_y-cornerSquareHalfLength&&y<=bottom_y+cornerSquareHalfLength?ButtonDirection.BOTTOMRIGHT:null}},{key:"extendSelectedAreaSideWays",value:function extendSelectedAreaSideWays(direction,extendToCoord,isAltPressed){var _this2=this,originalSelectAreaHeightPixelOffset=this.capturedBaseExtendingSelectedArea.endPixelIndex.rowIndex-this.capturedBaseExtendingSelectedArea.startPixelIndex.rowIndex,originalSelectAreaWidthPixelOffset=this.capturedBaseExtendingSelectedArea.endPixelIndex.columnIndex-this.capturedBaseExtendingSelectedArea.startPixelIndex.columnIndex,originPixelIndex={rowIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex.rowIndex+(originalSelectAreaHeightPixelOffset+2)/2,columnIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex.columnIndex+(originalSelectAreaWidthPixelOffset+2)/2},modifyPixelWidthRatio=1,modifyPixelHeightRatio=1,heightExtensionOffset=direction===ButtonDirection.TOP?this.capturedBaseExtendingSelectedArea.startWorldPos.y-extendToCoord.y:direction===ButtonDirection.BOTTOM?extendToCoord.y-this.capturedBaseExtendingSelectedArea.endWorldPos.y:0,widthExtensionOffset=direction===ButtonDirection.LEFT?this.capturedBaseExtendingSelectedArea.startWorldPos.x-extendToCoord.x:direction===ButtonDirection.RIGHT?extendToCoord.x-this.capturedBaseExtendingSelectedArea.endWorldPos.x:0;if(isAltPressed){var wasOriginalAreaHeightEven=(originalSelectAreaHeightPixelOffset+1)%2==0,wasOriginalAreaWidthEven=(originalSelectAreaWidthPixelOffset+1)%2==0,singleSideOffsetRowBy=Math.round(heightExtensionOffset/this.gridSquareLength),singleSideOffsetColumnBy=Math.round(widthExtensionOffset/this.gridSquareLength),heightPixelCount=originalSelectAreaHeightPixelOffset+1+2*singleSideOffsetRowBy;heightPixelCount<1&&!wasOriginalAreaHeightEven?(heightPixelCount=1,singleSideOffsetRowBy=-originalSelectAreaHeightPixelOffset/2):heightPixelCount<2&&wasOriginalAreaHeightEven&&(heightPixelCount=2,singleSideOffsetRowBy=-(originalSelectAreaHeightPixelOffset-1)/2);var widthPixelCount=originalSelectAreaWidthPixelOffset+1+2*singleSideOffsetColumnBy;widthPixelCount<1&&!wasOriginalAreaWidthEven?(widthPixelCount=1,singleSideOffsetColumnBy=-originalSelectAreaWidthPixelOffset/2):widthPixelCount<2&&wasOriginalAreaWidthEven&&(widthPixelCount=2,singleSideOffsetColumnBy=-(originalSelectAreaWidthPixelOffset-1)/2),modifyPixelHeightRatio=(originalSelectAreaHeightPixelOffset+2*singleSideOffsetRowBy)/originalSelectAreaHeightPixelOffset,modifyPixelWidthRatio=(originalSelectAreaWidthPixelOffset+2*singleSideOffsetColumnBy)/originalSelectAreaWidthPixelOffset,this.setExtendingSelectedArea({startWorldPos:{x:this.capturedBaseExtendingSelectedArea.startWorldPos.x-singleSideOffsetColumnBy*this.gridSquareLength,y:this.capturedBaseExtendingSelectedArea.startWorldPos.y-singleSideOffsetRowBy*this.gridSquareLength},endWorldPos:{x:this.capturedBaseExtendingSelectedArea.endWorldPos.x+singleSideOffsetColumnBy*this.gridSquareLength,y:this.capturedBaseExtendingSelectedArea.endWorldPos.y+singleSideOffsetRowBy*this.gridSquareLength},startPixelIndex:{rowIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex.rowIndex-singleSideOffsetRowBy,columnIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex.columnIndex-singleSideOffsetColumnBy},endPixelIndex:{rowIndex:this.capturedBaseExtendingSelectedArea.endPixelIndex.rowIndex+singleSideOffsetRowBy,columnIndex:this.capturedBaseExtendingSelectedArea.endPixelIndex.columnIndex+singleSideOffsetColumnBy}})}else{var _heightExtensionOffset=direction===ButtonDirection.TOP?this.capturedBaseExtendingSelectedArea.startWorldPos.y-extendToCoord.y:direction===ButtonDirection.BOTTOM?extendToCoord.y-this.capturedBaseExtendingSelectedArea.endWorldPos.y:0,_widthExtensionOffset=direction===ButtonDirection.LEFT?this.capturedBaseExtendingSelectedArea.startWorldPos.x-extendToCoord.x:direction===ButtonDirection.RIGHT?extendToCoord.x-this.capturedBaseExtendingSelectedArea.endWorldPos.x:0,offsetRowBy=Math.round(_heightExtensionOffset/this.gridSquareLength),offsetColumnBy=Math.round(_widthExtensionOffset/this.gridSquareLength),_heightPixelCount=originalSelectAreaHeightPixelOffset+1+offsetRowBy,_widthPixelCount=originalSelectAreaWidthPixelOffset+1+offsetColumnBy;_heightPixelCount<1&&(_heightPixelCount=1,offsetRowBy=-originalSelectAreaHeightPixelOffset),_widthPixelCount<1&&(_widthPixelCount=1,offsetColumnBy=-originalSelectAreaWidthPixelOffset),modifyPixelHeightRatio=_heightPixelCount/(originalSelectAreaHeightPixelOffset+1),modifyPixelWidthRatio=_widthPixelCount/(originalSelectAreaWidthPixelOffset+1),direction===ButtonDirection.TOP?(originPixelIndex.rowIndex=this.capturedBaseExtendingSelectedArea.endPixelIndex.rowIndex,originPixelIndex.columnIndex=this.capturedBaseExtendingSelectedArea.startPixelIndex.columnIndex,this.setExtendingSelectedArea({startWorldPos:{x:this.capturedBaseExtendingSelectedArea.startWorldPos.x,y:this.capturedBaseExtendingSelectedArea.endWorldPos.y-_heightPixelCount*this.gridSquareLength},endWorldPos:this.capturedBaseExtendingSelectedArea.endWorldPos,startPixelIndex:{rowIndex:this.capturedBaseExtendingSelectedArea.endPixelIndex.rowIndex-_heightPixelCount+1,columnIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex.columnIndex},endPixelIndex:this.capturedBaseExtendingSelectedArea.endPixelIndex})):direction===ButtonDirection.BOTTOM?(originPixelIndex.rowIndex=this.capturedBaseExtendingSelectedArea.startPixelIndex.rowIndex,originPixelIndex.columnIndex=this.capturedBaseExtendingSelectedArea.startPixelIndex.columnIndex,modifyPixelHeightRatio=_heightPixelCount/(originalSelectAreaHeightPixelOffset+1),this.setExtendingSelectedArea({startWorldPos:this.capturedBaseExtendingSelectedArea.startWorldPos,endWorldPos:{x:this.capturedBaseExtendingSelectedArea.endWorldPos.x,y:this.capturedBaseExtendingSelectedArea.startWorldPos.y+_heightPixelCount*this.gridSquareLength},startPixelIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex,endPixelIndex:{rowIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex.rowIndex+_heightPixelCount-1,columnIndex:this.selectedArea.endPixelIndex.columnIndex}})):direction===ButtonDirection.LEFT?(originPixelIndex.rowIndex=this.capturedBaseExtendingSelectedArea.startPixelIndex.rowIndex,originPixelIndex.columnIndex=this.capturedBaseExtendingSelectedArea.endPixelIndex.columnIndex,modifyPixelWidthRatio=_widthPixelCount/(originalSelectAreaWidthPixelOffset+1),this.setExtendingSelectedArea({startWorldPos:{x:this.capturedBaseExtendingSelectedArea.endWorldPos.x-_widthPixelCount*this.gridSquareLength,y:this.capturedBaseExtendingSelectedArea.startWorldPos.y},endWorldPos:this.capturedBaseExtendingSelectedArea.endWorldPos,startPixelIndex:{rowIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex.rowIndex,columnIndex:this.capturedBaseExtendingSelectedArea.endPixelIndex.columnIndex-_widthPixelCount+1},endPixelIndex:this.capturedBaseExtendingSelectedArea.endPixelIndex})):direction===ButtonDirection.RIGHT&&(originPixelIndex.rowIndex=this.capturedBaseExtendingSelectedArea.startPixelIndex.rowIndex,originPixelIndex.columnIndex=this.capturedBaseExtendingSelectedArea.startPixelIndex.columnIndex,modifyPixelWidthRatio=_widthPixelCount/(originalSelectAreaWidthPixelOffset+1),this.setExtendingSelectedArea({startWorldPos:this.capturedBaseExtendingSelectedArea.startWorldPos,endWorldPos:{x:this.capturedBaseExtendingSelectedArea.startWorldPos.x+_widthPixelCount*this.gridSquareLength,y:this.capturedBaseExtendingSelectedArea.endWorldPos.y},startPixelIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex,endPixelIndex:{rowIndex:this.capturedBaseExtendingSelectedArea.endPixelIndex.rowIndex,columnIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex.columnIndex+_widthPixelCount-1}}))}var filteredPixelsToColor=getOverlappingPixelIndicesForModifiedPixels(this.capturedBaseExtendingSelectedAreaPixels,originPixelIndex,modifyPixelWidthRatio,modifyPixelHeightRatio,this.gridSquareLength).filter((function(item){return!(item.columnIndex<_this2.extendingSelectedArea.startPixelIndex.columnIndex||item.columnIndex>_this2.extendingSelectedArea.endPixelIndex.columnIndex||item.rowIndex<_this2.extendingSelectedArea.startPixelIndex.rowIndex||item.rowIndex>_this2.extendingSelectedArea.endPixelIndex.rowIndex)}));this.setExtendingSelectedPixels(filteredPixelsToColor)}},{key:"extendSelectedAreaDiagonally",value:function extendSelectedAreaDiagonally(direction,extendToCoord,isAltPressed){var _this3=this;if(this.selectedArea&&this.capturedBaseExtendingSelectedArea){var originalSelectAreaHeightPixelOffset=this.capturedBaseExtendingSelectedArea.endPixelIndex.rowIndex-this.capturedBaseExtendingSelectedArea.startPixelIndex.rowIndex,originalSelectAreaWidthPixelOffset=this.capturedBaseExtendingSelectedArea.endPixelIndex.columnIndex-this.capturedBaseExtendingSelectedArea.startPixelIndex.columnIndex,originPixelIndex={rowIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex.rowIndex,columnIndex:this.capturedBaseExtendingSelectedArea.endPixelIndex.columnIndex},modifyPixelWidthRatio=1,modifyPixelHeightRatio=1;if(isAltPressed){var wasOriginalAreaHeightEven=(originalSelectAreaHeightPixelOffset+1)%2==0,wasOriginalAreaWidthEven=(originalSelectAreaWidthPixelOffset+1)%2==0;originPixelIndex.rowIndex=this.capturedBaseExtendingSelectedArea.startPixelIndex.rowIndex+(originalSelectAreaHeightPixelOffset+2)/2,originPixelIndex.columnIndex=this.capturedBaseExtendingSelectedArea.startPixelIndex.columnIndex+(originalSelectAreaWidthPixelOffset+2)/2;var heightExtensionOffset=direction===ButtonDirection.TOPLEFT||direction===ButtonDirection.TOPRIGHT?this.capturedBaseExtendingSelectedArea.startWorldPos.y-extendToCoord.y:extendToCoord.y-this.capturedBaseExtendingSelectedArea.endWorldPos.y,widthExtensionOffset=direction===ButtonDirection.TOPLEFT||direction===ButtonDirection.BOTTOMLEFT?this.capturedBaseExtendingSelectedArea.startWorldPos.x-extendToCoord.x:extendToCoord.x-this.capturedBaseExtendingSelectedArea.endWorldPos.x,singleSideOffsetRowBy=Math.round(heightExtensionOffset/this.gridSquareLength),singleSideOffsetColumnBy=Math.round(widthExtensionOffset/this.gridSquareLength),heightPixelCount=originalSelectAreaHeightPixelOffset+1+2*singleSideOffsetRowBy;heightPixelCount<1&&!wasOriginalAreaHeightEven?(heightPixelCount=1,singleSideOffsetRowBy=-originalSelectAreaHeightPixelOffset/2):heightPixelCount<2&&wasOriginalAreaHeightEven&&(heightPixelCount=2,singleSideOffsetRowBy=-(originalSelectAreaHeightPixelOffset-1)/2);var widthPixelCount=originalSelectAreaWidthPixelOffset+1+2*singleSideOffsetColumnBy;widthPixelCount<1&&!wasOriginalAreaWidthEven?(widthPixelCount=1,singleSideOffsetColumnBy=-originalSelectAreaWidthPixelOffset/2):widthPixelCount<2&&wasOriginalAreaWidthEven&&(widthPixelCount=2,singleSideOffsetColumnBy=-(originalSelectAreaWidthPixelOffset-1)/2),modifyPixelHeightRatio=(originalSelectAreaHeightPixelOffset+2*singleSideOffsetRowBy)/originalSelectAreaHeightPixelOffset,modifyPixelWidthRatio=(originalSelectAreaWidthPixelOffset+2*singleSideOffsetColumnBy)/originalSelectAreaWidthPixelOffset,this.setExtendingSelectedArea({startWorldPos:{x:this.capturedBaseExtendingSelectedArea.startWorldPos.x-singleSideOffsetColumnBy*this.gridSquareLength,y:this.capturedBaseExtendingSelectedArea.startWorldPos.y-singleSideOffsetRowBy*this.gridSquareLength},endWorldPos:{x:this.capturedBaseExtendingSelectedArea.endWorldPos.x+singleSideOffsetColumnBy*this.gridSquareLength,y:this.capturedBaseExtendingSelectedArea.endWorldPos.y+singleSideOffsetRowBy*this.gridSquareLength},startPixelIndex:{rowIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex.rowIndex-singleSideOffsetRowBy,columnIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex.columnIndex-singleSideOffsetColumnBy},endPixelIndex:{rowIndex:this.capturedBaseExtendingSelectedArea.endPixelIndex.rowIndex+singleSideOffsetRowBy,columnIndex:this.capturedBaseExtendingSelectedArea.endPixelIndex.columnIndex+singleSideOffsetColumnBy}})}else{var _heightExtensionOffset2=direction===ButtonDirection.TOPLEFT||direction===ButtonDirection.TOPRIGHT?this.capturedBaseExtendingSelectedArea.startWorldPos.y-extendToCoord.y:extendToCoord.y-this.capturedBaseExtendingSelectedArea.endWorldPos.y,_widthExtensionOffset2=direction===ButtonDirection.TOPLEFT||direction===ButtonDirection.BOTTOMLEFT?this.capturedBaseExtendingSelectedArea.startWorldPos.x-extendToCoord.x:extendToCoord.x-this.capturedBaseExtendingSelectedArea.endWorldPos.x,offsetRowBy=Math.round(_heightExtensionOffset2/this.gridSquareLength),offsetColumnBy=Math.round(_widthExtensionOffset2/this.gridSquareLength),_heightPixelCount2=originalSelectAreaHeightPixelOffset+1+offsetRowBy,_widthPixelCount2=originalSelectAreaWidthPixelOffset+1+offsetColumnBy;_heightPixelCount2<1&&(_heightPixelCount2=1,offsetRowBy=-originalSelectAreaHeightPixelOffset),_widthPixelCount2<1&&(_widthPixelCount2=1,offsetColumnBy=-originalSelectAreaWidthPixelOffset),direction===ButtonDirection.TOPLEFT?(originPixelIndex.rowIndex=this.capturedBaseExtendingSelectedArea.endPixelIndex.rowIndex,originPixelIndex.columnIndex=this.capturedBaseExtendingSelectedArea.endPixelIndex.columnIndex,modifyPixelHeightRatio=_heightPixelCount2/(originalSelectAreaHeightPixelOffset+1),modifyPixelWidthRatio=_widthPixelCount2/(originalSelectAreaWidthPixelOffset+1),this.setExtendingSelectedArea({startWorldPos:{x:this.capturedBaseExtendingSelectedArea.endWorldPos.x-_widthPixelCount2*this.gridSquareLength,y:this.capturedBaseExtendingSelectedArea.endWorldPos.y-_heightPixelCount2*this.gridSquareLength},endWorldPos:this.capturedBaseExtendingSelectedArea.endWorldPos,startPixelIndex:{rowIndex:this.capturedBaseExtendingSelectedArea.endPixelIndex.rowIndex-_heightPixelCount2+1,columnIndex:this.capturedBaseExtendingSelectedArea.endPixelIndex.columnIndex-_widthPixelCount2+1},endPixelIndex:this.capturedBaseExtendingSelectedArea.endPixelIndex})):direction===ButtonDirection.TOPRIGHT?(originPixelIndex.rowIndex=this.capturedBaseExtendingSelectedArea.endPixelIndex.rowIndex,originPixelIndex.columnIndex=this.capturedBaseExtendingSelectedArea.startPixelIndex.columnIndex,modifyPixelHeightRatio=_heightPixelCount2/(originalSelectAreaHeightPixelOffset+1),modifyPixelWidthRatio=_widthPixelCount2/(originalSelectAreaWidthPixelOffset+1),this.setExtendingSelectedArea({startWorldPos:{x:this.capturedBaseExtendingSelectedArea.startWorldPos.x,y:this.capturedBaseExtendingSelectedArea.endWorldPos.y-_heightPixelCount2*this.gridSquareLength},endWorldPos:{x:this.capturedBaseExtendingSelectedArea.startWorldPos.x+_widthPixelCount2*this.gridSquareLength,y:this.capturedBaseExtendingSelectedArea.endWorldPos.y},startPixelIndex:{rowIndex:this.capturedBaseExtendingSelectedArea.endPixelIndex.rowIndex-_heightPixelCount2+1,columnIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex.columnIndex},endPixelIndex:{rowIndex:this.capturedBaseExtendingSelectedArea.endPixelIndex.rowIndex,columnIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex.columnIndex+_widthPixelCount2-1}})):direction===ButtonDirection.BOTTOMLEFT?(originPixelIndex.rowIndex=this.capturedBaseExtendingSelectedArea.startPixelIndex.rowIndex,originPixelIndex.columnIndex=this.capturedBaseExtendingSelectedArea.endPixelIndex.columnIndex,modifyPixelHeightRatio=_heightPixelCount2/(originalSelectAreaHeightPixelOffset+1),modifyPixelWidthRatio=_widthPixelCount2/(originalSelectAreaWidthPixelOffset+1),this.setExtendingSelectedArea({startWorldPos:{x:this.capturedBaseExtendingSelectedArea.endWorldPos.x-_widthPixelCount2*this.gridSquareLength,y:this.capturedBaseExtendingSelectedArea.startWorldPos.y},endWorldPos:{x:this.capturedBaseExtendingSelectedArea.endWorldPos.x,y:this.capturedBaseExtendingSelectedArea.startWorldPos.y+_heightPixelCount2*this.gridSquareLength},startPixelIndex:{rowIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex.rowIndex,columnIndex:this.capturedBaseExtendingSelectedArea.endPixelIndex.columnIndex-_widthPixelCount2+1},endPixelIndex:{rowIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex.rowIndex+_heightPixelCount2-1,columnIndex:this.capturedBaseExtendingSelectedArea.endPixelIndex.columnIndex}})):direction===ButtonDirection.BOTTOMRIGHT&&(originPixelIndex.rowIndex=this.capturedBaseExtendingSelectedArea.startPixelIndex.rowIndex,originPixelIndex.columnIndex=this.capturedBaseExtendingSelectedArea.startPixelIndex.columnIndex,modifyPixelHeightRatio=_heightPixelCount2/(originalSelectAreaHeightPixelOffset+1),modifyPixelWidthRatio=_widthPixelCount2/(originalSelectAreaWidthPixelOffset+1),this.setExtendingSelectedArea({startWorldPos:{x:this.capturedBaseExtendingSelectedArea.startWorldPos.x,y:this.capturedBaseExtendingSelectedArea.startWorldPos.y},endWorldPos:{x:this.capturedBaseExtendingSelectedArea.startWorldPos.x+_widthPixelCount2*this.gridSquareLength,y:this.capturedBaseExtendingSelectedArea.startWorldPos.y+_heightPixelCount2*this.gridSquareLength},startPixelIndex:{rowIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex.rowIndex,columnIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex.columnIndex},endPixelIndex:{rowIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex.rowIndex+_heightPixelCount2-1,columnIndex:this.capturedBaseExtendingSelectedArea.startPixelIndex.columnIndex+_widthPixelCount2-1}}))}var filteredPixelsToColor=getOverlappingPixelIndicesForModifiedPixels(this.capturedBaseExtendingSelectedAreaPixels,originPixelIndex,modifyPixelWidthRatio,modifyPixelHeightRatio,this.gridSquareLength).filter((function(item){return!(item.columnIndex<_this3.extendingSelectedArea.startPixelIndex.columnIndex||item.columnIndex>_this3.extendingSelectedArea.endPixelIndex.columnIndex||item.rowIndex<_this3.extendingSelectedArea.startPixelIndex.rowIndex||item.rowIndex>_this3.extendingSelectedArea.endPixelIndex.rowIndex)}));this.setExtendingSelectedPixels(filteredPixelsToColor)}}},{key:"extendSelectedArea",value:function extendSelectedArea(direction,extendToCoord,isAltPressed){if(this.selectedArea)switch(null===this.capturedBaseExtendingSelectedArea&&(this.capturedBaseExtendingSelectedArea=this.selectedArea),null===this.capturedBaseExtendingSelectedAreaPixels&&(this.capturedBaseExtendingSelectedAreaPixels=(0,toConsumableArray.Z)(this.selectedAreaPixels)),direction){case ButtonDirection.TOP:this.extendSelectedAreaSideWays(ButtonDirection.TOP,extendToCoord,isAltPressed);break;case ButtonDirection.BOTTOM:this.extendSelectedAreaSideWays(ButtonDirection.BOTTOM,extendToCoord,isAltPressed);break;case ButtonDirection.LEFT:this.extendSelectedAreaSideWays(ButtonDirection.LEFT,extendToCoord,isAltPressed);break;case ButtonDirection.RIGHT:this.extendSelectedAreaSideWays(ButtonDirection.RIGHT,extendToCoord,isAltPressed);break;case ButtonDirection.TOPLEFT:this.extendSelectedAreaDiagonally(ButtonDirection.TOPLEFT,extendToCoord,isAltPressed);break;case ButtonDirection.TOPRIGHT:this.extendSelectedAreaDiagonally(ButtonDirection.TOPRIGHT,extendToCoord,isAltPressed);break;case ButtonDirection.BOTTOMLEFT:this.extendSelectedAreaDiagonally(ButtonDirection.BOTTOMLEFT,extendToCoord,isAltPressed);break;case ButtonDirection.BOTTOMRIGHT:this.extendSelectedAreaDiagonally(ButtonDirection.BOTTOMRIGHT,extendToCoord,isAltPressed)}}},{key:"extendCapturedData",value:function extendCapturedData(direction){if(!this.capturedData)throw new Error("There is no captured data");var _getGridIndicesFromDa=getGridIndicesFromData(this.capturedData),topRowIndex=_getGridIndicesFromDa.topRowIndex,bottomRowIndex=_getGridIndicesFromDa.bottomRowIndex,leftColumnIndex=_getGridIndicesFromDa.leftColumnIndex,rightColumnIndex=_getGridIndicesFromDa.rightColumnIndex;if(direction===ButtonDirection.TOP||direction===ButtonDirection.BOTTOM){var newRowIndex=direction===ButtonDirection.TOP?topRowIndex-1:bottomRowIndex+1;addRowToData(this.capturedData,newRowIndex)}else if(direction===ButtonDirection.LEFT||direction===ButtonDirection.RIGHT){var newColumnIndex=direction===ButtonDirection.LEFT?leftColumnIndex-1:rightColumnIndex+1;addColumnToData(this.capturedData,newColumnIndex)}}},{key:"shortenCapturedData",value:function shortenCapturedData(direction){if(!this.capturedData)throw new Error("There is no captured data");var _getGridIndicesFromDa2=getGridIndicesFromData(this.capturedData),topRowIndex=_getGridIndicesFromDa2.topRowIndex,bottomRowIndex=_getGridIndicesFromDa2.bottomRowIndex,leftColumnIndex=_getGridIndicesFromDa2.leftColumnIndex,rightColumnIndex=_getGridIndicesFromDa2.rightColumnIndex,columnCount=getColumnCountFromData(this.capturedData),rowCount=getRowCountFromData(this.capturedData),pixelModifyItems=[];if(direction===ButtonDirection.TOP||direction===ButtonDirection.BOTTOM){if(rowCount<=this.minimumCount)return!1;var swipedRowIndex=direction===ButtonDirection.TOP?topRowIndex:bottomRowIndex,swipedRowPixels=extractColoredPixelsFromRow(this.capturedData,swipedRowIndex);pixelModifyItems.push.apply(pixelModifyItems,(0,toConsumableArray.Z)(swipedRowPixels)),deleteRowOfData(this.capturedData,swipedRowIndex)}else if(direction===ButtonDirection.LEFT||direction===ButtonDirection.RIGHT){if(columnCount<=this.minimumCount)return!1;var swipedColumnIndex=direction===ButtonDirection.LEFT?leftColumnIndex:rightColumnIndex,swipedColumnPixels=extractColoredPixelsFromColumn(this.capturedData,swipedColumnIndex);pixelModifyItems.push.apply(pixelModifyItems,(0,toConsumableArray.Z)(swipedColumnPixels)),deleteColumnOfData(this.capturedData,swipedColumnIndex)}return!0}},{key:"setIndicatorPixels",value:function setIndicatorPixels(indicatorPixels){Array.isArray(indicatorPixels)&&(this.indicatorPixels=indicatorPixels)}},{key:"addToStrokePixelRecords",value:function addToStrokePixelRecords(userId,pixelItem){var _this$strokedPixelRec;this.strokedPixelRecords.has(userId)||this.strokedPixelRecords.set(userId,new PixelChangeRecords),null===(_this$strokedPixelRec=this.strokedPixelRecords.get(userId))||void 0===_this$strokedPixelRec||_this$strokedPixelRec.record(pixelItem)}},{key:"getAllStrokePixels",value:function getAllStrokePixels(){var allStrokePixels=[];return this.strokedPixelRecords.forEach((function(pixelChangeRecords){allStrokePixels.push.apply(allStrokePixels,(0,toConsumableArray.Z)(pixelChangeRecords.getEffectiveChanges()))})),allStrokePixels}},{key:"addToErasedPixelRecords",value:function addToErasedPixelRecords(userId,pixelItem){var _this$erasedPixelReco;this.erasedPixelRecords.has(userId)||this.erasedPixelRecords.set(userId,new PixelChangeRecords),null===(_this$erasedPixelReco=this.erasedPixelRecords.get(userId))||void 0===_this$erasedPixelReco||_this$erasedPixelReco.record(pixelItem)}},{key:"getAllErasedPixels",value:function getAllErasedPixels(){var allErasedPixels=[];return this.erasedPixelRecords.forEach((function(pixelChangeRecords){allErasedPixels.push.apply(allErasedPixels,(0,toConsumableArray.Z)(pixelChangeRecords.getEffectiveChanges()))})),allErasedPixels}},{key:"deleteErasedPixelRecord",value:function deleteErasedPixelRecord(userId){this.erasedPixelRecords.delete(userId)}},{key:"deleteStrokePixelRecord",value:function deleteStrokePixelRecord(userId){this.strokedPixelRecords.delete(userId)}},{key:"colorPixels",value:function colorPixels(data){var _this$tempStrokedPixe;(_this$tempStrokedPixe=this.tempStrokedPixels).push.apply(_this$tempStrokedPixe,(0,toConsumableArray.Z)(data))}},{key:"erasePixels",value:function erasePixels(data){var _this$tempStrokedPixe2;(_this$tempStrokedPixe2=this.tempStrokedPixels).push.apply(_this$tempStrokedPixe2,(0,toConsumableArray.Z)(data.map((function(item){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},item),{},{color:""})}))))}},{key:"renderStrokedPixels",value:function renderStrokedPixels(correctedLeftTopScreenPoint,squareLength){var _this4=this,ctx=this.ctx,doesCapturedDataExist=null!==this.capturedData,allStrokedPixels=this.getAllStrokePixels().filter((function(item){if(doesCapturedDataExist){var gridIndices=getGridIndicesFromData(_this4.capturedData);return item.rowIndex<gridIndices.topRowIndex||item.rowIndex>gridIndices.bottomRowIndex||item.columnIndex<gridIndices.leftColumnIndex||item.columnIndex>gridIndices.rightColumnIndex}return!0})),tempColorPixelsToStroke=this.tempStrokedPixels.filter((function(item){return""!==item.color})).filter((function(item){if(doesCapturedDataExist){var gridIndices=getGridIndicesFromData(_this4.capturedData);return item.rowIndex<gridIndices.topRowIndex||item.rowIndex>gridIndices.bottomRowIndex||item.columnIndex<gridIndices.leftColumnIndex||item.columnIndex>gridIndices.rightColumnIndex}return!0}));ctx.save();var _step,_iterator=(0,createForOfIteratorHelper.Z)(allStrokedPixels);try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value,relativeRowIndex=this.rowKeyOrderMap.get(item.rowIndex),relativeColumnIndex=this.columnKeyOrderMap.get(item.columnIndex);void 0!==relativeRowIndex&&void 0!==relativeColumnIndex&&(ctx.fillStyle=item.color,ctx.fillRect(relativeColumnIndex*squareLength+correctedLeftTopScreenPoint.x,relativeRowIndex*squareLength+correctedLeftTopScreenPoint.y,squareLength,squareLength))}}catch(err){_iterator.e(err)}finally{_iterator.f()}var _step2,_iterator2=(0,createForOfIteratorHelper.Z)(tempColorPixelsToStroke);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _item=_step2.value,_relativeRowIndex=this.rowKeyOrderMap.get(_item.rowIndex),_relativeColumnIndex=this.columnKeyOrderMap.get(_item.columnIndex);void 0!==_relativeRowIndex&&void 0!==_relativeColumnIndex&&(ctx.fillStyle=_item.color,ctx.fillRect(_relativeColumnIndex*squareLength+correctedLeftTopScreenPoint.x,_relativeRowIndex*squareLength+correctedLeftTopScreenPoint.y,squareLength,squareLength))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}ctx.restore()}},{key:"renderErasedPixels",value:function renderErasedPixels(correctedLeftTopScreenPoint,squareLength){var tempErasePixels=this.tempStrokedPixels.filter((function(item){return""==item.color})),allErasedPixels=this.getAllErasedPixels(),ctx=this.ctx;ctx.save();var _step3,_iterator3=(0,createForOfIteratorHelper.Z)(allErasedPixels);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var item=_step3.value,relativeRowIndex=this.rowKeyOrderMap.get(item.rowIndex),relativeColumnIndex=this.columnKeyOrderMap.get(item.columnIndex);void 0!==relativeRowIndex&&void 0!==relativeColumnIndex&&ctx.clearRect(relativeColumnIndex*squareLength+correctedLeftTopScreenPoint.x,relativeRowIndex*squareLength+correctedLeftTopScreenPoint.y,squareLength,squareLength)}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}var _step4,_iterator4=(0,createForOfIteratorHelper.Z)(tempErasePixels);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _item2=_step4.value,_relativeRowIndex2=this.rowKeyOrderMap.get(_item2.rowIndex),_relativeColumnIndex2=this.columnKeyOrderMap.get(_item2.columnIndex);void 0!==_relativeRowIndex2&&void 0!==_relativeColumnIndex2&&ctx.clearRect(_relativeColumnIndex2*squareLength+correctedLeftTopScreenPoint.x,_relativeRowIndex2*squareLength+correctedLeftTopScreenPoint.y,squareLength,squareLength)}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}},{key:"renderMovingSelectedPixels",value:function renderMovingSelectedPixels(correctedLeftTopScreenPoint,squareLength){if(null!==this.movingSelectedPixels&&0!=this.movingSelectedPixels.length){var ctx=this.ctx;ctx.save();var _step5,_iterator5=(0,createForOfIteratorHelper.Z)(this.movingSelectedPixels);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var item=_step5.value,color=item.previousColor;ctx.fillStyle=color;var relativeRowIndex=this.rowKeyOrderMap.get(item.rowIndex),relativeColumnIndex=this.columnKeyOrderMap.get(item.columnIndex);void 0!==relativeRowIndex&&void 0!==relativeColumnIndex&&ctx.fillRect(relativeColumnIndex*squareLength+correctedLeftTopScreenPoint.x,relativeRowIndex*squareLength+correctedLeftTopScreenPoint.y,squareLength,squareLength)}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}ctx.restore()}}},{key:"renderExtendingSelectedPixels",value:function renderExtendingSelectedPixels(correctedLeftTopScreenPoint,squareLength){if(null!==this.extendingSelectedPixels&&0!=this.extendingSelectedPixels.length){var ctx=this.ctx;ctx.save();var _step6,_iterator6=(0,createForOfIteratorHelper.Z)(this.extendingSelectedPixels);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var item=_step6.value,color=item.previousColor;ctx.fillStyle=color;var relativeRowIndex=this.rowKeyOrderMap.get(item.rowIndex),relativeColumnIndex=this.columnKeyOrderMap.get(item.columnIndex);void 0!==relativeRowIndex&&void 0!==relativeColumnIndex&&ctx.fillRect(relativeColumnIndex*squareLength+correctedLeftTopScreenPoint.x,relativeRowIndex*squareLength+correctedLeftTopScreenPoint.y,squareLength,squareLength)}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}ctx.restore()}}},{key:"renderIndicatorPixels",value:function renderIndicatorPixels(correctedLeftTopScreenPoint,squareLength){if(0!=this.indicatorPixels.length){var ctx=this.ctx;ctx.save();var _step7,_iterator7=(0,createForOfIteratorHelper.Z)(this.indicatorPixels);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var item=_step7.value;ctx.fillStyle=item.color,ctx.globalAlpha=.5;var relativeRowIndex=this.rowKeyOrderMap.get(item.rowIndex),relativeColumnIndex=this.columnKeyOrderMap.get(item.columnIndex);void 0!==relativeRowIndex&&void 0!==relativeColumnIndex&&(ctx.clearRect(relativeColumnIndex*squareLength+correctedLeftTopScreenPoint.x,relativeRowIndex*squareLength+correctedLeftTopScreenPoint.y,squareLength,squareLength),ctx.fillRect(relativeColumnIndex*squareLength+correctedLeftTopScreenPoint.x,relativeRowIndex*squareLength+correctedLeftTopScreenPoint.y,squareLength,squareLength))}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}ctx.restore()}}},{key:"renderHoveredPixel",value:function renderHoveredPixel(correctedLeftTopScreenPoint,squareLength){if(null!==this.hoveredPixel){var ctx=this.ctx,_this$hoveredPixel=this.hoveredPixel,rowIndex=_this$hoveredPixel.rowIndex,columnIndex=_this$hoveredPixel.columnIndex,relativeRowIndex=this.rowKeyOrderMap.get(rowIndex),relativeColumnIndex=this.columnKeyOrderMap.get(columnIndex);if(void 0!==relativeRowIndex&&void 0!==relativeColumnIndex){var brushPatternWidth=this.brushPattern.length,brushPatternHeight=this.brushPattern[0].length,brushPatternCenterRowIndex=Math.floor(brushPatternHeight/2),brushPatternCenterColumnIndex=Math.floor(brushPatternWidth/2);ctx.save(),ctx.globalAlpha=.5;for(var i=0;i<brushPatternHeight;i++)for(var j=0;j<brushPatternWidth;j++){if(0!==this.brushPattern[i][j]){var _relativeRowIndex3=this.rowKeyOrderMap.get(rowIndex+i-brushPatternCenterRowIndex),_relativeColumnIndex3=this.columnKeyOrderMap.get(columnIndex+j-brushPatternCenterColumnIndex);void 0!==_relativeRowIndex3&&void 0!==_relativeColumnIndex3&&(ctx.fillStyle=this.hoveredPixel.color,ctx.fillRect(_relativeColumnIndex3*squareLength+correctedLeftTopScreenPoint.x,_relativeRowIndex3*squareLength+correctedLeftTopScreenPoint.y,squareLength,squareLength))}}ctx.restore()}}}},{key:"render",value:function render(){var squareLength=this.gridSquareLength*this.panZoom.scale,correctedLeftTopScreenPoint=getScreenPoint(convertCartesianToScreen(this.element,{x:0,y:0},this.dpr),this.panZoom);this.ctx.clearRect(0,0,this.width,this.height),this.renderStrokedPixels(correctedLeftTopScreenPoint,squareLength),this.renderErasedPixels(correctedLeftTopScreenPoint,squareLength),this.renderIndicatorPixels(correctedLeftTopScreenPoint,squareLength),this.renderHoveredPixel(correctedLeftTopScreenPoint,squareLength),this.renderMovingSelectedPixels(correctedLeftTopScreenPoint,squareLength),this.renderExtendingSelectedPixels(correctedLeftTopScreenPoint,squareLength)}}]),InteractionLayer}(BaseLayer),types=__webpack_require__("./src/components/Canvas/types.ts");!function(ActionType){ActionType.ColorChange="ColorChange",ActionType.SizeChange="SizeChange",ActionType.ColorSizeChange="ColorSizeChange",ActionType.SelectAreaMove="SelectAreaMove"}(ActionType||(ActionType={}));var Action=(0,createClass.Z)((function Action(){(0,classCallCheck.Z)(this,Action),this.type=void 0})),ColorChangeAction=function(_Action){(0,inherits.Z)(ColorChangeAction,_Action);var _super=(0,createSuper.Z)(ColorChangeAction);function ColorChangeAction(data){var _this;return(0,classCallCheck.Z)(this,ColorChangeAction),(_this=_super.call(this)).type=ActionType.ColorChange,_this.data=void 0,_this.data=data,_this}return(0,createClass.Z)(ColorChangeAction,[{key:"createInverseAction",value:function createInverseAction(){return new ColorChangeAction(this.data.map((function(item){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},item),{},{previousColor:item.color,color:item.previousColor})})))}},{key:"getType",value:function getType(){return this.type}}]),ColorChangeAction}(Action),ColorSizeChangeAction=function(_Action){(0,inherits.Z)(ColorSizeChangeAction,_Action);var _super=(0,createSuper.Z)(ColorSizeChangeAction);function ColorSizeChangeAction(data,changeAmounts){var _this;return(0,classCallCheck.Z)(this,ColorSizeChangeAction),(_this=_super.call(this)).type=ActionType.ColorSizeChange,_this.data=void 0,_this.changeAmounts=[],_this.data=data,_this.changeAmounts=changeAmounts,_this}return(0,createClass.Z)(ColorSizeChangeAction,[{key:"createInverseAction",value:function createInverseAction(){return new ColorSizeChangeAction(this.data.map((function(item){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},item),{},{previousColor:item.color,color:item.previousColor})})),this.changeAmounts.map((function(item){var newStartIndex=item.startIndex;return item.direction===ButtonDirection.TOP||item.direction===ButtonDirection.LEFT?newStartIndex=item.startIndex-item.amount:item.direction!==ButtonDirection.BOTTOM&&item.direction!==ButtonDirection.RIGHT||(newStartIndex=item.startIndex+item.amount),(0,objectSpread2.Z)((0,objectSpread2.Z)({},item),{},{amount:-item.amount,startIndex:newStartIndex})})))}},{key:"getType",value:function getType(){return this.type}}]),ColorSizeChangeAction}(Action),SelectAreaMoveAction=function(_Action){(0,inherits.Z)(SelectAreaMoveAction,_Action);var _super=(0,createSuper.Z)(SelectAreaMoveAction);function SelectAreaMoveAction(data,previousSelectedArea,newSelectedArea){var _this;return(0,classCallCheck.Z)(this,SelectAreaMoveAction),(_this=_super.call(this)).type=ActionType.SelectAreaMove,_this.data=void 0,_this.tool=types.G.SELECT,_this.previousSelectedArea=void 0,_this.newSelectedArea=void 0,_this.data=data,_this.previousSelectedArea=previousSelectedArea,_this.newSelectedArea=newSelectedArea,_this}return(0,createClass.Z)(SelectAreaMoveAction,[{key:"createInverseAction",value:function createInverseAction(){return new SelectAreaMoveAction(this.data.map((function(item){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},item),{},{previousColor:item.color,color:item.previousColor})})),this.newSelectedArea,this.previousSelectedArea)}},{key:"getType",value:function getType(){return this.type}}]),SelectAreaMoveAction}(Action),SizeChangeAction=function(_Action){(0,inherits.Z)(SizeChangeAction,_Action);var _super=(0,createSuper.Z)(SizeChangeAction);function SizeChangeAction(data,changeAmounts){var _this;return(0,classCallCheck.Z)(this,SizeChangeAction),(_this=_super.call(this)).type=ActionType.SizeChange,_this.data=void 0,_this.changeAmounts=void 0,_this.data=data,_this.changeAmounts=changeAmounts,_this}return(0,createClass.Z)(SizeChangeAction,[{key:"createInverseAction",value:function createInverseAction(){return new SizeChangeAction(this.data,this.changeAmounts.map((function(item){var newStartIndex=item.startIndex;return item.direction===ButtonDirection.TOP||item.direction===ButtonDirection.LEFT?newStartIndex=item.startIndex-item.amount:item.direction!==ButtonDirection.BOTTOM&&item.direction!==ButtonDirection.RIGHT||(newStartIndex=item.startIndex+item.amount),(0,objectSpread2.Z)((0,objectSpread2.Z)({},item),{},{amount:-item.amount,startIndex:newStartIndex})})))}},{key:"getType",value:function getType(){return this.type}}]),SizeChangeAction}(Action),Event=(__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.find-index.js"),__webpack_require__("./node_modules/core-js/modules/es.array.splice.js"),function(){function Event(name){(0,classCallCheck.Z)(this,Event),this.name=void 0,this.callbacks=void 0,this.name=name,this.callbacks=[]}return(0,createClass.Z)(Event,[{key:"on",value:function on(cb){this.callbacks.push(cb)}},{key:"off",value:function off(cb){var idx=this.callbacks.findIndex((function(callback){return callback===cb}));this.callbacks.splice(idx,1)}},{key:"toString",value:function toString(){return this.name}}]),Event}()),EventDispatcher=function(){function EventDispatcher(){(0,classCallCheck.Z)(this,EventDispatcher),this.events=void 0,this.events={}}return(0,createClass.Z)(EventDispatcher,[{key:"emit",value:function emit(name){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];this.events[name]&&this.events[name].callbacks.forEach((function(cb){cb.apply(void 0,args)}))}},{key:"addEventListener",value:function addEventListener(name,cb){this.events[name]||(this.events[name]=new Event(name)),this.events[name].on(cb)}},{key:"removeEventListener",value:function removeEventListener(name,cb){cb?this.events[name].off(cb):delete this.events[name]}}]),EventDispatcher}(),QueueNode=(0,createClass.Z)((function QueueNode(data){(0,classCallCheck.Z)(this,QueueNode),this.data=void 0,this.next=void 0,this.data=data,this.next=null})),Queue=function(){function Queue(){(0,classCallCheck.Z)(this,Queue),this.length=void 0,this.head=void 0,this.tail=void 0,this.head=null,this.tail=null,this.length=0}return(0,createClass.Z)(Queue,[{key:"enqueue",value:function enqueue(data){var node=new QueueNode(data);0===this.length?this.head=node:this.tail.next=node,this.tail=node,this.length++}},{key:"dequeue",value:function dequeue(){if(0===this.length)return null;var data=this.head.data;return this.head=this.head.next,this.length--,data}},{key:"size",value:function size(){return this.length}},{key:"isEmpty",value:function isEmpty(){return 0===this.length}},{key:"clear",value:function clear(){this.head=null,this.tail=null,this.length=0}}]),Queue}();function addEvent(el,type,fn,capturing){return el.addEventListener(type,fn,capturing)}function removeEvent(el,type,fn,capturing){return el.removeEventListener(type,fn,capturing)}var touch={mouseup:"touchend",mouseout:"touchend",mousedown:"touchstart",mousemove:"touchmove"};function touchy(el,event,type,fn){event(el,touch[type],fn),event(el,type,fn)}function isValidIndicesRange(rowIndex,columnIndex,indices){var topRowIndex=indices.topRowIndex,bottomRowIndex=indices.bottomRowIndex,leftColumnIndex=indices.leftColumnIndex,rightColumnIndex=indices.rightColumnIndex;return!(rowIndex<topRowIndex||rowIndex>bottomRowIndex||columnIndex<leftColumnIndex||columnIndex>rightColumnIndex)}var Editor=function(_EventDispatcher){(0,inherits.Z)(Editor,_EventDispatcher);var _super=(0,createSuper.Z)(Editor);function Editor(_ref){var _this,gridCanvas=_ref.gridCanvas,interactionCanvas=_ref.interactionCanvas,dataCanvas=_ref.dataCanvas,backgroundCanvas=_ref.backgroundCanvas,initData=_ref.initData;(0,classCallCheck.Z)(this,Editor),(_this=_super.call(this)).gridLayer=void 0,_this.interactionLayer=void 0,_this.dataLayer=void 0,_this.backgroundLayer=void 0,_this.zoomSensitivity=DefaultZoomSensitivity,_this.maxScale=DefaultMaxScale,_this.minScale=DefaultMinScale,_this.extensionAllowanceRatio=2,_this.pinchZoomDiff=null,_this.width=void 0,_this.height=void 0,_this.panZoom={scale:1,offset:{x:0,y:0}},_this.panPoint={lastMousePos:{x:0,y:0}},_this.dpr=1,_this.brushColor="#FF0000",_this.gridSquareLength=DefaultGridSquareLength,_this.maxHistoryCount=100,_this.undoHistory=[],_this.redoHistory=[],_this.extensionPoint={direction:null,offsetYAmount:0,offsetXAmount:0},_this.isPanZoomable=!0,_this.isAltPressed=!1,_this.mouseMode=MouseMode.PANNING,_this.brushTool=types.G.DOT,_this.mouseDownWorldPos=null,_this.mouseDownPanZoom=null,_this.mouseMoveWorldPos={x:0,y:0},_this.previousMouseMoveWorldPos=null,_this.isInteractionEnabled=!0,_this.isInteractionApplicable=!0,_this.element=void 0,_this.styleMouseCursor=function(mouseCoord){var hoveredButton=_this.gridLayer.getHoveredButton();if(hoveredButton)switch(hoveredButton){case ButtonDirection.TOP:case ButtonDirection.BOTTOM:_this.element.style.cursor="ns-resize";break;case ButtonDirection.LEFT:case ButtonDirection.RIGHT:_this.element.style.cursor="ew-resize";break;case ButtonDirection.TOPLEFT:_this.element.style.cursor="nw-resize";break;case ButtonDirection.TOPRIGHT:_this.element.style.cursor="ne-resize";break;case ButtonDirection.BOTTOMLEFT:_this.element.style.cursor="sw-resize";break;case ButtonDirection.BOTTOMRIGHT:_this.element.style.cursor="se-resize"}else switch(_this.brushTool){case types.G.DOT:case types.G.ERASER:case types.G.PAINT_BUCKET:_this.element.style.cursor="crosshair";break;case types.G.SELECT:_this.element.style.cursor="crosshair";var selectedArea=_this.interactionLayer.getSelectedArea();if(selectedArea){var direction=_this.interactionLayer.detectSelectedAreaExtendDirection(mouseCoord);if(direction)switch(direction){case ButtonDirection.TOP:case ButtonDirection.BOTTOM:_this.element.style.cursor="ns-resize";break;case ButtonDirection.LEFT:case ButtonDirection.RIGHT:_this.element.style.cursor="ew-resize";break;case ButtonDirection.TOPLEFT:_this.element.style.cursor="nw-resize";break;case ButtonDirection.TOPRIGHT:_this.element.style.cursor="ne-resize";break;case ButtonDirection.BOTTOMLEFT:_this.element.style.cursor="sw-resize";break;case ButtonDirection.BOTTOMRIGHT:_this.element.style.cursor="se-resize"}else getIsPointInsideRegion(mouseCoord,selectedArea)&&(_this.element.style.cursor="grab")}break;default:_this.element.style.cursor="default"}},_this.handleExtension=function(evt){evt.preventDefault();var interactionLayer=_this.interactionLayer,interactionCapturedData=interactionLayer.getCapturedData();interactionCapturedData||interactionLayer.setCapturedData(_this.dataLayer.getCopiedData());var minAmountForExtension=_this.gridSquareLength;if(!(window.TouchEvent&&evt instanceof TouchEvent&&evt.touches.length>1)){var mouseDownPanZoom=_this.mouseDownPanZoom,mouseCartCoord=getMouseCartCoord(evt,_this.element,mouseDownPanZoom,_this.dpr),buttonDirection=_this.extensionPoint.direction,mouseOffsetDegree=diffPoints(_this.mouseDownWorldPos,mouseCartCoord),mouseOffsetChangeYAmount=mouseOffsetDegree.y>0?Math.floor(mouseOffsetDegree.y/minAmountForExtension):Math.ceil(mouseOffsetDegree.y/minAmountForExtension),mouseOffsetChangeXAmount=mouseOffsetDegree.x>0?Math.floor(mouseOffsetDegree.x/minAmountForExtension):Math.ceil(mouseOffsetDegree.x/minAmountForExtension);if(0!=Math.abs(mouseOffsetChangeYAmount)||0!=Math.abs(mouseOffsetChangeXAmount)){var changeYAmountDiff=mouseOffsetChangeYAmount-_this.extensionPoint.offsetYAmount,changeXAmountDiff=mouseOffsetChangeXAmount-_this.extensionPoint.offsetXAmount;if(0!=Math.abs(changeYAmountDiff)||0!=Math.abs(changeXAmountDiff)){var baseRowCount=getRowCountFromData(interactionCapturedData),baseColumnCount=getColumnCountFromData(interactionCapturedData),minimumCount=interactionLayer.getMinimumCount();if(buttonDirection){switch(buttonDirection){case ButtonDirection.TOP:changeYAmountDiff>0?_this.extendInteractionGridBy(ButtonDirection.TOP,{x:0,y:changeYAmountDiff}):_this.shortenInteractionGridBy(ButtonDirection.TOP,{x:0,y:baseRowCount>minimumCount?-changeYAmountDiff:0});break;case ButtonDirection.BOTTOM:changeYAmountDiff<0?_this.extendInteractionGridBy(ButtonDirection.BOTTOM,{x:0,y:-changeYAmountDiff}):_this.shortenInteractionGridBy(ButtonDirection.BOTTOM,{x:0,y:baseRowCount>minimumCount?changeYAmountDiff:0});break;case ButtonDirection.LEFT:changeXAmountDiff>0?_this.extendInteractionGridBy(ButtonDirection.LEFT,{x:changeXAmountDiff,y:0}):_this.shortenInteractionGridBy(ButtonDirection.LEFT,{x:baseColumnCount>minimumCount?-changeXAmountDiff:0,y:0});break;case ButtonDirection.RIGHT:changeXAmountDiff<0?_this.extendInteractionGridBy(ButtonDirection.RIGHT,{x:-changeXAmountDiff,y:0}):_this.shortenInteractionGridBy(ButtonDirection.RIGHT,{x:baseColumnCount>minimumCount?changeXAmountDiff:0,y:0});break;case ButtonDirection.TOPLEFT:changeXAmountDiff>0||changeYAmountDiff>0?_this.extendInteractionGridBy(ButtonDirection.TOPLEFT,{x:changeXAmountDiff,y:changeYAmountDiff}):_this.shortenInteractionGridBy(ButtonDirection.TOPLEFT,{x:baseColumnCount>minimumCount?-changeXAmountDiff:0,y:baseRowCount>minimumCount?-changeYAmountDiff:0});break;case ButtonDirection.TOPRIGHT:changeXAmountDiff<0||changeYAmountDiff>0?_this.extendInteractionGridBy(ButtonDirection.TOPRIGHT,{x:-changeXAmountDiff,y:changeYAmountDiff}):_this.shortenInteractionGridBy(ButtonDirection.TOPRIGHT,{x:baseColumnCount>minimumCount?changeXAmountDiff:0,y:baseRowCount>minimumCount?-changeYAmountDiff:0});break;case ButtonDirection.BOTTOMLEFT:changeXAmountDiff>0||changeYAmountDiff<0?_this.extendInteractionGridBy(ButtonDirection.BOTTOMLEFT,{x:changeXAmountDiff,y:-changeYAmountDiff}):_this.shortenInteractionGridBy(ButtonDirection.BOTTOMLEFT,{x:baseColumnCount>minimumCount?-changeXAmountDiff:0,y:baseRowCount>minimumCount?changeYAmountDiff:0});break;case ButtonDirection.BOTTOMRIGHT:changeXAmountDiff<0||changeYAmountDiff<0?_this.extendInteractionGridBy(ButtonDirection.BOTTOMRIGHT,{x:-changeXAmountDiff,y:-changeYAmountDiff}):_this.shortenInteractionGridBy(ButtonDirection.BOTTOMRIGHT,{x:baseColumnCount>minimumCount?changeXAmountDiff:0,y:baseRowCount>minimumCount?changeYAmountDiff:0})}_this.extensionPoint.offsetXAmount=mouseOffsetChangeXAmount,_this.extensionPoint.offsetYAmount=mouseOffsetChangeYAmount,_this.interactionLayer.setCriterionDataForRendering(_this.interactionLayer.getCapturedData()),_this.renderAll()}}}}},_this.handleKeyDown=function(e){"KeyZ"===e.code&&(e.ctrlKey||e.metaKey)&&_this.undo(),"KeyY"===e.code&&(e.ctrlKey||e.metaKey)&&_this.redo()},_this.handleWheel=function(e){if(e.preventDefault(),_this.isPanZoomable&&_this.mouseMode!==MouseMode.EXTENDING)if(e.ctrlKey){var zoom=1-e.deltaY/_this.zoomSensitivity,newScale=_this.panZoom.scale*zoom;newScale>_this.maxScale&&(newScale=_this.maxScale),newScale<_this.minScale&&(newScale=_this.minScale);var mouseOffset={x:e.offsetX,y:e.offsetY},newOffset=returnScrollOffsetFromMouseOffset(mouseOffset,_this.panZoom,newScale);_this.setPanZoom({scale:newScale,offset:newOffset})}else{var offset=diffPoints(_this.panZoom.offset,{x:e.deltaX,y:e.deltaY});_this.setPanZoom((0,objectSpread2.Z)((0,objectSpread2.Z)({},_this.panZoom),{},{offset}))}},_this.handlePanning=function(evt){if(_this.isPanZoomable){var lastMousePos=_this.panPoint.lastMousePos;if(!(window.TouchEvent&&evt instanceof TouchEvent&&evt.touches.length>1)){var point=getPointFromTouchyEvent(evt,_this.element,_this.panZoom),currentMousePos={x:point.offsetX,y:point.offsetY};_this.panPoint.lastMousePos=currentMousePos;var mouseDiff=diffPoints(lastMousePos,currentMousePos),offset=diffPoints(_this.panZoom.offset,mouseDiff);_this.setPanZoom({offset})}}},_this.dataLayer=new DataLayer({canvas:dataCanvas,initData});var initRowCount=_this.dataLayer.getRowCount(),initColumnCount=_this.dataLayer.getColumnCount();return _this.gridLayer=new GridLayer({columnCount:initColumnCount,rowCount:initRowCount,canvas:gridCanvas}),_this.interactionLayer=new InteractionLayer({columnCount:initColumnCount,rowCount:initRowCount,canvas:interactionCanvas}),_this.backgroundLayer=new BackgroundLayer({canvas:backgroundCanvas}),_this.interactionLayer.setCriterionDataForRendering(_this.dataLayer.getData()),_this.dataLayer.setCriterionDataForRendering(_this.dataLayer.getData()),_this.element=interactionCanvas,_this.setPanZoom({offset:{x:_this.panZoom.scale*(-initColumnCount/2)*_this.gridSquareLength,y:_this.panZoom.scale*(-initRowCount/2)*_this.gridSquareLength}}),_this.initialize(),_this}return(0,createClass.Z)(Editor,[{key:"initialize",value:function initialize(){this.emit=this.emit.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),touchy(this.element,addEvent,"mousedown",this.onMouseDown),touchy(this.element,addEvent,"mouseup",this.onMouseUp),touchy(this.element,addEvent,"mouseout",this.onMouseOut),touchy(this.element,addEvent,"mousemove",this.onMouseMove),this.element.addEventListener("wheel",this.handleWheel)}},{key:"emitCurrentGridStatus",value:function emitCurrentGridStatus(){var data=this.dataLayer.getData(),dimensions={columnCount:this.getColumnCount(),rowCount:this.getRowCount()},indices=getGridIndicesFromData(data);this.emitGridChangeEvent({dimensions,indices})}},{key:"emitCurrentHoverPixelStatus",value:function emitCurrentHoverPixelStatus(){this.emitHoverPixelChangeEvent({indices:this.interactionLayer.getHoveredPixel()})}},{key:"emitCurrentData",value:function emitCurrentData(){this.emitDataChangeEvent({data:this.dataLayer.getCopiedData()})}},{key:"emitCurrentBrushTool",value:function emitCurrentBrushTool(){this.emitBrushChangeEvent({brushColor:this.brushColor,brushTool:this.brushTool,brushPattern:this.interactionLayer.getBrushPattern()})}},{key:"emitDataChangeEvent",value:function emitDataChangeEvent(params){this.emit(types.v.DATA_CHANGE,params)}},{key:"emitGridChangeEvent",value:function emitGridChangeEvent(params){this.emit(types.v.GRID_CHANGE,params)}},{key:"emitStrokeEndEvent",value:function emitStrokeEndEvent(params){this.emit(types.v.STROKE_END,params)}},{key:"emitHoverPixelChangeEvent",value:function emitHoverPixelChangeEvent(params){this.emit(types.v.HOVER_PIXEL_CHANGE,params)}},{key:"emitBrushChangeEvent",value:function emitBrushChangeEvent(params){this.emit(types.v.BRUSH_CHANGE,params)}},{key:"setBrushPattern",value:function setBrushPattern(pattern){this.interactionLayer.setBrushPattern(pattern),this.emitBrushChangeEvent({brushColor:this.brushColor,brushTool:this.brushTool,brushPattern:this.interactionLayer.getBrushPattern()})}},{key:"setBackgroundMode",value:function setBackgroundMode(backgroundMode){this.backgroundLayer.setBackgroundMode(backgroundMode),this.renderBackgroundLayer()}},{key:"setBackgroundAlpha",value:function setBackgroundAlpha(alpha){this.backgroundLayer.setBackgroundAlpha(alpha),this.renderBackgroundLayer()}},{key:"setBackgroundColor",value:function setBackgroundColor(color){this.backgroundLayer.setBackgroundColor(color),this.renderBackgroundLayer()}},{key:"setIndicatorPixels",value:function setIndicatorPixels(indicatorPixels){this.interactionLayer.setIndicatorPixels(indicatorPixels),this.renderInteractionLayer()}},{key:"setIsGridFixed",value:function setIsGridFixed(isGridFixed){this.gridLayer.setIsGridFixed(isGridFixed),this.renderGridLayer()}},{key:"setGridStrokeColor",value:function setGridStrokeColor(color){this.gridLayer.setGridStrokeColor(color),this.renderGridLayer()}},{key:"setGridStrokeWidth",value:function setGridStrokeWidth(width){this.gridLayer.setGridStrokeWidth(width),this.renderGridLayer()}},{key:"setIsGridVisible",value:function setIsGridVisible(isGridVisible){this.gridLayer.setIsGridVisible(isGridVisible),this.renderGridLayer()}},{key:"setIsPanZoomable",value:function setIsPanZoomable(isPanZoomable){void 0!==isPanZoomable&&(this.isPanZoomable=isPanZoomable)}},{key:"setIsInteractionEnabled",value:function setIsInteractionEnabled(isInteractionEnabled){void 0!==isInteractionEnabled&&(this.isInteractionEnabled=isInteractionEnabled)}},{key:"setIsInteractionApplicable",value:function setIsInteractionApplicable(isInteractionApplicable){void 0!==isInteractionApplicable&&(this.isInteractionApplicable=isInteractionApplicable)}},{key:"setBrushTool",value:function setBrushTool(tool){this.brushTool=tool,this.brushTool!==types.G.SELECT&&(this.interactionLayer.setSelectedArea(null),this.interactionLayer.setSelectingArea(null)),this.emitBrushChangeEvent({brushColor:this.brushColor,brushTool:this.brushTool,brushPattern:this.interactionLayer.getBrushPattern()})}},{key:"setIsAltPressed",value:function setIsAltPressed(isAltPressed){this.isAltPressed=isAltPressed}},{key:"changeBrushColor",value:function changeBrushColor(color){this.brushColor=color,this.emitBrushChangeEvent({brushColor:this.brushColor,brushTool:this.brushTool,brushPattern:this.interactionLayer.getBrushPattern()})}},{key:"setBrushColor",value:function setBrushColor(color){if(void 0!==color){this.brushColor=color;var hoveredPixel=this.interactionLayer.getHoveredPixel();hoveredPixel&&(this.interactionLayer.setHoveredPixel((0,objectSpread2.Z)((0,objectSpread2.Z)({},hoveredPixel),{},{color:this.brushColor})),this.renderDataLayer())}}},{key:"getBrushPattern",value:function getBrushPattern(){return this.interactionLayer.getBrushPattern()}},{key:"getColumnCount",value:function getColumnCount(){return this.dataLayer.getColumnCount()}},{key:"getRowCount",value:function getRowCount(){return this.dataLayer.getRowCount()}},{key:"getGridIndices",value:function getGridIndices(){return this.dataLayer.getGridIndices()}},{key:"getGridSquareLength",value:function getGridSquareLength(){return this.gridSquareLength}},{key:"detectButtonClicked",value:function detectButtonClicked(coord){var _this$gridLayer$getBu=this.gridLayer.getButtonsDimensions(),top=_this$gridLayer$getBu.top,bottom=_this$gridLayer$getBu.bottom,right=_this$gridLayer$getBu.right,left=_this$gridLayer$getBu.left,x=coord.x,y=coord.y,scaledYHeight=lerpRanges(this.panZoom.scale,this.maxScale,this.minScale,top.height,top.height*this.extensionAllowanceRatio),scaledXWidth=lerpRanges(this.panZoom.scale,this.maxScale,this.minScale,left.width,left.width*this.extensionAllowanceRatio);return x>=top.x&&x<=top.x+top.width&&y>=top.y-scaledYHeight+top.height&&y<=top.y+top.height?ButtonDirection.TOP:x>=bottom.x&&x<=bottom.x+bottom.width&&y>=bottom.y&&y<=bottom.y+scaledYHeight?ButtonDirection.BOTTOM:x>=left.x-scaledXWidth+left.width&&x<=left.x+left.width&&y>=left.y&&y<=left.y+left.height?ButtonDirection.LEFT:x>=right.x&&x<=right.x+scaledXWidth&&y>=right.y&&y<=right.y+right.height?ButtonDirection.RIGHT:x>=left.x-scaledXWidth+left.width&&x<=left.x+left.width&&y>=top.y-scaledYHeight+top.height&&y<=top.y+top.height?ButtonDirection.TOPLEFT:x>=right.x&&x<=right.x+scaledXWidth&&y>=top.y-scaledYHeight+top.height&&y<=top.y+top.height?ButtonDirection.TOPRIGHT:x>=left.x-scaledXWidth+left.width&&x<=left.x+left.width&&y>=bottom.y&&y<=bottom.y+scaledYHeight?ButtonDirection.BOTTOMLEFT:x>=right.x&&x<=right.x+scaledXWidth&&y>=bottom.y&&y<=bottom.y+scaledYHeight?ButtonDirection.BOTTOMRIGHT:null}},{key:"scale",value:function scale(x,y){this.dataLayer.scale(x,y),this.gridLayer.scale(x,y),this.interactionLayer.scale(x,y),this.backgroundLayer.scale(x,y)}},{key:"setWidth",value:function setWidth(width,devicePixelRatio){this.width=width,this.dataLayer.setWidth(width,devicePixelRatio),this.gridLayer.setWidth(width,devicePixelRatio),this.interactionLayer.setWidth(width,devicePixelRatio),this.backgroundLayer.setWidth(width,devicePixelRatio)}},{key:"setHeight",value:function setHeight(height,devicePixelRatio){this.height=height,this.dataLayer.setHeight(height,devicePixelRatio),this.gridLayer.setHeight(height,devicePixelRatio),this.interactionLayer.setHeight(height,devicePixelRatio),this.backgroundLayer.setHeight(height,devicePixelRatio)}},{key:"getWidth",value:function getWidth(){return this.width}},{key:"getHeight",value:function getHeight(){return this.height}},{key:"getCanvasElement",value:function getCanvasElement(){return this.element}},{key:"setSize",value:function setSize(width,height,devicePixelRatio){this.setWidth(width,devicePixelRatio),this.setHeight(height,devicePixelRatio),this.setDpr(devicePixelRatio||this.dpr)}},{key:"setDpr",value:function setDpr(dpr){this.dpr=dpr,this.dataLayer.setDpr(dpr),this.gridLayer.setDpr(dpr),this.interactionLayer.setDpr(dpr)}},{key:"setData",value:function setData(data){var _validateSquareArray=validateSquareArray(data),isDataValid=_validateSquareArray.isDataValid,rowCount=_validateSquareArray.rowCount,columnCount=_validateSquareArray.columnCount;if(!isDataValid)throw new Error("Data is not valid");var leftColumnIndex=data[0][0].columnIndex,topRowIndex=data[0][0].rowIndex;this.dataLayer.setData(new Map);for(var i=0;i<data.length;i++){this.dataLayer.getData().set(topRowIndex+i,new Map);for(var j=0;j<data[i].length;j++)this.dataLayer.getData().get(topRowIndex+i).set(leftColumnIndex+j,{color:data[i][j].color})}this.gridLayer.setCriterionDataForRendering(this.dataLayer.getData()),this.gridLayer.setRowCount(rowCount),this.gridLayer.setColumnCount(columnCount),this.interactionLayer.setDataLayerRowCount(rowCount),this.interactionLayer.setDataLayerColumnCount(columnCount),this.emitDataChangeEvent({data:this.dataLayer.getCopiedData()}),this.emitGridChangeEvent({dimensions:this.dataLayer.getDimensions(),indices:this.dataLayer.getGridIndices()}),this.interactionLayer.setCriterionDataForRendering(this.dataLayer.getData()),this.dataLayer.setCriterionDataForRendering(this.dataLayer.getData()),this.interactionLayer.resetCapturedData(),this.setPanZoom({offset:{x:-this.panZoom.scale*(columnCount/2)*this.gridSquareLength,y:-this.panZoom.scale*(rowCount/2)*this.gridSquareLength}}),this.renderAll()}},{key:"setPanZoom",value:function setPanZoom(_ref2){var offset=_ref2.offset,scale=_ref2.scale,baseColumnCount=_ref2.baseColumnCount,baseRowCount=_ref2.baseRowCount;if(scale&&(this.panZoom.scale=scale),offset){var correctedOffset=(0,objectSpread2.Z)({},offset),columnCount=baseColumnCount||this.dataLayer.getColumnCount(),rowCount=baseRowCount||this.dataLayer.getRowCount(),isGridRowsBiggerThanCanvas=rowCount*this.gridSquareLength*this.panZoom.scale>this.height,isGridColumnsBiggerThanCanvas=columnCount*this.gridSquareLength*this.panZoom.scale>this.width,minXPosition=isGridColumnsBiggerThanCanvas?-columnCount*this.gridSquareLength*this.panZoom.scale-this.width/2*this.panZoom.scale:-this.width/2*this.panZoom.scale,minYPosition=isGridRowsBiggerThanCanvas?-rowCount*this.gridSquareLength*this.panZoom.scale-this.height/2*this.panZoom.scale:-this.height/2*this.panZoom.scale,maxXPosition=isGridColumnsBiggerThanCanvas?this.width-this.width/2*this.panZoom.scale:this.width-columnCount*this.gridSquareLength*this.panZoom.scale-this.width/2*this.panZoom.scale,maxYPosition=isGridRowsBiggerThanCanvas?this.height-this.height/2*this.panZoom.scale:this.height-rowCount*this.gridSquareLength*this.panZoom.scale-this.height/2*this.panZoom.scale;correctedOffset.x<minXPosition&&(correctedOffset.x=minXPosition),correctedOffset.y<minYPosition&&(correctedOffset.y=minYPosition),correctedOffset.x>maxXPosition&&(correctedOffset.x=maxXPosition),correctedOffset.y>maxYPosition&&(correctedOffset.y=maxYPosition),this.panZoom.offset=correctedOffset}this.relayPanZoomToOtherLayers(),this.renderAll()}},{key:"relayPanZoomToOtherLayers",value:function relayPanZoomToOtherLayers(){this.dataLayer.setPanZoom(this.panZoom),this.gridLayer.setPanZoom(this.panZoom),this.interactionLayer.setPanZoom(this.panZoom)}},{key:"extendInteractionGridBy",value:function extendInteractionGridBy(direction,amount){var extendAmount={x:0,y:0},interactionLayer=this.interactionLayer,interactionCapturedData=interactionLayer.getCapturedData();if(interactionCapturedData&&!(amount.x<=0&&amount.y<=0)){for(var _i=0,_Object$entries=Object.entries(amount);_i<_Object$entries.length;_i++)for(var _Object$entries$_i=(0,slicedToArray.Z)(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1],i=0;i<value;i++)direction!==ButtonDirection.TOPLEFT&&direction!==ButtonDirection.TOPRIGHT||"y"!==key?direction!==ButtonDirection.BOTTOMLEFT&&direction!==ButtonDirection.BOTTOMRIGHT||"y"!==key?direction!==ButtonDirection.TOPLEFT&&direction!==ButtonDirection.BOTTOMLEFT||"x"!==key?direction!==ButtonDirection.TOPRIGHT&&direction!==ButtonDirection.BOTTOMRIGHT||"x"!==key?interactionLayer.extendCapturedData(direction):interactionLayer.extendCapturedData(ButtonDirection.RIGHT):interactionLayer.extendCapturedData(ButtonDirection.LEFT):interactionLayer.extendCapturedData(ButtonDirection.BOTTOM):interactionLayer.extendCapturedData(ButtonDirection.TOP),"x"===key?extendAmount.x+=1:"y"===key&&(extendAmount.y+=1);if(!(extendAmount.x<=0&&extendAmount.y<=0)){var baseRowCount=getRowCountFromData(interactionCapturedData),baseColumnCount=getColumnCountFromData(interactionCapturedData),panZoomDiff_x=this.gridSquareLength*extendAmount.x*this.panZoom.scale,panZoomDiff_y=this.gridSquareLength*extendAmount.y*this.panZoom.scale;direction===ButtonDirection.TOP?this.setPanZoom({offset:{x:this.panZoom.offset.x,y:this.panZoom.offset.y-panZoomDiff_y},baseRowCount,baseColumnCount}):direction===ButtonDirection.BOTTOM?this.setPanZoom({offset:{x:this.panZoom.offset.x,y:this.panZoom.offset.y},baseRowCount,baseColumnCount}):direction===ButtonDirection.LEFT?this.setPanZoom({offset:{x:this.panZoom.offset.x-panZoomDiff_x,y:this.panZoom.offset.y},baseRowCount,baseColumnCount}):direction===ButtonDirection.RIGHT?this.setPanZoom({offset:{x:this.panZoom.offset.x,y:this.panZoom.offset.y},baseRowCount,baseColumnCount}):direction===ButtonDirection.TOPLEFT?this.setPanZoom({offset:{x:this.panZoom.offset.x-panZoomDiff_x,y:this.panZoom.offset.y-panZoomDiff_y},baseRowCount,baseColumnCount}):direction===ButtonDirection.TOPRIGHT?this.setPanZoom({offset:{x:this.panZoom.offset.x,y:this.panZoom.offset.y-panZoomDiff_y},baseRowCount,baseColumnCount}):direction===ButtonDirection.BOTTOMLEFT?this.setPanZoom({offset:{x:this.panZoom.offset.x-panZoomDiff_x,y:this.panZoom.offset.y},baseRowCount,baseColumnCount}):direction===ButtonDirection.BOTTOMRIGHT&&this.setPanZoom({offset:{x:this.panZoom.offset.x,y:this.panZoom.offset.y},baseRowCount,baseColumnCount})}}}},{key:"shortenInteractionGridBy",value:function shortenInteractionGridBy(direction,amount){var interactionLayer=this.interactionLayer,shortenAmount={x:0,y:0};if(!(amount.x<=0&&amount.y<=0)){for(var _i2=0,_Object$entries2=Object.entries(amount);_i2<_Object$entries2.length;_i2++)for(var _Object$entries2$_i=(0,slicedToArray.Z)(_Object$entries2[_i2],2),key=_Object$entries2$_i[0],value=_Object$entries2$_i[1],i=0;i<value;i++)direction!==ButtonDirection.TOPLEFT&&direction!==ButtonDirection.TOPRIGHT||"y"!==key?direction!==ButtonDirection.BOTTOMLEFT&&direction!==ButtonDirection.BOTTOMRIGHT||"y"!==key?direction!==ButtonDirection.TOPLEFT&&direction!==ButtonDirection.BOTTOMLEFT||"x"!==key?direction!==ButtonDirection.TOPRIGHT&&direction!==ButtonDirection.BOTTOMRIGHT||"x"!==key?interactionLayer.shortenCapturedData(direction):interactionLayer.shortenCapturedData(ButtonDirection.RIGHT):interactionLayer.shortenCapturedData(ButtonDirection.LEFT):interactionLayer.shortenCapturedData(ButtonDirection.BOTTOM):interactionLayer.shortenCapturedData(ButtonDirection.TOP),"x"===key?shortenAmount.x+=1:"y"===key&&(shortenAmount.y+=1);if(!(shortenAmount.x<=0&&shortenAmount.y<=0)){var interactionCapturedData=interactionLayer.getCapturedData(),baseRowCount=getRowCountFromData(interactionCapturedData),baseColumnCount=getColumnCountFromData(interactionCapturedData),panZoomDiff_x=this.gridSquareLength/2*shortenAmount.x*this.panZoom.scale,panZoomDiff_y=this.gridSquareLength/2*shortenAmount.y*this.panZoom.scale;direction===ButtonDirection.TOP?this.setPanZoom({offset:{x:this.panZoom.offset.x,y:this.panZoom.offset.y+2*panZoomDiff_y},baseColumnCount,baseRowCount}):direction===ButtonDirection.BOTTOM?this.setPanZoom({offset:{x:this.panZoom.offset.x,y:this.panZoom.offset.y},baseColumnCount,baseRowCount}):direction===ButtonDirection.LEFT?this.setPanZoom({offset:{x:this.panZoom.offset.x+2*panZoomDiff_x,y:this.panZoom.offset.y},baseColumnCount,baseRowCount}):direction===ButtonDirection.RIGHT?this.setPanZoom({offset:{x:this.panZoom.offset.x,y:this.panZoom.offset.y},baseColumnCount,baseRowCount}):direction===ButtonDirection.TOPLEFT?this.setPanZoom({offset:{x:this.panZoom.offset.x+2*panZoomDiff_x,y:this.panZoom.offset.y+2*panZoomDiff_y},baseRowCount,baseColumnCount}):direction===ButtonDirection.TOPRIGHT?this.setPanZoom({offset:{x:this.panZoom.offset.x,y:this.panZoom.offset.y+2*panZoomDiff_y},baseRowCount,baseColumnCount}):direction===ButtonDirection.BOTTOMLEFT?this.setPanZoom({offset:{x:this.panZoom.offset.x+2*panZoomDiff_x,y:this.panZoom.offset.y},baseRowCount,baseColumnCount}):direction===ButtonDirection.BOTTOMRIGHT&&this.setPanZoom({offset:{x:this.panZoom.offset.x,y:this.panZoom.offset.y},baseRowCount,baseColumnCount})}}}},{key:"handlePinchZoom",value:function handlePinchZoom(evt){if(this.isPanZoomable){var newPanZoom=function calculateNewPanZoomFromPinchZoom(evt,element,panZoom,zoomSensitivity,prevPinchZoomDiff,minScale,maxScale){if(evt.preventDefault(),window.TouchEvent&&evt instanceof TouchEvent){var touchCount=evt.touches.length;if(touchCount<2)return;for(var canvasTouchEventIndexes=[],i=0;i<touchCount;i++)evt.touches.item(i).target instanceof HTMLCanvasElement&&canvasTouchEventIndexes.push(i);if(2!==canvasTouchEventIndexes.length)return;var firstTouch=evt.touches[canvasTouchEventIndexes[0]],secondTouch=evt.touches[canvasTouchEventIndexes[1]],pinchZoomCurrentDiff=Math.abs(firstTouch.clientX-secondTouch.clientX)+Math.abs(firstTouch.clientY-secondTouch.clientY),firstTouchPoint=getPointFromTouch(firstTouch,element,panZoom),secondTouchPoint=getPointFromTouch(secondTouch,element,panZoom),touchCenterPos={x:(firstTouchPoint.offsetX+secondTouchPoint.offsetX)/2,y:(firstTouchPoint.offsetY+secondTouchPoint.offsetY)/2};if(!prevPinchZoomDiff)return{pinchZoomDiff:pinchZoomCurrentDiff,panZoom};var zoom=1-2*(prevPinchZoomDiff-pinchZoomCurrentDiff)/zoomSensitivity,newScale=panZoom.scale*zoom;if(minScale>newScale||newScale>maxScale)return;var scaleOffset=diffPoints(touchCenterPos,getScreenPoint(getWorldPoint(touchCenterPos,{scale:panZoom.scale,offset:panZoom.offset}),{scale:newScale,offset:panZoom.offset}));return{pinchZoomDiff:pinchZoomCurrentDiff,panZoom:{scale:newScale,offset:addPoints(panZoom.offset,scaleOffset)}}}return null}(evt,this.element,this.panZoom,this.zoomSensitivity,this.pinchZoomDiff,this.minScale,this.maxScale);newPanZoom&&(this.pinchZoomDiff=newPanZoom.pinchZoomDiff,this.setPanZoom(newPanZoom.panZoom))}}},{key:"drawPixelInInteractionLayer",value:function drawPixelInInteractionLayer(rowIndex,columnIndex,brushPattern){var interactionLayer=this.interactionLayer,data=this.dataLayer.getData(),brushPatternWidth=brushPattern.length,brushPatternHeight=brushPattern[0].length,brushPatternCenterRowIndex=Math.floor(brushPatternHeight/2),brushPatternCenterColumnIndex=Math.floor(brushPatternWidth/2);if(this.brushTool===types.G.ERASER)for(var i=0;i<brushPattern.length;i++)for(var j=0;j<brushPattern[i].length;j++){var _data$get,_data$get$get;if(0!==brushPattern[i][j]){var previousColor=null===(_data$get=data.get(rowIndex+i-brushPatternCenterRowIndex))||void 0===_data$get||null===(_data$get$get=_data$get.get(columnIndex+j-brushPatternCenterColumnIndex))||void 0===_data$get$get?void 0:_data$get$get.color;interactionLayer.addToErasedPixelRecords("current-device-user-id",{rowIndex:rowIndex+i-brushPatternCenterRowIndex,columnIndex:columnIndex+j-brushPatternCenterColumnIndex,color:"",previousColor})}}else if(this.brushTool===types.G.DOT)for(var _i3=0;_i3<brushPattern.length;_i3++)for(var _j=0;_j<brushPattern[_i3].length;_j++){var _data$get2,_data$get2$get;if(0!==brushPattern[_i3][_j]){var _previousColor=null===(_data$get2=data.get(rowIndex+_i3-brushPatternCenterRowIndex))||void 0===_data$get2||null===(_data$get2$get=_data$get2.get(columnIndex+_j-brushPatternCenterColumnIndex))||void 0===_data$get2$get?void 0:_data$get2$get.color;interactionLayer.addToStrokePixelRecords("current-device-user-id",{rowIndex:rowIndex+_i3-brushPatternCenterRowIndex,columnIndex:columnIndex+_j-brushPatternCenterColumnIndex,color:this.brushColor,previousColor:_previousColor})}}else if(this.brushTool===types.G.PAINT_BUCKET){var _data$get3,_data$get3$get,gridIndices=getGridIndicesFromData(data),initialSelectedColor=null===(_data$get3=data.get(rowIndex))||void 0===_data$get3||null===(_data$get3$get=_data$get3.get(columnIndex))||void 0===_data$get3$get?void 0:_data$get3$get.color;if(initialSelectedColor===this.brushColor)return;this.paintSameColorRegion(initialSelectedColor,gridIndices,{rowIndex,columnIndex})}this.renderInteractionLayer()}},{key:"relayDataDimensionsToLayers",value:function relayDataDimensionsToLayers(){var columnCount=getColumnCountFromData(this.dataLayer.getData());this.gridLayer.setColumnCount(columnCount),this.interactionLayer.setDataLayerColumnCount(columnCount);var rowCount=getRowCountFromData(this.dataLayer.getData());this.gridLayer.setRowCount(rowCount),this.interactionLayer.setDataLayerRowCount(rowCount)}},{key:"relayInteractionDataToDataLayer",value:function relayInteractionDataToDataLayer(){var interactionLayer=this.interactionLayer;if(this.isInteractionApplicable){var strokedPixelModifyItems=interactionLayer.getEffectiveStrokePixelChanges("current-device-user-id"),erasedPixelModifyItems=interactionLayer.getEffectiveEraserPixelChanges("current-device-user-id"),pixelModifyItems=[].concat((0,toConsumableArray.Z)(strokedPixelModifyItems),(0,toConsumableArray.Z)(erasedPixelModifyItems));0!==pixelModifyItems.length&&(this.dataLayer.colorPixels(pixelModifyItems),this.recordInteractionColorChangeAction(pixelModifyItems)),0!==pixelModifyItems.length&&this.emitStrokeEndEvent({strokedPixels:pixelModifyItems,data:this.dataLayer.getCopiedData(),strokeTool:this.brushTool});var capturedData=interactionLayer.getCapturedData();if(capturedData){var interactionGridIndices=getGridIndicesFromData(capturedData),dataGridIndices=this.interactionLayer.getCapturedDataOriginalIndices(),topRowDiff=interactionGridIndices.topRowIndex-dataGridIndices.topRowIndex,leftColumnDiff=interactionGridIndices.leftColumnIndex-dataGridIndices.leftColumnIndex,bottomRowDiff=interactionGridIndices.bottomRowIndex-dataGridIndices.bottomRowIndex,rightColumnDiff=interactionGridIndices.rightColumnIndex-dataGridIndices.rightColumnIndex,amount=0,direction=null,startIndex=0,isExtendingAction=!0;topRowDiff<0?(amount=-topRowDiff,this.dataLayer.extendGridBy(ButtonDirection.TOP,amount,dataGridIndices.topRowIndex),direction=ButtonDirection.TOP,startIndex=dataGridIndices.topRowIndex,isExtendingAction=!0):topRowDiff>0&&(amount=topRowDiff,this.dataLayer.shortenGridBy(ButtonDirection.TOP,amount,dataGridIndices.topRowIndex),direction=ButtonDirection.TOP,startIndex=dataGridIndices.topRowIndex,isExtendingAction=!1),leftColumnDiff<0?(amount=-leftColumnDiff,this.dataLayer.extendGridBy(ButtonDirection.LEFT,amount,dataGridIndices.leftColumnIndex),direction=ButtonDirection.LEFT,startIndex=dataGridIndices.leftColumnIndex,isExtendingAction=!0):leftColumnDiff>0&&(amount=leftColumnDiff,this.dataLayer.shortenGridBy(ButtonDirection.LEFT,amount,dataGridIndices.leftColumnIndex),direction=ButtonDirection.LEFT,startIndex=dataGridIndices.leftColumnIndex,isExtendingAction=!1),bottomRowDiff>0?(amount=bottomRowDiff,this.dataLayer.extendGridBy(ButtonDirection.BOTTOM,amount,dataGridIndices.bottomRowIndex),direction=ButtonDirection.BOTTOM,startIndex=dataGridIndices.bottomRowIndex,isExtendingAction=!0):bottomRowDiff<0&&(amount=-bottomRowDiff,this.dataLayer.shortenGridBy(ButtonDirection.BOTTOM,amount,dataGridIndices.bottomRowIndex),direction=ButtonDirection.BOTTOM,startIndex=dataGridIndices.bottomRowIndex,isExtendingAction=!1),rightColumnDiff>0?(amount=rightColumnDiff,this.dataLayer.extendGridBy(ButtonDirection.RIGHT,amount,dataGridIndices.rightColumnIndex),direction=ButtonDirection.RIGHT,startIndex=dataGridIndices.rightColumnIndex,isExtendingAction=!0):rightColumnDiff<0&&(amount=-rightColumnDiff,this.dataLayer.shortenGridBy(ButtonDirection.RIGHT,amount,dataGridIndices.rightColumnIndex),direction=ButtonDirection.RIGHT,startIndex=dataGridIndices.rightColumnIndex,isExtendingAction=!1),direction&&(this.recordInteractionSizeChangeAction(direction,this.dataLayer.getSwipedPixels(),isExtendingAction?amount:-amount,startIndex),this.dataLayer.resetSwipedPixels())}var updatedData=this.dataLayer.getCopiedData();this.emitDataChangeEvent({data:updatedData});var updatedColumnCount=getColumnCountFromData(updatedData),updatedDimensions={rowCount:getRowCountFromData(updatedData),columnCount:updatedColumnCount},updatedGridIndices=getGridIndicesFromData(updatedData);this.emitGridChangeEvent({dimensions:updatedDimensions,indices:updatedGridIndices}),this.relayDataDimensionsToLayers(),interactionLayer.deleteErasedPixelRecord("current-device-user-id"),interactionLayer.deleteStrokePixelRecord("current-device-user-id"),this.dataLayer.setCriterionDataForRendering(this.dataLayer.getData()),this.interactionLayer.setCriterionDataForRendering(this.dataLayer.getData())}interactionLayer.resetCapturedData(),this.renderAll()}},{key:"recordInteractionSizeChangeAction",value:function recordInteractionSizeChangeAction(direction,deletedPixels,amount,startIndex){this.recordAction(new SizeChangeAction(deletedPixels,[{direction,amount,startIndex}]))}},{key:"recordInteractionColorChangeAction",value:function recordInteractionColorChangeAction(pixelModifyItems){this.recordAction(new ColorChangeAction(pixelModifyItems))}},{key:"commitAction",value:function commitAction(action){var type=action.getType();switch(type!==ActionType.SelectAreaMove&&(this.interactionLayer.setSelectedArea(null),this.setBrushTool(types.G.DOT)),type){case ActionType.ColorChange:var colorChangeAction=action;this.dataLayer.updatePixelColors(colorChangeAction.data);break;case ActionType.SizeChange:for(var sizeChangeAction=action,i=0;i<sizeChangeAction.changeAmounts.length;i++){var change=sizeChangeAction.changeAmounts[i];change.amount>0?this.dataLayer.extendGridBy(change.direction,change.amount,change.startIndex):this.dataLayer.shortenGridBy(change.direction,-change.amount,change.startIndex);var sizeChangePixels=sizeChangeAction.data;this.dataLayer.updatePixelColors(sizeChangePixels)}break;case ActionType.ColorSizeChange:for(var colorSizeChangeAction=action,_i4=0;_i4<colorSizeChangeAction.changeAmounts.length;_i4++){var _change=colorSizeChangeAction.changeAmounts[_i4];_change.amount>0?this.dataLayer.extendGridBy(_change.direction,_change.amount,_change.startIndex):this.dataLayer.shortenGridBy(_change.direction,_change.amount,_change.startIndex)}var colorSizeChangePixels=colorSizeChangeAction.data;this.dataLayer.updatePixelColors(colorSizeChangePixels);break;case ActionType.SelectAreaMove:var selectAreamoveAction=action;this.dataLayer.updatePixelColors(selectAreamoveAction.data),this.brushTool=types.G.SELECT,this.interactionLayer.setSelectedArea(selectAreamoveAction.newSelectedArea)}var updatedData=this.dataLayer.getCopiedData();this.emitGridChangeEvent({dimensions:{rowCount:getRowCountFromData(updatedData),columnCount:getColumnCountFromData(updatedData)},indices:getGridIndicesFromData(updatedData)}),this.emitDataChangeEvent({data:updatedData})}},{key:"recordAction",value:function recordAction(action){this.undoHistory.length>=this.maxHistoryCount&&this.undoHistory.shift(),this.undoHistory.push(action),this.redoHistory=[]}},{key:"undo",value:function undo(){if(0!==this.undoHistory.length){var action=this.undoHistory.pop(),inverseAction=action.createInverseAction();this.commitAction(inverseAction),this.redoHistory.push(action);var rowCount=getRowCountFromData(this.dataLayer.getData()),columnCount=getColumnCountFromData(this.dataLayer.getData());this.gridLayer.setRowCount(rowCount),this.gridLayer.setColumnCount(columnCount),this.interactionLayer.setDataLayerRowCount(rowCount),this.interactionLayer.setDataLayerColumnCount(columnCount),this.dataLayer.setCriterionDataForRendering(this.dataLayer.getData()),this.interactionLayer.setCriterionDataForRendering(this.dataLayer.getData()),this.renderAll()}}},{key:"redo",value:function redo(){if(0!==this.redoHistory.length){var action=this.redoHistory.pop();this.commitAction(action),this.undoHistory.push(action);var rowCount=getRowCountFromData(this.dataLayer.getData()),columnCount=getColumnCountFromData(this.dataLayer.getData());this.gridLayer.setRowCount(rowCount),this.gridLayer.setColumnCount(columnCount),this.interactionLayer.setDataLayerRowCount(rowCount),this.interactionLayer.setDataLayerColumnCount(columnCount),this.dataLayer.setCriterionDataForRendering(this.dataLayer.getData()),this.interactionLayer.setCriterionDataForRendering(this.dataLayer.getData()),this.renderAll()}}},{key:"erasePixels",value:function erasePixels(data){var dataForAction=this.dataLayer.erasePixels(data).dataForAction;null!==this.interactionLayer.getCapturedData()&&this.interactionLayer.erasePixels(data),this.recordAction(new ColorChangeAction(dataForAction)),this.emitDataChangeEvent({data:this.dataLayer.getCopiedData()}),this.renderAll()}},{key:"colorPixels",value:function colorPixels(data){var _this$dataLayer$color=this.dataLayer.colorPixels(data),changeAmounts=_this$dataLayer$color.changeAmounts,dataForAction=_this$dataLayer$color.dataForAction;null!==this.interactionLayer.getCapturedData()?(this.interactionLayer.colorPixels(data),this.interactionLayer.setCriterionDataForRendering(this.interactionLayer.getCapturedData())):this.interactionLayer.setCriterionDataForRendering(this.dataLayer.getData()),this.relayDataDimensionsToLayers(),this.recordAction(new ColorSizeChangeAction(dataForAction,changeAmounts)),this.emitDataChangeEvent({data:this.dataLayer.getCopiedData()}),this.dataLayer.setCriterionDataForRendering(this.dataLayer.getData()),this.renderAll()}},{key:"paintSameColorRegion",value:function paintSameColorRegion(initialColor,gridIndices,currentIndices){var interactionLayer=this.interactionLayer,indicesQueue=new Queue;indicesQueue.enqueue(currentIndices),interactionLayer.setCapturedData(this.dataLayer.getCopiedData());for(var data=this.interactionLayer.getCapturedData();indicesQueue.size()>0;){var _data$get4,_ref3=indicesQueue.dequeue(),rowIndex=_ref3.rowIndex,columnIndex=_ref3.columnIndex;if(isValidIndicesRange(rowIndex,columnIndex,gridIndices)){var currentPixel=null===(_data$get4=data.get(rowIndex))||void 0===_data$get4?void 0:_data$get4.get(columnIndex);if(currentPixel&&(null==currentPixel?void 0:currentPixel.color)===initialColor){var color=this.brushColor,previousColor=data.get(rowIndex).get(columnIndex).color;data.get(rowIndex).get(columnIndex).color=color,interactionLayer.addToStrokePixelRecords("current-device-user-id",{rowIndex,columnIndex,color,previousColor}),[{rowIndex:rowIndex-1,columnIndex},{rowIndex:rowIndex+1,columnIndex},{rowIndex,columnIndex:columnIndex-1},{rowIndex,columnIndex:columnIndex+1}].forEach((function(_ref4){var rowIndex=_ref4.rowIndex,columnIndex=_ref4.columnIndex;indicesQueue.enqueue({rowIndex,columnIndex})}))}}}interactionLayer.resetCapturedData()}},{key:"onMouseDown",value:function onMouseDown(evt){evt.preventDefault();var point=getPointFromTouchyEvent(evt,this.element,this.panZoom);this.panPoint.lastMousePos={x:point.offsetX,y:point.offsetY},this.interactionLayer.setHoveredPixel(null);var mouseCartCoord=getMouseCartCoord(evt,this.element,this.panZoom,this.dpr);this.mouseDownWorldPos={x:mouseCartCoord.x,y:mouseCartCoord.y},this.mouseDownPanZoom={offset:{x:this.panZoom.offset.x,y:this.panZoom.offset.y},scale:this.panZoom.scale};var gridIndices=this.dataLayer.getGridIndices(),pixelIndex=getPixelIndexFromMouseCartCoord(mouseCartCoord,this.getRowCount(),this.getColumnCount(),this.gridSquareLength,gridIndices.topRowIndex,gridIndices.leftColumnIndex);if(this.mouseMode=pixelIndex?MouseMode.DRAWING:MouseMode.PANNING,this.brushTool===types.G.SELECT){this.mouseMode=MouseMode.DRAWING;var previousSelectedArea=this.interactionLayer.getSelectedArea(),isMouseCoordInSelectedArea=!1;if(previousSelectedArea){var directionToExtendSelectedArea=this.interactionLayer.detectSelectedAreaExtendDirection(this.mouseDownWorldPos);if(this.interactionLayer.setDirectionToExtendSelectedArea(directionToExtendSelectedArea),isMouseCoordInSelectedArea=getIsPointInsideRegion(this.mouseDownWorldPos,previousSelectedArea),null!==directionToExtendSelectedArea){var coloredPixels=this.getColoredPixelsInSelectedArea(previousSelectedArea,"");return this.interactionLayer.setExtendingSelectedArea(previousSelectedArea),this.interactionLayer.setExtendingSelectedPixels(coloredPixels),this.interactionLayer.setCapturedBaseExtendingSelectedArea(previousSelectedArea),this.interactionLayer.setCapturedBaseExtendingSelectedAreaPixels(coloredPixels),this.dataLayer.erasePixels(coloredPixels),this.dataLayer.render(),void this.interactionLayer.render()}}if(isMouseCoordInSelectedArea){this.interactionLayer.setSelectingArea(null);var _coloredPixels=this.getColoredPixelsInSelectedArea(previousSelectedArea,"");this.dataLayer.erasePixels(_coloredPixels),this.interactionLayer.setSelectedAreaPixels(_coloredPixels),this.interactionLayer.setMovingSelectedPixels(_coloredPixels),this.interactionLayer.setMovingSelectedArea(previousSelectedArea),this.dataLayer.render(),this.interactionLayer.render()}else this.interactionLayer.setSelectedArea(null),this.interactionLayer.setSelectingArea({startWorldPos:this.mouseDownWorldPos,endWorldPos:this.mouseDownWorldPos})}else{if(pixelIndex&&this.brushTool!==types.G.NONE&&(this.emitHoverPixelChangeEvent({indices:null}),this.drawPixelInInteractionLayer(pixelIndex.rowIndex,pixelIndex.columnIndex,this.interactionLayer.getBrushPattern()),this.renderInteractionLayer(),this.renderErasedPixelsFromInteractionLayerInDataLayer()),!this.gridLayer.getIsGridFixed()){var buttonDirection=this.detectButtonClicked(mouseCartCoord);buttonDirection&&(this.extensionPoint.direction=buttonDirection,this.mouseMode=MouseMode.EXTENDING,touchy(this.element,addEvent,"mousemove",this.handleExtension))}}this.mouseMode===MouseMode.PANNING&&(touchy(this.element,addEvent,"mousemove",this.handlePanning),touchy(this.element,addEvent,"mousemove",this.handlePinchZoom))}},{key:"getColoredPixelsInSelectedArea",value:function getColoredPixelsInSelectedArea(selectedArea,newColor){var _step,data=this.dataLayer.getData(),rowCount=this.dataLayer.getRowCount(),columnCount=this.dataLayer.getColumnCount(),rowKeys=getRowKeysFromData(data),columnKeys=getColumnKeysFromData(data),sortedRowKeys=rowKeys.sort((function(a,b){return a-b})),sortedColumnKeys=columnKeys.sort((function(a,b){return a-b})),includedPixelsIndices=convertWorldPosAreaToPixelGridArea(selectedArea,rowCount,columnCount,this.gridSquareLength,sortedRowKeys,sortedColumnKeys).includedPixelsIndices,_getGridIndicesFromDa=getGridIndicesFromData(data),topRowIndex=_getGridIndicesFromDa.topRowIndex,bottomRowIndex=_getGridIndicesFromDa.bottomRowIndex,leftColumnIndex=_getGridIndicesFromDa.leftColumnIndex,rightColumnIndex=_getGridIndicesFromDa.rightColumnIndex,selectedAreaPixels=[],_iterator=(0,createForOfIteratorHelper.Z)(includedPixelsIndices);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _data$get$get2,index=_step.value,rowIndex=index.rowIndex,columnIndex=index.columnIndex,color=null===(_data$get$get2=data.get(rowIndex).get(columnIndex))||void 0===_data$get$get2?void 0:_data$get$get2.color;color&&selectedAreaPixels.push({rowIndex,columnIndex,previousColor:color,color:newColor})}}catch(err){_iterator.e(err)}finally{_iterator.f()}var filteredSelectedAreaPixels=selectedAreaPixels.filter((function(_ref5){var rowIndex=_ref5.rowIndex,columnIndex=_ref5.columnIndex;return rowIndex>=topRowIndex&&rowIndex<=bottomRowIndex&&columnIndex>=leftColumnIndex&&columnIndex<=rightColumnIndex}));return filteredSelectedAreaPixels}},{key:"onMouseMove",value:function onMouseMove(evt){var _this2=this;evt.preventDefault();var mouseCartCoord=getMouseCartCoord(evt,this.element,this.panZoom,this.dpr);this.mouseMoveWorldPos={x:mouseCartCoord.x,y:mouseCartCoord.y},this.styleMouseCursor(mouseCartCoord);var gridIndices=this.dataLayer.getGridIndices(),pixelIndex=getPixelIndexFromMouseCartCoord(mouseCartCoord,this.getRowCount(),this.getColumnCount(),this.gridSquareLength,gridIndices.topRowIndex,gridIndices.leftColumnIndex),hoveredPixel=this.interactionLayer.getHoveredPixel();if(this.brushTool===types.G.SELECT){var previousSelectingArea=this.interactionLayer.getSelectingArea(),previousSelectedArea=this.interactionLayer.getSelectedArea(),previousSelectedAreaPixels=this.interactionLayer.getSelectedAreaPixels(),movingSelectedPixels=this.interactionLayer.getMovingSelectedPixels(),directionToExtendSelectedArea=this.interactionLayer.getDirectionToExtendSelectedArea();if(null!==directionToExtendSelectedArea&&(this.interactionLayer.extendSelectedArea(directionToExtendSelectedArea,this.mouseMoveWorldPos,this.isAltPressed),this.gridLayer.render(),this.gridLayer.renderSelection(this.interactionLayer.getExtendingSelectedArea()),this.interactionLayer.render()),movingSelectedPixels&&this.mouseDownWorldPos&&previousSelectedArea){var mouseMoveDistance=diffPoints(this.mouseDownWorldPos,this.mouseMoveWorldPos),pixelWiseDeltaX=Math.round(mouseMoveDistance.x/this.gridSquareLength),pixelWiseDeltaY=Math.round(mouseMoveDistance.y/this.gridSquareLength),newMovingSelectedPixels=previousSelectedAreaPixels.map((function(pixel){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},pixel),{},{rowIndex:pixel.rowIndex-pixelWiseDeltaY,columnIndex:pixel.columnIndex-pixelWiseDeltaX})}));this.interactionLayer.setMovingSelectedArea({startWorldPos:{x:previousSelectedArea.startWorldPos.x-pixelWiseDeltaX*this.gridSquareLength,y:previousSelectedArea.startWorldPos.y-pixelWiseDeltaY*this.gridSquareLength},endWorldPos:{x:previousSelectedArea.endWorldPos.x-pixelWiseDeltaX*this.gridSquareLength,y:previousSelectedArea.endWorldPos.y-pixelWiseDeltaY*this.gridSquareLength},startPixelIndex:{rowIndex:previousSelectedArea.startPixelIndex.rowIndex-pixelWiseDeltaY,columnIndex:previousSelectedArea.startPixelIndex.columnIndex-pixelWiseDeltaX},endPixelIndex:{rowIndex:previousSelectedArea.endPixelIndex.rowIndex-pixelWiseDeltaY,columnIndex:previousSelectedArea.endPixelIndex.columnIndex-pixelWiseDeltaX}}),this.interactionLayer.setMovingSelectedPixels(newMovingSelectedPixels);var selectedArea=this.interactionLayer.getMovingSelectedArea();return this.gridLayer.render(),this.gridLayer.renderSelection(selectedArea),void this.interactionLayer.render()}if(null!==previousSelectingArea){this.interactionLayer.setSelectingArea({startWorldPos:this.mouseDownWorldPos,endWorldPos:this.mouseMoveWorldPos});var selectingArea=this.interactionLayer.getSelectingArea();return this.renderGridLayer(),void this.gridLayer.renderSelection(selectingArea)}}else{if(pixelIndex)if(this.mouseMode===MouseMode.DRAWING){this.drawPixelInInteractionLayer(pixelIndex.rowIndex,pixelIndex.columnIndex,this.interactionLayer.getBrushPattern());var missingIndices=getInBetweenPixelIndicesfromCoords(this.previousMouseMoveWorldPos,this.mouseMoveWorldPos,this.gridSquareLength,this.dataLayer.getData());null!=missingIndices&&missingIndices.length&&missingIndices.forEach((function(point){_this2.drawPixelInInteractionLayer(point.rowIndex,point.columnIndex,_this2.interactionLayer.getBrushPattern())})),this.renderInteractionLayer(),this.brushTool===types.G.ERASER&&this.renderErasedPixelsFromInteractionLayerInDataLayer()}else hoveredPixel&&hoveredPixel.rowIndex===pixelIndex.rowIndex&&hoveredPixel.columnIndex===pixelIndex.columnIndex||this.emitHoverPixelChangeEvent({indices:pixelIndex}),this.interactionLayer.setHoveredPixel({rowIndex:pixelIndex.rowIndex,columnIndex:pixelIndex.columnIndex,color:this.brushTool!==types.G.ERASER?this.brushColor:"white"}),this.renderInteractionLayer();else null!==hoveredPixel&&(this.emitHoverPixelChangeEvent({indices:null}),this.interactionLayer.setHoveredPixel(null),this.renderInteractionLayer());var buttonDirection=this.detectButtonClicked(mouseCartCoord);if(buttonDirection)return this.gridLayer.setHoveredButton(buttonDirection),void this.renderGridLayer();this.mouseMode!==MouseMode.EXTENDING&&(this.gridLayer.setHoveredButton(null),this.renderGridLayer())}this.previousMouseMoveWorldPos=this.mouseMoveWorldPos}},{key:"getSelectedArea",value:function getSelectedArea(){return this.interactionLayer.getSelectedArea()}},{key:"onKeyDown",value:function onKeyDown(e){if("KeyZ"===e.code&&(e.ctrlKey||e.metaKey))this.undo();else if("KeyY"===e.code&&(e.ctrlKey||e.metaKey))this.redo();else if("Backspace"===e.code||"Delete"===e.code){if(this.interactionLayer.getSelectedArea()){if(0===this.interactionLayer.getSelectedAreaPixels().length)return;var previousSelectedAreaPixels=this.interactionLayer.getSelectedAreaPixels();if(!previousSelectedAreaPixels||0===previousSelectedAreaPixels.length)return;var dataForAction=this.dataLayer.erasePixels(this.interactionLayer.getSelectedAreaPixels()).dataForAction;this.recordAction(new SelectAreaMoveAction([].concat((0,toConsumableArray.Z)(dataForAction.map((function(pixel){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},pixel),{},{color:""})}))),(0,toConsumableArray.Z)(dataForAction)),this.interactionLayer.getSelectedArea(),this.interactionLayer.getSelectedArea())),this.dataLayer.render()}}else if("Escape"===e.code)this.interactionLayer.setExtendingSelectedArea(null),this.interactionLayer.setExtendingSelectedPixels([]),this.interactionLayer.setMovingSelectedArea(null),this.interactionLayer.setMovingSelectedPixels([]),this.interactionLayer.setSelectingArea(null),this.interactionLayer.setSelectedArea(null),this.interactionLayer.setSelectedAreaPixels([]),this.gridLayer.render();else if("AltLeft"===e.code){var pixelsThatAreCurrentlyExtending=this.interactionLayer.getExtendingSelectedPixels(),currentExtendingArea=this.interactionLayer.getExtendingSelectedArea();pixelsThatAreCurrentlyExtending&&currentExtendingArea&&(this.interactionLayer.setCapturedBaseExtendingSelectedArea(currentExtendingArea),this.interactionLayer.setCapturedBaseExtendingSelectedAreaPixels(pixelsThatAreCurrentlyExtending)),this.isAltPressed=!0}}},{key:"onKeyUp",value:function onKeyUp(e){if("AltLeft"===e.code){var pixelsThatAreCurrentlyExtending=this.interactionLayer.getExtendingSelectedPixels(),currentExtendingArea=this.interactionLayer.getExtendingSelectedArea();pixelsThatAreCurrentlyExtending&&currentExtendingArea&&(this.interactionLayer.setCapturedBaseExtendingSelectedArea(currentExtendingArea),this.interactionLayer.setCapturedBaseExtendingSelectedAreaPixels(pixelsThatAreCurrentlyExtending)),this.isAltPressed=!1}}},{key:"relaySelectingAreaToSelectedArea",value:function relaySelectingAreaToSelectedArea(){var selectingArea=this.interactionLayer.getSelectingArea();if(selectingArea){var data=this.dataLayer.getData(),rowCount=this.dataLayer.getRowCount(),columnCount=this.dataLayer.getColumnCount(),rowKeys=getRowKeysFromData(data),columnKeys=getColumnKeysFromData(data),sortedRowKeys=rowKeys.sort((function(a,b){return a-b})),sortedColumnKeys=columnKeys.sort((function(a,b){return a-b})),region=convertWorldPosAreaToPixelGridArea(selectingArea,rowCount,columnCount,this.gridSquareLength,sortedRowKeys,sortedColumnKeys);if(region){this.interactionLayer.setSelectedArea({startWorldPos:region.startWorldPos,endWorldPos:region.endWorldPos,startPixelIndex:region.includedPixelsIndices[0],endPixelIndex:region.includedPixelsIndices[region.includedPixelsIndices.length-1]});var _step2,pixelData=this.dataLayer.getData(),regionPixelItems=[],_iterator2=(0,createForOfIteratorHelper.Z)(region.includedPixelsIndices);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _pixelData$get$get,index=_step2.value,rowIndex=index.rowIndex,columnIndex=index.columnIndex,color=null===(_pixelData$get$get=pixelData.get(rowIndex).get(columnIndex))||void 0===_pixelData$get$get?void 0:_pixelData$get$get.color;color&&regionPixelItems.push({rowIndex,columnIndex,previousColor:color,color:""})}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}this.interactionLayer.setSelectedAreaPixels(regionPixelItems),this.gridLayer.renderSelection({startWorldPos:region.startWorldPos,endWorldPos:region.endWorldPos})}}this.interactionLayer.setSelectingArea(null)}},{key:"relayExtendingSelectedAreaToSelectedArea",value:function relayExtendingSelectedAreaToSelectedArea(){var previousSelectedArea=this.interactionLayer.getSelectedArea(),previousSelectedAreaPixels=this.interactionLayer.getSelectedAreaPixels(),finalSelectedArea=this.interactionLayer.getExtendingSelectedArea(),finalSelectedAreaPixels=this.interactionLayer.getExtendingSelectedPixels();if(previousSelectedArea&&previousSelectedAreaPixels&&finalSelectedArea&&finalSelectedAreaPixels){var data=this.dataLayer.getData(),_getGridIndicesFromDa2=getGridIndicesFromData(data),topRowIndex=_getGridIndicesFromDa2.topRowIndex,bottomRowIndex=_getGridIndicesFromDa2.bottomRowIndex,leftColumnIndex=_getGridIndicesFromDa2.leftColumnIndex,rightColumnIndex=_getGridIndicesFromDa2.rightColumnIndex,filteredFinalSelectedAreaPixels=finalSelectedAreaPixels.filter((function(item){return item.rowIndex<=bottomRowIndex&&item.columnIndex<=rightColumnIndex&&item.rowIndex>=topRowIndex&&item.columnIndex>=leftColumnIndex})).map((function(item){var _data$get$get3,previousColor=null===(_data$get$get3=data.get(item.rowIndex).get(item.columnIndex))||void 0===_data$get$get3?void 0:_data$get$get3.color;return(0,objectSpread2.Z)((0,objectSpread2.Z)({},item),{},{color:item.previousColor,previousColor})})),newSelectedAreaColorChangeItems=this.dataLayer.colorPixels(filteredFinalSelectedAreaPixels).dataForAction,previousSelectedAreaColorChangeItems=previousSelectedAreaPixels;this.recordAction(new SelectAreaMoveAction([].concat((0,toConsumableArray.Z)(newSelectedAreaColorChangeItems),(0,toConsumableArray.Z)(previousSelectedAreaColorChangeItems)),previousSelectedArea,finalSelectedArea));var _step3,effectiveColorChangeItemsMap=new Map,_iterator3=(0,createForOfIteratorHelper.Z)(previousSelectedAreaColorChangeItems);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var item=_step3.value;effectiveColorChangeItemsMap.set(generatePixelId(item.rowIndex,item.columnIndex),item)}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}var _step4,_iterator4=(0,createForOfIteratorHelper.Z)(newSelectedAreaColorChangeItems);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _item=_step4.value;effectiveColorChangeItemsMap.set(generatePixelId(_item.rowIndex,_item.columnIndex),_item)}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}var effectiveColorChangeItems=Array.from(effectiveColorChangeItemsMap.values()),newData=this.dataLayer.getCopiedData();effectiveColorChangeItems.length>0&&(this.emitStrokeEndEvent({strokedPixels:effectiveColorChangeItems,data:newData,strokeTool:types.G.SELECT}),this.emitDataChangeEvent({data:newData})),this.interactionLayer.setSelectedArea(finalSelectedArea),this.interactionLayer.setSelectedAreaPixels(filteredFinalSelectedAreaPixels),this.interactionLayer.setExtendingSelectedArea(null),this.interactionLayer.setExtendingSelectedPixels(null),this.interactionLayer.setDirectionToExtendSelectedArea(null),this.gridLayer.render(),this.gridLayer.renderSelection(finalSelectedArea),this.interactionLayer.setSelectedAreaPixels(filteredFinalSelectedAreaPixels)}}},{key:"relayMovingSelectedAreaToSelectedArea",value:function relayMovingSelectedAreaToSelectedArea(){var previousSelectedArea=this.interactionLayer.getSelectedArea(),previousSelectedAreaPixels=this.interactionLayer.getSelectedAreaPixels(),finalSelectedArea=this.interactionLayer.getMovingSelectedArea(),finalSelectedAreaPixels=this.interactionLayer.getMovingSelectedPixels();if(previousSelectedArea&&previousSelectedAreaPixels&&finalSelectedArea&&finalSelectedAreaPixels){var data=this.dataLayer.getData(),_getGridIndicesFromDa3=getGridIndicesFromData(data),topRowIndex=_getGridIndicesFromDa3.topRowIndex,bottomRowIndex=_getGridIndicesFromDa3.bottomRowIndex,leftColumnIndex=_getGridIndicesFromDa3.leftColumnIndex,rightColumnIndex=_getGridIndicesFromDa3.rightColumnIndex,filteredFinalSelectedAreaPixels=finalSelectedAreaPixels.filter((function(item){return item.rowIndex<=bottomRowIndex&&item.columnIndex<=rightColumnIndex&&item.rowIndex>=topRowIndex&&item.columnIndex>=leftColumnIndex})).map((function(filteredItem){var _data$get$get4;return(0,objectSpread2.Z)((0,objectSpread2.Z)({},filteredItem),{},{color:filteredItem.previousColor,previousColor:(null===(_data$get$get4=data.get(filteredItem.rowIndex).get(filteredItem.columnIndex))||void 0===_data$get$get4?void 0:_data$get$get4.color)||""})})),newSelectedAreaColorChangeItems=this.dataLayer.colorPixels(filteredFinalSelectedAreaPixels).dataForAction,previousSelectedAreaColorChangeItems=previousSelectedAreaPixels;this.recordAction(new SelectAreaMoveAction([].concat((0,toConsumableArray.Z)(newSelectedAreaColorChangeItems),(0,toConsumableArray.Z)(previousSelectedAreaColorChangeItems)),previousSelectedArea,finalSelectedArea));var _step5,effectiveColorChangeItemsMap=new Map,_iterator5=(0,createForOfIteratorHelper.Z)(previousSelectedAreaColorChangeItems);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var item=_step5.value;effectiveColorChangeItemsMap.set(generatePixelId(item.rowIndex,item.columnIndex),item)}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}var _step6,_iterator6=(0,createForOfIteratorHelper.Z)(newSelectedAreaColorChangeItems);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _item2=_step6.value;effectiveColorChangeItemsMap.set(generatePixelId(_item2.rowIndex,_item2.columnIndex),_item2)}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}var effectiveColorChangeItems=Array.from(effectiveColorChangeItemsMap.values()),newData=this.dataLayer.getCopiedData();effectiveColorChangeItems.length>0&&(this.emitStrokeEndEvent({strokedPixels:effectiveColorChangeItems,data:newData,strokeTool:types.G.SELECT}),this.emitDataChangeEvent({data:newData}));var movingSelectedArea=this.interactionLayer.getMovingSelectedArea();if(movingSelectedArea){this.interactionLayer.setSelectedArea(movingSelectedArea);var movingSelectedPixels=this.interactionLayer.getMovingSelectedPixels();this.interactionLayer.setSelectedAreaPixels(movingSelectedPixels)}this.interactionLayer.setMovingSelectedArea(null),this.interactionLayer.setMovingSelectedPixels(null),this.gridLayer.render(),this.gridLayer.renderSelection(movingSelectedArea)}}},{key:"onMouseUp",value:function onMouseUp(evt){(evt.preventDefault(),this.mouseMode=MouseMode.PANNING,this.brushTool===types.G.SELECT)&&(this.relaySelectingAreaToSelectedArea(),this.relayMovingSelectedAreaToSelectedArea(),this.relayExtendingSelectedAreaToSelectedArea(),function getDoesAreaOverlapPixelgrid(area,rowCount,columnCount,gridSquareLength){if(!area)return!1;var _getAreaTopLeftAndBot2=getAreaTopLeftAndBottomRight(area),areaTopLeftPos=_getAreaTopLeftAndBot2.areaTopLeftPos,areaBottomRightPos=_getAreaTopLeftAndBot2.areaBottomRightPos,pixelGridLeftTopPoint_x=-columnCount/2*gridSquareLength,pixelGridLeftTopPoint_y=-rowCount/2*gridSquareLength,pixelGridRightBottomPoint_x=columnCount/2*gridSquareLength,pixelGridRightBottomPoint_y=rowCount/2*gridSquareLength;return areaTopLeftPos.x<=pixelGridRightBottomPoint_x||areaTopLeftPos.y<=pixelGridRightBottomPoint_y||areaBottomRightPos.x>=pixelGridLeftTopPoint_x||areaBottomRightPos.y>=pixelGridLeftTopPoint_y}(this.interactionLayer.getSelectedArea(),this.dataLayer.getRowCount(),this.dataLayer.getColumnCount(),this.gridSquareLength)||(this.interactionLayer.setMovingSelectedArea(null),this.interactionLayer.setMovingSelectedPixels(null),this.interactionLayer.setSelectedArea(null),this.interactionLayer.setSelectedAreaPixels(null),this.gridLayer.render()));this.relayInteractionDataToDataLayer(),touchy(this.element,removeEvent,"mousemove",this.handlePanning),touchy(this.element,removeEvent,"mousemove",this.handlePinchZoom),touchy(this.element,removeEvent,"mousemove",this.handleExtension),this.pinchZoomDiff=void 0,this.gridLayer.setHoveredButton(null),this.mouseDownWorldPos=null,this.mouseDownPanZoom=null,this.extensionPoint.offsetXAmount=0,this.extensionPoint.offsetYAmount=0,this.previousMouseMoveWorldPos=null}},{key:"onMouseOut",value:function onMouseOut(evt){evt.preventDefault(),this.relayInteractionDataToDataLayer(),this.interactionLayer.setSelectingArea(null),touchy(this.element,removeEvent,"mousemove",this.handlePanning),touchy(this.element,removeEvent,"mousemove",this.handlePinchZoom),touchy(this.element,removeEvent,"mousemove",this.handleExtension),null!==this.gridLayer.getHoveredButton()&&this.emitHoverPixelChangeEvent({indices:null}),this.gridLayer.setHoveredButton(null)}},{key:"removePanListeners",value:function removePanListeners(){touchy(this.element,removeEvent,"mousemove",this.handlePanning),touchy(this.element,removeEvent,"mousemove",this.handlePinchZoom)}},{key:"renderGridLayer",value:function renderGridLayer(){this.gridLayer.render()}},{key:"clear",value:function clear(){var rowKeys=getRowKeysFromData(this.dataLayer.getData()),columnKeys=getColumnKeysFromData(this.dataLayer.getData());this.dataLayer.setData(new Map);var _step7,data=this.dataLayer.getData(),_iterator7=(0,createForOfIteratorHelper.Z)(rowKeys);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var i=_step7.value;data.set(i,new Map);var _step8,_iterator8=(0,createForOfIteratorHelper.Z)(columnKeys);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var j=_step8.value;data.get(i).set(j,{color:""})}}catch(err){_iterator8.e(err)}finally{_iterator8.f()}}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}this.renderDataLayer()}},{key:"downloadImage",value:function downloadImage(props){var data=this.dataLayer.getData(),imageCanvas=document.createElement("canvas"),columnCount=this.getColumnCount(),rowCount=this.getRowCount();imageCanvas.width=columnCount*this.gridSquareLength,imageCanvas.height=rowCount*this.gridSquareLength;var _step9,imageContext=imageCanvas.getContext("2d"),allRowKeys=getRowKeysFromData(data),allColumnKeys=getColumnKeysFromData(data),rowKeyOrderMap=createRowKeyOrderMapfromData(data),columnKeyOrderMap=createColumnKeyOrderMapfromData(data),_iterator9=(0,createForOfIteratorHelper.Z)(allRowKeys);try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _step10,i=_step9.value,_iterator10=(0,createForOfIteratorHelper.Z)(allColumnKeys);try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _j2=_step10.value,rowIndex=i,columnIndex=_j2,relativeRowIndex=rowKeyOrderMap.get(rowIndex),relativeColumnIndex=columnKeyOrderMap.get(columnIndex),pixel=data.get(rowIndex).get(columnIndex);if(pixel&&pixel.color){var pixelCoord={x:relativeColumnIndex*this.gridSquareLength,y:relativeRowIndex*this.gridSquareLength};imageContext.save(),imageContext.fillStyle=pixel.color,imageContext.fillRect(pixelCoord.x,pixelCoord.y,this.gridSquareLength,this.gridSquareLength),imageContext.restore()}}}catch(err){_iterator10.e(err)}finally{_iterator10.f()}if(imageContext.save(),imageContext.strokeStyle="#000000",imageContext.lineWidth=1,props&&props.isGridVisible){for(var _i5=0;_i5<=this.getColumnCount();_i5++)imageContext.beginPath(),imageContext.moveTo(_i5*this.gridSquareLength,0),imageContext.lineTo(_i5*this.gridSquareLength,rowCount*this.gridSquareLength),imageContext.stroke(),imageContext.closePath();for(var j=0;j<=this.getRowCount();j++)imageContext.beginPath(),imageContext.moveTo(0,j*this.gridSquareLength),imageContext.lineTo(columnCount*this.gridSquareLength,j*this.gridSquareLength),imageContext.stroke(),imageContext.closePath()}imageContext.restore()}}catch(err){_iterator9.e(err)}finally{_iterator9.f()}var anchor=document.createElement("a");anchor.href=imageCanvas.toDataURL("image/png"),anchor.download="dotting.png",anchor.click()}},{key:"renderAll",value:function renderAll(){this.renderBackgroundLayer();var capturedData=this.interactionLayer.getCapturedData();if(capturedData){var rowCount=getRowCountFromData(capturedData),columnCount=getColumnCountFromData(capturedData);this.gridLayer.setRowCount(rowCount),this.gridLayer.setColumnCount(columnCount)}else this.renderDataLayer(),this.renderErasedPixelsFromInteractionLayerInDataLayer();this.renderInteractionLayer(),this.renderGridLayer();var selectedArea=this.interactionLayer.getSelectedArea();selectedArea&&this.gridLayer.renderSelection(selectedArea)}},{key:"renderErasedPixelsFromInteractionLayerInDataLayer",value:function renderErasedPixelsFromInteractionLayerInDataLayer(){var erasedPixelsInInteractionLayer=this.interactionLayer.getAllErasedPixels();if(erasedPixelsInInteractionLayer.length>0){var _step11,ctx=this.dataLayer.getContext(),squareLength=this.gridSquareLength*this.panZoom.scale,correctedLeftTopScreenPoint=getScreenPoint(convertCartesianToScreen(this.element,{x:0,y:0},this.dpr),this.panZoom),_iterator11=(0,createForOfIteratorHelper.Z)(erasedPixelsInInteractionLayer);try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var _this$dataLayer$getDa,_this$dataLayer$getDa2,pixel=_step11.value,rowIndex=pixel.rowIndex,columnIndex=pixel.columnIndex,relativeRowIndex=this.dataLayer.getRowKeyOrderMap().get(rowIndex),relativeColumnIndex=this.dataLayer.getColumnKeyOrderMap().get(columnIndex);if(void 0!==relativeColumnIndex&&void 0!==relativeRowIndex)(null===(_this$dataLayer$getDa=this.dataLayer.getData().get(rowIndex))||void 0===_this$dataLayer$getDa||null===(_this$dataLayer$getDa2=_this$dataLayer$getDa.get(columnIndex))||void 0===_this$dataLayer$getDa2?void 0:_this$dataLayer$getDa2.color)&&ctx.clearRect(relativeColumnIndex*squareLength+correctedLeftTopScreenPoint.x,relativeRowIndex*squareLength+correctedLeftTopScreenPoint.y,squareLength,squareLength)}}catch(err){_iterator11.e(err)}finally{_iterator11.f()}}}},{key:"renderDataLayer",value:function renderDataLayer(){this.dataLayer.render()}},{key:"renderInteractionLayer",value:function renderInteractionLayer(){this.interactionLayer.render()}},{key:"renderBackgroundLayer",value:function renderBackgroundLayer(){this.backgroundLayer.render()}},{key:"destroy",value:function destroy(){touchy(this.element,removeEvent,"mouseup",this.onMouseUp),touchy(this.element,removeEvent,"mouseout",this.onMouseOut),touchy(this.element,removeEvent,"mousedown",this.onMouseDown),touchy(this.element,removeEvent,"mousemove",this.onMouseMove),touchy(this.element,removeEvent,"mousemove",this.handlePanning),touchy(this.element,removeEvent,"mousemove",this.handlePinchZoom),this.element.removeEventListener("wheel",this.handleWheel)}}]),Editor}(EventDispatcher),Dotting=(0,react.forwardRef)((function Dotting(props,ref){var containerRef=(0,react.useRef)(null),_useState=(0,react.useState)(null),_useState2=(0,slicedToArray.Z)(_useState,2),gridCanvas=_useState2[0],setGridCanvas=_useState2[1],_useState3=(0,react.useState)(null),_useState4=(0,slicedToArray.Z)(_useState3,2),dataCanvas=_useState4[0],setDataCanvas=_useState4[1],_useState5=(0,react.useState)(null),_useState6=(0,slicedToArray.Z)(_useState5,2),interactionCanvas=_useState6[0],setInteractionCanvas=_useState6[1],_useState7=(0,react.useState)(null),_useState8=(0,slicedToArray.Z)(_useState7,2),backgroundCanvas=_useState8[0],setBackgroundCanvas=_useState8[1],_useState9=(0,react.useState)(null),_useState10=(0,slicedToArray.Z)(_useState9,2),editor=_useState10[0],setEditor=_useState10[1],_useState11=(0,react.useState)([]),_useState12=(0,slicedToArray.Z)(_useState11,2),dataChangeListeners=_useState12[0],setDataChangeListeners=_useState12[1],_useState13=(0,react.useState)([]),_useState14=(0,slicedToArray.Z)(_useState13,2),gridChangeListeners=_useState14[0],setGridChangeListeners=_useState14[1],_useState15=(0,react.useState)([]),_useState16=(0,slicedToArray.Z)(_useState15,2),strokeEndListeners=_useState16[0],setStrokeEndListeners=_useState16[1],_useState17=(0,react.useState)([]),_useState18=(0,slicedToArray.Z)(_useState17,2),brushChangeListeners=_useState18[0],setBrushChangeListeners=_useState18[1],_useState19=(0,react.useState)([]),_useState20=(0,slicedToArray.Z)(_useState19,2),hoverPixelChangeListeners=_useState20[0],setHoverPixelChangeListeners=_useState20[1],_useState21=(0,react.useState)([]),_useState22=(0,slicedToArray.Z)(_useState21,2),canvasElementEventListeners=_useState22[0],setCanvasElementEventListeners=_useState22[1];(0,react.useEffect)((function(){editor&&editor.setIsGridFixed(props.isGridFixed)}),[editor,props.isGridFixed]),(0,react.useEffect)((function(){editor&&editor.setGridStrokeColor(props.gridStrokeColor)}),[editor,props.gridStrokeColor]),(0,react.useEffect)((function(){editor&&editor.setGridStrokeWidth(props.gridStrokeWidth)}),[editor,props.gridStrokeWidth]),(0,react.useEffect)((function(){editor&&editor.setIsGridVisible(props.isGridVisible)}),[editor,props.isGridVisible]),(0,react.useEffect)((function(){editor&&editor.setIsPanZoomable(props.isPanZoomable)}),[editor,props.isPanZoomable]),(0,react.useEffect)((function(){if(editor)return gridChangeListeners.forEach((function(listener){editor.addEventListener(types.v.GRID_CHANGE,listener)})),editor.emitCurrentGridStatus(),function(){gridChangeListeners.forEach((function(listener){null==editor||editor.removeEventListener(types.v.GRID_CHANGE,listener)}))}}),[editor,gridChangeListeners]),(0,react.useEffect)((function(){if(editor)return dataChangeListeners.forEach((function(listener){editor.addEventListener(types.v.DATA_CHANGE,listener)})),editor.emitCurrentData(),function(){dataChangeListeners.forEach((function(listener){null==editor||editor.removeEventListener(types.v.DATA_CHANGE,listener)}))}}),[editor,dataChangeListeners]),(0,react.useEffect)((function(){if(editor)return brushChangeListeners.forEach((function(listener){editor.addEventListener(types.v.BRUSH_CHANGE,listener)})),editor.emitCurrentBrushTool(),function(){brushChangeListeners.forEach((function(listener){null==editor||editor.removeEventListener(types.v.BRUSH_CHANGE,listener)}))}}),[editor,brushChangeListeners]),(0,react.useEffect)((function(){if(editor)return strokeEndListeners.forEach((function(listener){editor.addEventListener(types.v.STROKE_END,listener)})),function(){strokeEndListeners.forEach((function(listener){null==editor||editor.removeEventListener(types.v.STROKE_END,listener)}))}}),[editor,strokeEndListeners]),(0,react.useEffect)((function(){if(editor)return hoverPixelChangeListeners.forEach((function(listener){editor.addEventListener(types.v.HOVER_PIXEL_CHANGE,listener)})),editor.emitCurrentHoverPixelStatus(),function(){hoverPixelChangeListeners.forEach((function(listener){null==editor||editor.removeEventListener(types.v.HOVER_PIXEL_CHANGE,listener)}))}}),[editor,hoverPixelChangeListeners]),(0,react.useEffect)((function(){if(editor)return canvasElementEventListeners.forEach((function(_ref){var type=_ref.type,listener=_ref.listener;editor.getCanvasElement().addEventListener(type,listener)})),function(){canvasElementEventListeners.forEach((function(_ref2){var type=_ref2.type,listener=_ref2.listener;editor.getCanvasElement().removeEventListener(type,listener)}))}}),[editor,canvasElementEventListeners]),(0,react.useEffect)((function(){var onResize=function onResize(){if(containerRef.current&&editor){var dpr=window.devicePixelRatio,rect=containerRef.current.getBoundingClientRect();editor.setSize(rect.width,rect.height,dpr),editor.scale(dpr,dpr),editor.renderAll()}};return onResize(),window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[editor,containerRef,props.height,props.width]),(0,react.useEffect)((function(){editor&&props.indicatorData&&editor.setIndicatorPixels(props.indicatorData)}),[editor,props.indicatorData]),(0,react.useEffect)((function(){editor&&(props.brushColor&&editor.setBrushColor(props.brushColor),props.brushTool&&editor.setBrushTool(props.brushTool))}),[editor,props.brushColor,props.brushTool]),(0,react.useEffect)((function(){editor&&(props.backgroundAlpha&&editor.setBackgroundAlpha(props.backgroundAlpha),props.backgroundColor&&editor.setBackgroundColor(props.backgroundColor),props.backgroundMode&&editor.setBackgroundMode(props.backgroundMode))}),[editor,props.backgroundMode,props.backgroundAlpha,props.backgroundColor]),(0,react.useEffect)((function(){if(gridCanvas&&interactionCanvas&&dataCanvas&&backgroundCanvas){var editor=new Editor({gridCanvas,interactionCanvas,dataCanvas,backgroundCanvas,initData:props.initData});return editor.setIsGridFixed(props.isGridFixed),editor.setBackgroundAlpha(props.backgroundAlpha),editor.setBackgroundMode(props.backgroundMode),editor.setIsPanZoomable(props.isPanZoomable),editor.setIsGridVisible(props.isGridVisible),editor.setGridStrokeColor(props.gridStrokeColor),editor.setGridStrokeWidth(props.gridStrokeWidth),setEditor(editor),function(){editor.destroy()}}}),[gridCanvas,interactionCanvas,dataCanvas,backgroundCanvas]);var gotGridCanvasRef=(0,react.useCallback)((function(element){element&&(element.style.touchAction="none",setGridCanvas(element))}),[]),gotInteractionCanvasRef=(0,react.useCallback)((function(element){element&&(element.style.touchAction="none",setInteractionCanvas(element))}),[]),gotDataCanvasRef=(0,react.useCallback)((function(element){element&&(element.style.touchAction="none",setDataCanvas(element))}),[]),gotBackgroundCanvasRef=(0,react.useCallback)((function(element){element&&(element.style.touchAction="none",setBackgroundCanvas(element))}),[]),addDataChangeListener=(0,react.useCallback)((function(listener){setDataChangeListeners((function(listeners){return[].concat((0,toConsumableArray.Z)(listeners),[listener])}))}),[]),removeDataChangeListener=(0,react.useCallback)((function(listener){editor.removeEventListener(types.v.DATA_CHANGE,listener),setDataChangeListeners((function(listeners){return listeners.filter((function(l){return l!==listener}))}))}),[editor]),addGridChangeListener=(0,react.useCallback)((function(listener){setGridChangeListeners((function(listeners){return[].concat((0,toConsumableArray.Z)(listeners),[listener])}))}),[]),removeGridChangeListener=(0,react.useCallback)((function(listener){editor.removeEventListener(types.v.GRID_CHANGE,listener),setGridChangeListeners((function(listeners){return listeners.filter((function(l){return l!==listener}))}))}),[editor]),addBrushChangeListener=(0,react.useCallback)((function(listener){setBrushChangeListeners((function(listeners){return[].concat((0,toConsumableArray.Z)(listeners),[listener])}))}),[]),removeBrushChangeListener=(0,react.useCallback)((function(listener){editor.removeEventListener(types.v.BRUSH_CHANGE,listener),setBrushChangeListeners((function(listeners){return listeners.filter((function(l){return l!==listener}))}))}),[editor]),addStrokeEndListener=(0,react.useCallback)((function(listener){setStrokeEndListeners((function(listeners){return[].concat((0,toConsumableArray.Z)(listeners),[listener])}))}),[]),removeStrokeEndListener=(0,react.useCallback)((function(listener){editor.removeEventListener(types.v.STROKE_END,listener),setStrokeEndListeners((function(listeners){return listeners.filter((function(l){return l!==listener}))}))}),[editor]),addHoverPixelChangeListener=(0,react.useCallback)((function(listener){setHoverPixelChangeListeners((function(listeners){return[].concat((0,toConsumableArray.Z)(listeners),[listener])}))}),[]),removeHoverPixelChangeListener=(0,react.useCallback)((function(listener){editor.removeEventListener(types.v.HOVER_PIXEL_CHANGE,listener),setHoverPixelChangeListeners((function(listeners){return listeners.filter((function(l){return l!==listener}))}))}),[editor]),addCanvasElementEventListener=(0,react.useCallback)((function(type,listener){setCanvasElementEventListeners((function(listeners){return[].concat((0,toConsumableArray.Z)(listeners),[{type,listener}])}))}),[editor]),removeCanvasElementEventListener=(0,react.useCallback)((function(type,listener){editor&&(editor.getCanvasElement().removeEventListener(type,listener),setCanvasElementEventListeners((function(listeners){return listeners.filter((function(l){return l.type!==type&&l.listener!==listener}))})))}),[editor]),clear=(0,react.useCallback)((function(){return null==editor?void 0:editor.clear()}),[editor]),colorPixels=(0,react.useCallback)((function(changes){null==editor||editor.colorPixels(changes)}),[editor]),erasePixels=(0,react.useCallback)((function(changes){null==editor||editor.erasePixels(changes)}),[editor]),setIndicatorPixels=(0,react.useCallback)((function(indicators){null==editor||editor.setIndicatorPixels(indicators)}),[editor]),downloadImage=(0,react.useCallback)((function(options){null==editor||editor.downloadImage(options)}),[editor]),changeBrushColor=(0,react.useCallback)((function(color){null==editor||editor.changeBrushColor(color)}),[editor]),changeBrushPattern=(0,react.useCallback)((function(pattern){null==editor||editor.setBrushPattern(pattern)}),[editor]),changeBrushTool=(0,react.useCallback)((function(brushTool){null==editor||editor.setBrushTool(brushTool)}),[editor]),undo=(0,react.useCallback)((function(){null==editor||editor.undo()}),[editor]),redo=(0,react.useCallback)((function(){null==editor||editor.redo()}),[editor]),setData=(0,react.useCallback)((function(data){null==editor||editor.setData(data)}),[editor]);return(0,react.useImperativeHandle)(ref,(function(){return{clear,colorPixels,erasePixels,downloadImage,setIndicatorPixels,undo,redo,setData,changeBrushColor,changeBrushTool,changeBrushPattern,addDataChangeListener,removeDataChangeListener,addGridChangeListener,removeGridChangeListener,addBrushChangeListener,removeBrushChangeListener,addStrokeEndListener,removeStrokeEndListener,addHoverPixelChangeListener,removeHoverPixelChangeListener,addCanvasElementEventListener,removeCanvasElementEventListener}}),[clear,colorPixels,erasePixels,downloadImage,setIndicatorPixels,undo,redo,setData,changeBrushColor,changeBrushTool,changeBrushPattern,addDataChangeListener,removeDataChangeListener,addGridChangeListener,removeGridChangeListener,addBrushChangeListener,removeBrushChangeListener,addStrokeEndListener,removeStrokeEndListener,addHoverPixelChangeListener,removeHoverPixelChangeListener,addCanvasElementEventListener,removeCanvasElementEventListener]),react.createElement("div",{style:{width:props.width,height:props.height,position:"relative",outline:"none"},ref:containerRef,tabIndex:1,onMouseDown:function onMouseDown(){var _containerRef$current;null===(_containerRef$current=containerRef.current)||void 0===_containerRef$current||_containerRef$current.focus()},onKeyDown:function onKeyDown(e){null==editor||editor.onKeyDown(e)},onKeyUp:function onKeyUp(e){null==editor||editor.onKeyUp(e)}},react.createElement("canvas",{ref:gotBackgroundCanvasRef,style:(0,objectSpread2.Z)({position:"absolute",border:"1px solid #555555"},props.style)}),react.createElement("canvas",{ref:gotDataCanvasRef,style:(0,objectSpread2.Z)({position:"absolute",pointerEvents:"none",border:"1px solid #555555"},props.style)}),react.createElement("canvas",{ref:gotInteractionCanvasRef,style:(0,objectSpread2.Z)({position:"absolute",border:"1px solid #555555"},props.style)}),react.createElement("canvas",{ref:gotGridCanvasRef,style:(0,objectSpread2.Z)({position:"absolute",pointerEvents:"none",border:"1px solid #555555"},props.style)}))}));const components_Dotting=Dotting;try{Dotting.displayName="Dotting",Dotting.__docgenInfo={description:"",displayName:"Dotting",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"string | number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"string | number"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"React.CSSProperties"}},gridStrokeColor:{defaultValue:null,description:"",name:"gridStrokeColor",required:!1,type:{name:"string"}},gridStrokeWidth:{defaultValue:null,description:"",name:"gridStrokeWidth",required:!1,type:{name:"number"}},isGridVisible:{defaultValue:null,description:"",name:"isGridVisible",required:!1,type:{name:"boolean"}},backgroundMode:{defaultValue:null,description:"",name:"backgroundMode",required:!1,type:{name:'"checkerboard" | "color"'}},backgroundColor:{defaultValue:null,description:"",name:"backgroundColor",required:!1,type:{name:"string"}},backgroundAlpha:{defaultValue:null,description:"",name:"backgroundAlpha",required:!1,type:{name:"number"}},initData:{defaultValue:null,description:"",name:"initData",required:!1,type:{name:"PixelData[][]"}},isPanZoomable:{defaultValue:null,description:"",name:"isPanZoomable",required:!1,type:{name:"boolean"}},isGridFixed:{defaultValue:null,description:"",name:"isGridFixed",required:!1,type:{name:"boolean"}},brushTool:{defaultValue:null,description:"",name:"brushTool",required:!1,type:{name:"BrushTool"}},brushColor:{defaultValue:null,description:"",name:"brushColor",required:!1,type:{name:"string"}},indicatorData:{defaultValue:null,description:"",name:"indicatorData",required:!1,type:{name:"PixelModifyItem[]"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<DottingRef>"}},key:{defaultValue:null,description:"",name:"key",required:!1,type:{name:"Key"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Dotting.tsx#Dotting"]={docgenInfo:Dotting.__docgenInfo,name:"Dotting",path:"src/components/Dotting.tsx#Dotting"})}catch(__react_docgen_typescript_loader_error){}},"./src/hooks/useBrush.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _home_runner_work_dotting_dotting_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_useHandlers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/hooks/useHandlers.ts"),_components_Canvas_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/Canvas/types.ts");const __WEBPACK_DEFAULT_EXPORT__=function useBrush(ref){var _useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(_components_Canvas_types__WEBPACK_IMPORTED_MODULE_2__.G.DOT),_useState2=(0,_home_runner_work_dotting_dotting_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_3__.Z)(_useState,2),brushTool=_useState2[0],setBrushTool=_useState2[1],_useState3=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),_useState4=(0,_home_runner_work_dotting_dotting_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_3__.Z)(_useState3,2),brushColor=_useState4[0],setBrushColor=_useState4[1],_useState5=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([[1]]),_useState6=(0,_home_runner_work_dotting_dotting_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_3__.Z)(_useState5,2),brushPattern=_useState6[0],setBrushPattern=_useState6[1],_useHandlers=(0,_useHandlers__WEBPACK_IMPORTED_MODULE_1__.Z)(ref),addBrushChangeListener=_useHandlers.addBrushChangeListener,removeBrushChangeListener=_useHandlers.removeBrushChangeListener;(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var listener=function listener(_ref){var brushColor=_ref.brushColor,brushTool=_ref.brushTool,brushPattern=_ref.brushPattern;setBrushTool(brushTool),setBrushColor(brushColor),setBrushPattern(brushPattern)};return addBrushChangeListener(listener),function(){removeBrushChangeListener(listener)}}),[addBrushChangeListener,removeBrushChangeListener]);var changeBrushColor=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(brushColor){var _ref$current;null===(_ref$current=ref.current)||void 0===_ref$current||_ref$current.changeBrushColor(brushColor)}),[ref]),changeBrushPattern=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(brushPattern){var _ref$current2;null===(_ref$current2=ref.current)||void 0===_ref$current2||_ref$current2.changeBrushPattern(brushPattern)}),[ref]);return{changeBrushColor,changeBrushTool:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(brushMode){var _ref$current3;null===(_ref$current3=ref.current)||void 0===_ref$current3||_ref$current3.changeBrushTool(brushMode)}),[ref]),changeBrushPattern,brushTool,brushColor,brushPattern}}},"./src/hooks/useData.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js");var _home_runner_work_dotting_dotting_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/index.js"),_useHandlers__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/hooks/useHandlers.ts");const __WEBPACK_DEFAULT_EXPORT__=function useData(ref){var _useHandlers=(0,_useHandlers__WEBPACK_IMPORTED_MODULE_7__.Z)(ref),addDataChangeListener=_useHandlers.addDataChangeListener,removeDataChangeListener=_useHandlers.removeDataChangeListener,_useState=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(new Map),_useState2=(0,_home_runner_work_dotting_dotting_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_8__.Z)(_useState,2),data=_useState2[0],setData=_useState2[1],_useState3=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)([]),_useState4=(0,_home_runner_work_dotting_dotting_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_8__.Z)(_useState3,2),dataArray=_useState4[0],setDataArray=_useState4[1];return(0,react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){var listener=function listener(_ref){var canvasData=_ref.data;setData(canvasData);for(var allRowKeys=Array.from(canvasData.keys()),allColumnKeys=Array.from(canvasData.get(allRowKeys[0]).keys()),currentTopIndex=Math.min.apply(Math,allRowKeys),currentLeftIndex=Math.min.apply(Math,allColumnKeys),currentBottomIndex=Math.max.apply(Math,allRowKeys),currentRightIndex=Math.max.apply(Math,allColumnKeys),tempArray=[],i=currentTopIndex;i<=currentBottomIndex;i++){for(var row=[],j=currentLeftIndex;j<=currentRightIndex;j++){var _canvasData$get,pixel=null===(_canvasData$get=canvasData.get(i))||void 0===_canvasData$get?void 0:_canvasData$get.get(j);pixel&&row.push({rowIndex:i,columnIndex:j,color:pixel.color})}tempArray.push(row)}setDataArray(tempArray)};return addDataChangeListener(listener),function(){removeDataChangeListener(listener)}}),[addDataChangeListener,removeDataChangeListener]),{data,dataArray}}},"./src/hooks/useDotting.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const __WEBPACK_DEFAULT_EXPORT__=function useDotting(ref){return{clear:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){var _ref$current;null===(_ref$current=ref.current)||void 0===_ref$current||_ref$current.clear()}),[ref]),colorPixels:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(changes){var _ref$current2;null===(_ref$current2=ref.current)||void 0===_ref$current2||_ref$current2.colorPixels(changes)}),[ref]),erasePixels:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(changes){var _ref$current3;null===(_ref$current3=ref.current)||void 0===_ref$current3||_ref$current3.erasePixels(changes)}),[ref]),downloadImage:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(options){var _ref$current4;null===(_ref$current4=ref.current)||void 0===_ref$current4||_ref$current4.downloadImage(options)}),[ref]),setIndicatorPixels:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(indicators){var _ref$current5;null===(_ref$current5=ref.current)||void 0===_ref$current5||_ref$current5.setIndicatorPixels(indicators)}),[ref]),undo:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){var _ref$current6;null===(_ref$current6=ref.current)||void 0===_ref$current6||_ref$current6.undo()}),[ref]),redo:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){var _ref$current7;null===(_ref$current7=ref.current)||void 0===_ref$current7||_ref$current7.redo()}),[ref]),setData:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(data){var _ref$current8;null===(_ref$current8=ref.current)||void 0===_ref$current8||_ref$current8.setData(data)}),[ref])}}},"./src/hooks/useGrids.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _home_runner_work_dotting_dotting_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_useHandlers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/hooks/useHandlers.ts");const __WEBPACK_DEFAULT_EXPORT__=function useGrids(ref){var _useHandlers=(0,_useHandlers__WEBPACK_IMPORTED_MODULE_1__.Z)(ref),addGridChangeListener=_useHandlers.addGridChangeListener,removeGridChangeListener=_useHandlers.removeGridChangeListener,_useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({columnCount:0,rowCount:0}),_useState2=(0,_home_runner_work_dotting_dotting_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__.Z)(_useState,2),dimensions=_useState2[0],setDimensions=_useState2[1],_useState3=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({topRowIndex:0,bottomRowIndex:0,leftColumnIndex:0,rightColumnIndex:0}),_useState4=(0,_home_runner_work_dotting_dotting_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__.Z)(_useState3,2),indices=_useState4[0],setIndices=_useState4[1];return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var listener=function listener(_ref){var dimensions=_ref.dimensions,indices=_ref.indices;setDimensions({columnCount:dimensions.columnCount,rowCount:dimensions.rowCount}),setIndices({topRowIndex:indices.topRowIndex,bottomRowIndex:indices.bottomRowIndex,leftColumnIndex:indices.leftColumnIndex,rightColumnIndex:indices.rightColumnIndex})};return addGridChangeListener(listener),function(){removeGridChangeListener(listener)}}),[addGridChangeListener,removeGridChangeListener]),{dimensions,indices}}},"./src/hooks/useHandlers.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const __WEBPACK_DEFAULT_EXPORT__=function useHandlers(ref){return{addDataChangeListener:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(listener){var _ref$current;null===(_ref$current=ref.current)||void 0===_ref$current||_ref$current.addDataChangeListener(listener)}),[ref]),removeDataChangeListener:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(listener){var _ref$current2;null===(_ref$current2=ref.current)||void 0===_ref$current2||_ref$current2.removeDataChangeListener(listener)}),[ref]),addGridChangeListener:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(listener){var _ref$current3;null===(_ref$current3=ref.current)||void 0===_ref$current3||_ref$current3.addGridChangeListener(listener)}),[ref]),removeGridChangeListener:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(listener){var _ref$current4;null===(_ref$current4=ref.current)||void 0===_ref$current4||_ref$current4.removeGridChangeListener(listener)}),[ref]),addBrushChangeListener:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(listener){var _ref$current5;null===(_ref$current5=ref.current)||void 0===_ref$current5||_ref$current5.addBrushChangeListener(listener)}),[ref]),removeBrushChangeListener:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(listener){var _ref$current6;null===(_ref$current6=ref.current)||void 0===_ref$current6||_ref$current6.removeBrushChangeListener(listener)}),[ref]),addStrokeEndListener:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(listener){var _ref$current7;null===(_ref$current7=ref.current)||void 0===_ref$current7||_ref$current7.addStrokeEndListener(listener)}),[ref]),removeStrokeEndListener:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(listener){var _ref$current8;null===(_ref$current8=ref.current)||void 0===_ref$current8||_ref$current8.removeStrokeEndListener(listener)}),[ref]),addHoverPixelChangeListener:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(listener){var _ref$current9;null===(_ref$current9=ref.current)||void 0===_ref$current9||_ref$current9.addHoverPixelChangeListener(listener)}),[ref]),removeHoverPixelChangeListener:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(listener){var _ref$current10;null===(_ref$current10=ref.current)||void 0===_ref$current10||_ref$current10.removeHoverPixelChangeListener(listener)}),[ref]),addCanvasElementEventListener:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(event,listener){var _ref$current11;null===(_ref$current11=ref.current)||void 0===_ref$current11||_ref$current11.addCanvasElementEventListener(event,listener)}),[ref]),removeCanvasElementEventListener:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(event,listener){var _ref$current12;null===(_ref$current12=ref.current)||void 0===_ref$current12||_ref$current12.removeCanvasElementEventListener(event,listener)}),[ref])}}},"./src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{DX:()=>useBrush.Z,NU:()=>useDotting.Z});__webpack_require__("./src/components/Dotting.tsx"),__webpack_require__("./src/components/Canvas/types.ts");var useBrush=__webpack_require__("./src/hooks/useBrush.ts"),useDotting=(__webpack_require__("./src/hooks/useData.ts"),__webpack_require__("./src/hooks/useDotting.ts"));__webpack_require__("./src/hooks/useGrids.ts"),__webpack_require__("./src/hooks/useHandlers.ts")},"./stories/useBrushComponents/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{tq:()=>useBrushComponents_ChangeBrushColor,lz:()=>useBrushComponents_ChangeBrushPattern,jg:()=>useBrushComponents_ChangeBrushTool});__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var react=__webpack_require__("./node_modules/react/index.js"),Dotting=__webpack_require__("./src/components/Dotting.tsx"),useBrush=__webpack_require__("./src/hooks/useBrush.ts");const useBrushComponents_ChangeBrushColor=function ChangeBrushColor(){var ref=(0,react.useRef)(null),_useBrush=(0,useBrush.Z)(ref),changeBrushColor=_useBrush.changeBrushColor,brushColor=_useBrush.brushColor;return react.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",fontFamily:"'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif",marginBottom:50}},react.createElement(Dotting.Z,{ref,width:"100%",height:300}),react.createElement("div",{style:{display:"flex",alignItems:"center",marginTop:10,marginBottom:3}},react.createElement("span",{style:{fontSize:13}},"Brush Color"),react.createElement("div",{style:{borderRadius:"50%",width:20,height:20,marginLeft:15,backgroundColor:brushColor}})),react.createElement("div",null,["#FF0000","#0000FF","#00FF00","#FF00FF","#00FFFF","#FFFF00","#000000","#FFFFFF"].map((function(color){return react.createElement("div",{key:color,onClick:changeBrushColor.bind(null,color),style:{width:25,height:25,margin:10,border:"1px solid black",backgroundColor:color,display:"inline-block"}})}))))};var slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");const useBrushComponents_ChangeBrushPattern=function ChangeBrushPattern(){var ref=(0,react.useRef)(null),_useBrush=(0,useBrush.Z)(ref),changeBrushColor=_useBrush.changeBrushColor,changeBrushPattern=_useBrush.changeBrushPattern,brushColor=_useBrush.brushColor,handleColorChange=(0,react.useCallback)((function(e){changeBrushColor.bind(null,e.target.value)()}),[]),_useState=(0,react.useState)(0),_useState2=(0,slicedToArray.Z)(_useState,2),selectedPatternIndex=_useState2[0],setSelectedPatternIndex=_useState2[1],patterns=(0,react.useMemo)((function(){return[[[1]],[[0,1,0],[1,1,1],[0,1,0]],[[1,1,1],[1,1,1],[1,1,1]],[[0,0,1,0,0],[0,1,1,1,0],[1,1,1,1,1],[0,1,1,1,0],[0,0,1,0,0]],[[0,1,1,1,0],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[0,1,1,1,0]],[[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1]]]}),[]);return react.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",fontFamily:"'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif"}},react.createElement(Dotting.Z,{ref,width:"100%",height:300}),react.createElement("div",{style:{display:"flex",alignItems:"center",marginTop:10,marginBottom:3,fontSize:13}},react.createElement("span",null,"Brush Mode"),react.createElement("div",{style:{display:"flex",alignItems:"center",marginTop:10}},patterns.map((function(pattern,index){return react.createElement("div",{style:{display:"flex",backgroundColor:selectedPatternIndex===index?"grey":"",marginLeft:5,marginRight:5,width:80,height:80,alignItems:"center",justifyContent:"center"},onClick:function onClick(){setSelectedPatternIndex(index),changeBrushPattern(pattern)}},pattern.map((function(row){return react.createElement("div",{style:{display:"flex",flexDirection:"column"}},row.map((function(cell){return react.createElement("div",{style:{width:10,height:10,backgroundColor:1===cell?"black":"",margin:1}})})))})))})))),react.createElement("div",{style:{display:"flex",alignItems:"center",marginTop:10,marginBottom:3}},react.createElement("span",{style:{fontSize:13}},"Brush Color"),react.createElement("div",{style:{borderRadius:"50%",width:20,height:20,marginLeft:15,marginRight:15,backgroundColor:brushColor}}),react.createElement("input",{type:"color",value:brushColor,onChange:handleColorChange})),react.createElement("div",null))};var src=__webpack_require__("./src/index.ts"),types=__webpack_require__("./src/components/Canvas/types.ts");const useBrushComponents_ChangeBrushTool=function ChangeBrushTool(){var ref=(0,react.useRef)(null),_useBrush=(0,useBrush.Z)(ref),changeBrushColor=_useBrush.changeBrushColor,changeBrushTool=_useBrush.changeBrushTool,brushTool=_useBrush.brushTool,brushColor=_useBrush.brushColor,_useDotting=(0,src.NU)(ref),handleColorChange=(_useDotting.undo,_useDotting.redo,(0,react.useCallback)((function(e){changeBrushColor.bind(null,e.target.value)()}),[]));return react.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",fontFamily:"'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif",marginBottom:50}},react.createElement(Dotting.Z,{ref,width:"100%",height:300}),react.createElement("div",{style:{display:"flex",alignItems:"center",marginTop:10,marginBottom:3,fontSize:13}},react.createElement("span",null,"Brush Mode"),react.createElement("select",{style:{marginLeft:15},value:brushTool,onChange:function onChange(e){changeBrushTool(e.target.value)}},react.createElement("option",{value:types.G.DOT},types.G.DOT),react.createElement("option",{value:types.G.ERASER},types.G.ERASER),react.createElement("option",{value:types.G.PAINT_BUCKET},types.G.PAINT_BUCKET),react.createElement("option",{value:types.G.SELECT},types.G.SELECT))),react.createElement("div",{style:{display:"flex",alignItems:"center",marginTop:10,marginBottom:3}},react.createElement("span",{style:{fontSize:13}},"Brush Color"),react.createElement("div",{style:{borderRadius:"50%",width:20,height:20,marginLeft:15,marginRight:15,backgroundColor:brushColor}}),react.createElement("input",{type:"color",value:brushColor,onChange:handleColorChange})),react.createElement("div",null))}},"./stories/useDottingComponents/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{UZ:()=>useDottingComponents_Clear,aF:()=>ColorPixels,sQ:()=>useDottingComponents_DownloadImage,Uo:()=>useDottingComponents_GridStyling,P$:()=>useDottingComponents_SetData,Z_:()=>useDottingComponents_SetIndicatorPixels,QA:()=>useDottingComponents_UndoRedo});var react=__webpack_require__("./node_modules/react/index.js"),Dotting=__webpack_require__("./src/components/Dotting.tsx"),useDotting=__webpack_require__("./src/hooks/useDotting.ts");const useDottingComponents_Clear=function Clear(){var ref=(0,react.useRef)(null),clear=(0,useDotting.Z)(ref).clear;return react.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"}},react.createElement(Dotting.Z,{ref,width:"100%",height:300}),react.createElement("button",{style:{padding:"5px 10px",background:"none",marginTop:10,marginBottom:50},onClick:clear},"Clear Canvas"))};__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js");var slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");const ColorPixels=function ChangePixelColor(){var ref=(0,react.useRef)(null),_useDotting=(0,useDotting.Z)(ref),colorPixels=_useDotting.colorPixels,erasePixels=_useDotting.erasePixels,_React$useState=react.useState(0),_React$useState2=(0,slicedToArray.Z)(_React$useState,2),rowIndex=_React$useState2[0],setRowIndex=_React$useState2[1],_React$useState3=react.useState(0),_React$useState4=(0,slicedToArray.Z)(_React$useState3,2),columnIndex=_React$useState4[0],setColumnIndex=_React$useState4[1],_React$useState5=react.useState(0),_React$useState6=(0,slicedToArray.Z)(_React$useState5,2),rowIndex2=_React$useState6[0],setRowIndex2=_React$useState6[1],_React$useState7=react.useState(0),_React$useState8=(0,slicedToArray.Z)(_React$useState7,2),columnIndex2=_React$useState8[0],setColumnIndex2=_React$useState8[1];return react.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",fontFamily:"'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif"}},react.createElement(Dotting.Z,{ref,width:"100%",height:300}),react.createElement("div",null,react.createElement("div",{style:{padding:"20px 0",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},react.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},react.createElement("div",{style:{margin:"0 10px"}},react.createElement("span",null,"Row Index: "),react.createElement("input",{style:{width:40,height:20},type:"number",value:rowIndex,onChange:function onChange(e){return setRowIndex(Number(e.target.value))}})),react.createElement("div",{style:{margin:"0 10px"}},react.createElement("span",null,"Column Index: "),react.createElement("input",{style:{width:40,height:20},type:"number",value:columnIndex,onChange:function onChange(e){return setColumnIndex(Number(e.target.value))}}))),react.createElement("button",{style:{padding:"5px 10px",background:"none",marginTop:15},onClick:function onClick(){return colorPixels([{rowIndex,columnIndex,color:"red"}])}},"Color Pixel")),react.createElement("div",{style:{padding:"20px 0",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},react.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},react.createElement("div",{style:{margin:"0 10px"}},react.createElement("span",null,"Row Index: "),react.createElement("input",{style:{width:40,height:20},type:"number",value:rowIndex2,onChange:function onChange(e){return setRowIndex2(Number(e.target.value))}})),react.createElement("div",{style:{margin:"0 10px"}},react.createElement("span",null,"Column Index: "),react.createElement("input",{style:{width:40,height:20},type:"number",value:columnIndex2,onChange:function onChange(e){return setColumnIndex2(Number(e.target.value))}}))),react.createElement("button",{style:{padding:"5px 10px",background:"none",marginTop:15,marginBottom:30},onClick:function onClick(){return erasePixels([{rowIndex:rowIndex2,columnIndex:columnIndex2}])}},"Erase Pixel"))))};const useDottingComponents_DownloadImage=function DownloadImage(){var ref=(0,react.useRef)(null),downloadImage=(0,useDotting.Z)(ref).downloadImage;return react.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"}},react.createElement(Dotting.Z,{ref,width:"100%",height:300}),react.createElement("button",{style:{padding:"5px 10px",background:"none",marginTop:10,marginBottom:50},onClick:function onClick(){return downloadImage()}},"Download"))};const useDottingComponents_GridStyling=function GridStyling(){var ref=(0,react.useRef)(null),_useState=(0,react.useState)("#000000"),_useState2=(0,slicedToArray.Z)(_useState,2),gridStrokeColor=_useState2[0],setGridStrokeColor=_useState2[1],_useState3=(0,react.useState)(1),_useState4=(0,slicedToArray.Z)(_useState3,2),gridStrokeWidth=_useState4[0],setGridStrokeWidth=_useState4[1];return react.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"}},react.createElement(Dotting.Z,{ref,width:"100%",height:300,gridStrokeColor,gridStrokeWidth,style:{borderColor:"red"},backgroundMode:"color",backgroundAlpha:.1,backgroundColor:"red"}),react.createElement("div",{style:{display:"flex",alignItems:"center",marginTop:10}},react.createElement("span",{style:{fontSize:13}},"Grid Stroke Width"),react.createElement("input",{type:"number",style:{marginLeft:25},min:1,max:10,step:1,value:gridStrokeWidth,onChange:function onChange(e){setGridStrokeWidth(+e.target.value)}})),react.createElement("div",{style:{display:"flex",alignItems:"center",marginTop:10,marginBottom:3}},react.createElement("span",{style:{fontSize:13}},"Grid Stroke Color"),react.createElement("div",{style:{borderRadius:"50%",width:20,height:20,marginLeft:15,marginRight:15,backgroundColor:gridStrokeColor}}),react.createElement("input",{type:"color",value:gridStrokeColor,onChange:function onChange(e){return setGridStrokeColor(e.target.value)}})))};const useDottingComponents_SetData=function SetData(){var ref=(0,react.useRef)(null),setData=(0,useDotting.Z)(ref).setData;return react.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",fontFamily:"'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif"}},react.createElement(Dotting.Z,{ref,width:"100%",height:300}),react.createElement("div",null,react.createElement("div",{style:{padding:"20px 0",display:"flex",justifyContent:"center",alignItems:"center",gap:5}},react.createElement("button",{style:{padding:"5px 10px",background:"none"},onClick:function onClick(){setData([[{rowIndex:0,columnIndex:0,color:""},{rowIndex:0,columnIndex:1,color:""},{rowIndex:0,columnIndex:2,color:""}],[{rowIndex:1,columnIndex:0,color:""},{rowIndex:1,columnIndex:1,color:""},{rowIndex:1,columnIndex:2,color:""}],[{rowIndex:2,columnIndex:0,color:""},{rowIndex:2,columnIndex:1,color:""},{rowIndex:2,columnIndex:2,color:""}]])}},"Set Data to 3 X 3"),react.createElement("button",{style:{padding:"5px 10px",background:"none"},onClick:function onClick(){setData([[{rowIndex:0,columnIndex:0,color:""},{rowIndex:0,columnIndex:1,color:""},{rowIndex:0,columnIndex:2,color:""},{rowIndex:0,columnIndex:3,color:""}],[{rowIndex:1,columnIndex:0,color:""},{rowIndex:1,columnIndex:1,color:""},{rowIndex:1,columnIndex:2,color:""},{rowIndex:1,columnIndex:3,color:""}],[{rowIndex:2,columnIndex:0,color:""},{rowIndex:2,columnIndex:1,color:""},{rowIndex:2,columnIndex:2,color:""},{rowIndex:2,columnIndex:3,color:""}],[{rowIndex:3,columnIndex:0,color:""},{rowIndex:3,columnIndex:1,color:""},{rowIndex:3,columnIndex:2,color:""},{rowIndex:3,columnIndex:3,color:""}]])}},"Set Data to 4 X 4"),react.createElement("button",{style:{padding:"5px 10px",background:"none"},onClick:function onClick(){setData([[{rowIndex:0,columnIndex:0,color:""},{rowIndex:0,columnIndex:1,color:""},{rowIndex:0,columnIndex:2,color:""},{rowIndex:0,columnIndex:3,color:""},{rowIndex:0,columnIndex:4,color:""}],[{rowIndex:1,columnIndex:0,color:""},{rowIndex:1,columnIndex:1,color:""},{rowIndex:1,columnIndex:2,color:""},{rowIndex:1,columnIndex:3,color:""},{rowIndex:1,columnIndex:4,color:""}],[{rowIndex:2,columnIndex:0,color:""},{rowIndex:2,columnIndex:1,color:""},{rowIndex:2,columnIndex:2,color:""},{rowIndex:2,columnIndex:3,color:""},{rowIndex:2,columnIndex:4,color:""}],[{rowIndex:3,columnIndex:0,color:""},{rowIndex:3,columnIndex:1,color:""},{rowIndex:3,columnIndex:2,color:""},{rowIndex:3,columnIndex:3,color:""},{rowIndex:3,columnIndex:4,color:""}],[{rowIndex:4,columnIndex:0,color:""},{rowIndex:4,columnIndex:1,color:""},{rowIndex:4,columnIndex:2,color:""},{rowIndex:4,columnIndex:3,color:""},{rowIndex:4,columnIndex:4,color:""}]])}},"Set Data to 5 X 5"))))};const useDottingComponents_SetIndicatorPixels=function SetIndicatorPixels(){var ref=(0,react.useRef)(null),setIndicatorPixels=(0,useDotting.Z)(ref).setIndicatorPixels,_React$useState=react.useState(!1),_React$useState2=(0,slicedToArray.Z)(_React$useState,2),areIndicatorsShown=_React$useState2[0],setAreIndicatorsShown=_React$useState2[1],showIndicators=(0,react.useCallback)((function(){setIndicatorPixels([{rowIndex:0,columnIndex:0,color:"#ff0000"},{rowIndex:1,columnIndex:1,color:"#ff0000"}])}),[setIndicatorPixels,setAreIndicatorsShown]),hideIndicators=(0,react.useCallback)((function(){setIndicatorPixels([])}),[setIndicatorPixels,setAreIndicatorsShown]);return react.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",fontFamily:"'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif"}},react.createElement(Dotting.Z,{ref,width:"100%",height:300}),react.createElement("div",null,react.createElement("div",{style:{padding:"20px 0",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},react.createElement("button",{style:{padding:"5px 10px",background:"none",marginTop:15,marginBottom:30},onClick:function onClick(){areIndicatorsShown?(setAreIndicatorsShown(!1),hideIndicators()):(setAreIndicatorsShown(!0),showIndicators())}},areIndicatorsShown?"Hide Indicators":"Show Indicators"))))};const useDottingComponents_UndoRedo=function UndoRedo(){var ref=(0,react.useRef)(null),_useDotting=(0,useDotting.Z)(ref),undo=_useDotting.undo,redo=_useDotting.redo;return react.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"}},react.createElement(Dotting.Z,{ref,width:"100%",height:300}),react.createElement("div",{style:{marginTop:10,marginBottom:50,display:"flex"}},react.createElement("button",{style:{padding:"5px 10px",background:"none"},onClick:undo},"undo"),react.createElement("button",{style:{padding:"5px 10px",background:"none"},onClick:redo},"redo")))}},"./storybook-init-framework-entry.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},"./stories/Hooks.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,__page:()=>__page,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_useDottingComponents__WEBPACK_IMPORTED_MODULE_14__=(__webpack_require__("./stories/assets/code-brackets.svg"),__webpack_require__("./stories/assets/colors.svg"),__webpack_require__("./stories/assets/comments.svg"),__webpack_require__("./stories/assets/direction.svg"),__webpack_require__("./stories/assets/flow.svg"),__webpack_require__("./stories/assets/plugin.svg"),__webpack_require__("./stories/assets/repo.svg"),__webpack_require__("./stories/assets/stackalt.svg"),__webpack_require__("./src/components/Dotting.tsx"),__webpack_require__("./stories/useDottingComponents/index.ts"));function _createMdxContent(props){var _components=Object.assign({h1:"h1",h4:"h4",p:"p",code:"code",pre:"pre",strong:"strong"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.ah)(),props.components);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__.h_,{title:"Hooks/Setup"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("style",{children:"\n  .subheading {\n    --mediumdark: '#999999';\n    font-weight: 900;\n    font-size: 13px;\n    color: #999;\n    letter-spacing: 6px;\n    line-height: 24px;\n    text-transform: uppercase;\n    margin-bottom: 12px;\n    margin-top: 40px;\n    font-family: 'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  }\n\n  .link-list {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: 1fr 1fr;\n    row-gap: 10px;\n  }\n\n  @media (min-width: 620px) {\n    .link-list {\n      row-gap: 20px;\n      column-gap: 20px;\n      grid-template-columns: 1fr 1fr;\n    }\n  }\n\n  @media all and (-ms-high-contrast:none) {\n  .link-list {\n      display: -ms-grid;\n      -ms-grid-columns: 1fr 1fr;\n      -ms-grid-rows: 1fr 1fr;\n    }\n  }\n\n  .link-item {\n    display: block;\n    padding: 20px 30px 20px 15px;\n    border: 1px solid #00000010;\n    border-radius: 5px;\n    transition: background 150ms ease-out, border 150ms ease-out, transform 150ms ease-out;\n    color: #333333;\n    display: flex;\n    align-items: flex-start;\n  }\n\n  .link-item:hover {\n    border-color: #1EA7FD50;\n    transform: translate3d(0, -3px, 0);\n    box-shadow: rgba(0, 0, 0, 0.08) 0 3px 10px 0;\n  }\n\n  .link-item:active {\n    border-color: #1EA7FD;\n    transform: translate3d(0, 0, 0);\n  }\n\n  .link-item strong {\n    font-weight: 700;\n    display: block;\n    margin-bottom: 2px;\n  }\n  \n  .link-item img {\n    height: 40px;\n    width: 40px;\n    margin-right: 15px;\n    flex: none;\n  }\n\n  .link-item span {\n    font-size: 14px;\n    line-height: 20px;\n  }\n\n  .tip {\n    display: inline-block;\n    border-radius: 1em;\n    font-size: 11px;\n    line-height: 12px;\n    font-weight: 700;\n    background: #E7FDD8;\n    color: #66BF3C;\n    padding: 4px 12px;\n    margin-right: 10px;\n    vertical-align: top;\n  }\n\n  .tip-wrapper {\n    font-size: 13px;\n    line-height: 20px;\n    margin-top: 40px;\n    margin-bottom: 40px;\n  }\n\n  .tip-wrapper code {\n    font-size: 12px;\n    display: inline-block;\n  }\n"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.h1,{children:"Using hooks for interaction!"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.h4,{children:"How to setup hooks"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:["To manipulate the Dotting component you should have a ref object attached to the Dotting Component.\nYou can use React's ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"useRef"})," to get the DottingRef refobject of the Dotting Component.\nAfter the ref object is set, you can use the ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"useDotting"})," or ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"useBrush"})," hook and pass the ref as its parameter."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:["Below is the example setup for using the ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"useDotting"})," hook.\nThe example below shows how you can clear the canvas."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.h4,{children:"Setup Example (Clearing the Canvas)"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{className:"language-ts",children:'export const Component = () => {\n  const ref = useRef<DottingRef>(null);\n  const { clear } = useDotting(ref);\n  return (\n    <div>\n      <Dotting ref={ref} width={"100%"} height={300} />\n      <button onClick={clear}>Clear Canvas</button>\n    </div>\n  );\n};\n'})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_useDottingComponents__WEBPACK_IMPORTED_MODULE_14__.UZ,{}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.h4,{children:"Styling"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:["You can add styles to Dotting component via ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"React.CSSProperties"})," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("br",{}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"gridStroke"})," props to control grid's appearances ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("br",{}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"background"})," props to control base layer's appearances ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("br",{}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"backgroundMode"})," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.strong,{children:"checkerboard"})," is default you can use plain background if you change to ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.strong,{children:"color"})," mode"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{className:"language-ts",children:'export const Component = () => {\n  return (\n    <div>\n      <Dotting\n        gridStrokeColor={gridStrokeColor}\n        gridStrokeWidth={gridStrokeWidth}\n        style={{ borderColor: "red" }}\n        backgroundMode="color"\n        backgroundAlpha=0.2\n        backgroundColor="red"\n      />\n    </div>\n  );\n};\n'})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_useDottingComponents__WEBPACK_IMPORTED_MODULE_14__.Uo,{})]})}function MDXContent(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},MDXLayout=Object.assign({},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.ah)(),props.components).wrapper;return MDXLayout?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(MDXLayout,Object.assign({},props,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_createMdxContent,props)})):_createMdxContent(props)}var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hooks/Setup",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return react__WEBPACK_IMPORTED_MODULE_1__.createElement(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__.aT,{mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},react__WEBPACK_IMPORTED_MODULE_1__.createElement(MDXContent,null))}});const __WEBPACK_DEFAULT_EXPORT__=componentMeta;var __namedExportsOrder=["__page"]},"./stories/Introduction.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,__page:()=>__page,default:()=>Introduction_stories});__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var react=__webpack_require__("./node_modules/react/index.js"),esm=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),dist_esm=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),stackalt=(__webpack_require__("./stories/assets/code-brackets.svg"),__webpack_require__("./stories/assets/colors.svg"),__webpack_require__("./stories/assets/comments.svg"),__webpack_require__("./stories/assets/direction.svg"),__webpack_require__("./stories/assets/flow.svg"),__webpack_require__("./stories/assets/plugin.svg"),__webpack_require__("./stories/assets/repo.svg"),__webpack_require__("./stories/assets/stackalt.svg")),Dotting=__webpack_require__("./src/components/Dotting.tsx"),src=(__webpack_require__("./stories/useBrushComponents/index.ts"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./src/index.ts"));const custom_CustomExample=function CustomExample(){var ref=(0,react.useRef)(null),_useDotting=(0,src.NU)(ref),undo=_useDotting.undo,redo=_useDotting.redo,changeBrushColor=(0,src.DX)(ref).changeBrushColor;return react.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"}},react.createElement(Dotting.Z,{ref,width:"100%",height:300}),react.createElement("div",null,["#FF0000","#0000FF","#00FF00","#FF00FF","#00FFFF","#FFFF00","#000000","#FFFFFF"].map((function(color){return react.createElement("div",{key:color,onClick:changeBrushColor.bind(null,color),style:{width:25,height:25,margin:10,border:"1px solid black",backgroundColor:color,display:"inline-block"}})}))),react.createElement("div",{style:{marginTop:10,marginBottom:50,display:"flex"}},react.createElement("button",{style:{padding:"5px 10px",background:"none"},onClick:undo},"undo"),react.createElement("button",{style:{padding:"5px 10px",background:"none"},onClick:redo},"redo")))};function _createMdxContent(props){var _components=Object.assign({h1:"h1",h4:"h4",p:"p",strong:"strong",a:"a",pre:"pre",code:"code"},(0,dist_esm.ah)(),props.components);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(esm.h_,{title:"Introduction"}),"\n",(0,jsx_runtime.jsx)("style",{children:"\n  .subheading {\n    --mediumdark: '#999999';\n    font-weight: 900;\n    font-size: 13px;\n    color: #999;\n    letter-spacing: 6px;\n    line-height: 24px;\n    text-transform: uppercase;\n    margin-bottom: 12px;\n    margin-top: 40px;\n    font-family: 'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  }\n\n  .link-list {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: 1fr 1fr;\n    row-gap: 10px;\n  }\n\n  @media (min-width: 620px) {\n    .link-list {\n      row-gap: 20px;\n      column-gap: 20px;\n      grid-template-columns: 1fr 1fr;\n    }\n  }\n\n  @media all and (-ms-high-contrast:none) {\n  .link-list {\n      display: -ms-grid;\n      -ms-grid-columns: 1fr 1fr;\n      -ms-grid-rows: 1fr 1fr;\n    }\n  }\n\n  .link-item {\n    display: block;\n    padding: 20px 30px 20px 15px;\n    border: 1px solid #00000010;\n    border-radius: 5px;\n    transition: background 150ms ease-out, border 150ms ease-out, transform 150ms ease-out;\n    color: #333333;\n    display: flex;\n    align-items: flex-start;\n  }\n\n  .link-item:hover {\n    border-color: #1EA7FD50;\n    transform: translate3d(0, -3px, 0);\n    box-shadow: rgba(0, 0, 0, 0.08) 0 3px 10px 0;\n  }\n\n  .link-item:active {\n    border-color: #1EA7FD;\n    transform: translate3d(0, 0, 0);\n  }\n\n  .link-item strong {\n    font-weight: 700;\n    display: block;\n    margin-bottom: 2px;\n  }\n  \n  .link-item img {\n    height: 40px;\n    width: 40px;\n    margin-right: 15px;\n    flex: none;\n  }\n\n  .link-item span {\n    font-size: 14px;\n    line-height: 20px;\n  }\n\n  .tip {\n    display: inline-block;\n    border-radius: 1em;\n    font-size: 11px;\n    line-height: 12px;\n    font-weight: 700;\n    background: #E7FDD8;\n    color: #66BF3C;\n    padding: 4px 12px;\n    margin-right: 10px;\n    vertical-align: top;\n  }\n\n  .tip-wrapper {\n    font-size: 13px;\n    line-height: 20px;\n    margin-top: 40px;\n    margin-bottom: 40px;\n  }\n\n  .tip-wrapper code {\n    font-size: 12px;\n    display: inline-block;\n  }\n"}),"\n",(0,jsx_runtime.jsx)(_components.h1,{children:"Welcome to Dotting!"}),"\n",(0,jsx_runtime.jsx)(_components.h4,{children:"Finding a pixel art editor for your website? Look no further!"}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["Dotting is a pixel art drawing component for React for creators who want to implement a pixel canvas editor to their websites.\nDotting works for ",(0,jsx_runtime.jsx)(_components.strong,{children:"both PC and mobile environments"}),". You can freely pan & zoom around the using your mouse or your fingers.\nThe canvas grid size is changeable. You can extend your canvas grid to any size by extending the grid from any edges. Make your websites interactive by adding a simple pixel art canvas editor to your website!"]}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["Dotting welcomes all contributions!\nIf you are interested in contributing, visit ",(0,jsx_runtime.jsx)(_components.a,{href:"https://github.com/hunkim98/dotting",children:(0,jsx_runtime.jsx)(_components.strong,{children:"Dotting Github"})})," to view the source code!"]}),"\n",(0,jsx_runtime.jsx)(custom_CustomExample,{}),"\n",(0,jsx_runtime.jsx)(_components.h1,{children:"Quick Start"}),"\n",(0,jsx_runtime.jsx)(_components.p,{children:(0,jsx_runtime.jsx)(_components.strong,{children:"Step 1. Install the package"})}),"\n",(0,jsx_runtime.jsx)(_components.pre,{children:(0,jsx_runtime.jsx)(_components.code,{className:"language-bash",children:"$ yarn add dotting\n"})}),"\n",(0,jsx_runtime.jsx)(_components.p,{children:(0,jsx_runtime.jsx)(_components.strong,{children:"Step 2. Implement the component in your React project"})}),"\n",(0,jsx_runtime.jsx)(_components.pre,{children:(0,jsx_runtime.jsx)(_components.code,{className:"language-jsx",children:'import { Dotting } from "dotting";\n\nconst DottingExample = () => {\n  return (\n    <div>\n      <Dotting width={300} height={300} />\n    </div>\n  );\n};\n'})}),"\n",(0,jsx_runtime.jsx)("div",{className:"subheading",children:"Resources"}),"\n",(0,jsx_runtime.jsx)("div",{className:"link-list",children:(0,jsx_runtime.jsxs)("a",{className:"link-item",href:"https://github.com/hunkim98/dotting",target:"_blank",children:[(0,jsx_runtime.jsx)("img",{src:stackalt,alt:"Build"}),(0,jsx_runtime.jsx)("span",{children:(0,jsx_runtime.jsxs)(_components.p,{children:[(0,jsx_runtime.jsx)("strong",{children:"Github Source Code"}),"\nView the source code and contribute to the project!"]})})]})}),"\n",(0,jsx_runtime.jsx)("div",{className:"tip-wrapper"}),"\n",(0,jsx_runtime.jsx)(_components.pre,{children:(0,jsx_runtime.jsx)(_components.code,{})})]})}function MDXContent(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},MDXLayout=Object.assign({},(0,dist_esm.ah)(),props.components).wrapper;return MDXLayout?(0,jsx_runtime.jsx)(MDXLayout,Object.assign({},props,{children:(0,jsx_runtime.jsx)(_createMdxContent,props)})):_createMdxContent(props)}var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Introduction",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return react.createElement(esm.aT,{mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},react.createElement(MDXContent,null))}});const Introduction_stories=componentMeta;var __namedExportsOrder=["__page"]},"./stories/useBrush.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,__page:()=>__page,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_assets_stackalt_svg__WEBPACK_IMPORTED_MODULE_12__=(__webpack_require__("./stories/assets/code-brackets.svg"),__webpack_require__("./stories/assets/colors.svg"),__webpack_require__("./stories/assets/comments.svg"),__webpack_require__("./stories/assets/direction.svg"),__webpack_require__("./stories/assets/flow.svg"),__webpack_require__("./stories/assets/plugin.svg"),__webpack_require__("./stories/assets/repo.svg"),__webpack_require__("./stories/assets/stackalt.svg")),_useBrushComponents__WEBPACK_IMPORTED_MODULE_14__=(__webpack_require__("./src/components/Dotting.tsx"),__webpack_require__("./stories/useBrushComponents/index.ts"));function _createMdxContent(props){var _components=Object.assign({h1:"h1",code:"code",p:"p",h4:"h4",pre:"pre",h3:"h3"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.ah)(),props.components);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__.h_,{title:"Hooks/useBrush"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("style",{children:'\n  .subheading {\n    --mediumdark: \'#999999\';\n    font-weight: 900;\n    font-size: 13px;\n    color: #999;\n    letter-spacing: 6px;\n    line-height: 24px;\n    text-transform: uppercase;\n    margin-bottom: 12px;\n    margin-top: 40px;\n    font-family: \'Nunito Sans\', \'Helvetica Neue\', Helvetica, Arial, sans-serif;\n  }\n\n  .link-list {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: 1fr 1fr;\n    row-gap: 10px;\n  }\n\n  @media (min-width: 620px) {\n    .link-list {\n      row-gap: 20px;\n      column-gap: 20px;\n      grid-template-columns: 1fr 1fr;\n    }\n  }\n\n  @media all and (-ms-high-contrast:none) {\n  .link-list {\n      display: -ms-grid;\n      -ms-grid-columns: 1fr 1fr;\n      -ms-grid-rows: 1fr 1fr;\n    }\n  }\n\n  .link-item {\n    display: block;\n    padding: 20px 30px 20px 15px;\n    border: 1px solid #00000010;\n    border-radius: 5px;\n    transition: background 150ms ease-out, border 150ms ease-out, transform 150ms ease-out;\n    color: #333333;\n    display: flex;\n    align-items: flex-start;\n  }\n\n  .link-item:hover {\n    border-color: #1EA7FD50;\n    transform: translate3d(0, -3px, 0);\n    box-shadow: rgba(0, 0, 0, 0.08) 0 3px 10px 0;\n  }\n\n  .link-item:active {\n    border-color: #1EA7FD;\n    transform: translate3d(0, 0, 0);\n  }\n\n  .link-item strong {\n    font-weight: 700;\n    display: block;\n    margin-bottom: 2px;\n  }\n  \n  .link-item img {\n    height: 40px;\n    width: 40px;\n    margin-right: 15px;\n    flex: none;\n  }\n\n  .link-item span {\n    font-size: 14px;\n    line-height: 20px;\n  }\n\n  .tip {\n    display: inline-block;\n    border-radius: 1em;\n    font-size: 11px;\n    line-height: 12px;\n    font-weight: 700;\n    background: #E7FDD8;\n    color: #66BF3C;\n    padding: 4px 12px;\n    margin-right: 10px;\n    vertical-align: top;\n  }\n\n  .tip-wrapper {\n    font-size: 13px;\n    line-height: 20px;\n    margin-top: 40px;\n    margin-bottom: 40px;\n  }\n\n  .tip-wrapper code {\n    font-size: 12px;\n    display: inline-block;\n  }\n  \ntable {\n  width: 100%;\n  border-collapse: collapse;\n  border: 1px solid #cccccc;\n  margin: 15px auto;\n  margin-bottom: 80px;\n  background: white;\n  color: #333333;\n  font-family: "Nunito Sans",-apple-system,".SFNSText-Regular","San Francisco",BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Helvetica,Arial,sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\nthead {\n  border-bottom: 1px solid #cccccc;\n}\n\ntable .css-1p8ieni {\n  margin: 0;\n}\n\nh4 {\n  margin-top: 15px;\n}\n\nth {\n  background: steelblue;\n  height: 54px;\n  width: 25%;\n  font-weight: lighter;\n  text-shadow: 0 1px 0 #38678f;\n  color: white;\n  border: 1px solid black;\n  box-shadow: inset 0px 1px 2px #cccccc;\n  transition: all 0.2s;\n}\ntr {\n  border-bottom: 1px solid #cccccc;\n}\ntr:last-child {\n  border-bottom: 0px;\n}\ntd {\n  border-right: 1px solid #cccccc;\n  padding: 10px;\n  transition: all 0.2s;\n  font-size: 14px;\n}\ntd:first-child {\n  font-size: 12px;\n  font-family: monospace\n\n}\ntd:last-child {\n  border-right: 0px;\n}\ntd.selected {\n  background: #d7e4ef;\n  z-index: ;\n}\ntd input {\n  font-size: 14px;\n  background: none;\n  outline: none;\n  border: 0;\n  display: table-cell;\n  height: 100%;\n  width: 100%;\n}\ntd input:focus {\n  box-shadow: 0 1px 0 steelblue;\n  color: steelblue;\n}\n::-moz-selection {\n  background: steelblue;\n  color: white;\n}\n::selection {\n  background: steelblue;\n  color: white;\n}\n'}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.h1,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"useBrush"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:["With ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"useBrush"}),", you can change the brush color and mode."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.h4,{children:["Features provided by ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"useBrush"})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("table",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("thead",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("tr",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("strong",{children:"Description"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("strong",{children:"Parameters"})})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("tbody",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("tr",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"changeBrushColor(color: string)"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:"Allows you to change the brush color"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"string"})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("tr",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"changeBrushTool(brushTool: BrushTool)"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("td",{children:["Allows you to change the brush mode to ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"DOT"}),", ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"ERASER"}),", ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"PAINT_BUCKET"}),", ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"SELECT"}),", or ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"NONE"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("td",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.p,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"BrushTool"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{className:"language-ts",children:'export enum BrushTool {\n  DOT = "DOT",\n  ERASER = "ERASER",\n  PAINT_BUCKET = "PAINT_BUCKET",\n  SELECT = "SELECT",\n  NONE = "NONE",\n}\n'})})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("tr",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"changeBrushPattern(brushPattern: Array<Array<1 | 0>>)"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:"Allows you to change the brush pattern (the parameter should be a square array)"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.p,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"Array<Array<1 | 0>>"})})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("tr",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"brushTool"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("td",{children:["Allows you to know the current brush mode. Variable type is ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"BrushTool"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("tr",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"brushColor"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("td",{children:["Allows you to know the current brush color. Variable type is ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"string"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("tr",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"brushPattern"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("td",{children:["Allows you to know the current brush pattern. Variable type is ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"Array<Array<1 | 0>>"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{})]})]})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.h3,{children:"Examples"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.h4,{children:["1. Change Brush Color Example ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"changeBrushColor(color: string)"})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:["With ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"changeBrushColor"})," method, you can change the color of the brush."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_useBrushComponents__WEBPACK_IMPORTED_MODULE_14__.tq,{}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.h4,{children:["2. Change Brush Tool Example ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"changeBrushTool(brushTool: BrushTool)"})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:["With ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"changeBrushTool"})," method, you can change the brush tool."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_useBrushComponents__WEBPACK_IMPORTED_MODULE_14__.jg,{}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.h4,{children:["3. Change Brush Pattern Example ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"changeBrushPattern(brushPattern: Array<Array<1 | 0>>)"})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:["With ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"changeBrushPattern"})," method, you can change the brush tool."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_useBrushComponents__WEBPACK_IMPORTED_MODULE_14__.lz,{}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"subheading",children:"Example Source Codes"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"link-list",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("a",{className:"link-item",href:"https://github.com/hunkim98/dotting/tree/main/stories/useBrushComponents",target:"_blank",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("img",{src:_assets_stackalt_svg__WEBPACK_IMPORTED_MODULE_12__,alt:"Build"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("span",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("strong",{children:"Github Source Code"}),"\nView the source code and contribute to the project!"]})})]})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"tip-wrapper"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{})})]})}function MDXContent(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},MDXLayout=Object.assign({},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.ah)(),props.components).wrapper;return MDXLayout?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(MDXLayout,Object.assign({},props,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_createMdxContent,props)})):_createMdxContent(props)}var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hooks/useBrush",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return react__WEBPACK_IMPORTED_MODULE_1__.createElement(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__.aT,{mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},react__WEBPACK_IMPORTED_MODULE_1__.createElement(MDXContent,null))}});const __WEBPACK_DEFAULT_EXPORT__=componentMeta;var __namedExportsOrder=["__page"]},"./stories/useData.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,__page:()=>__page,default:()=>useData_stories});__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var react=__webpack_require__("./node_modules/react/index.js"),esm=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),dist_esm=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),stackalt=(__webpack_require__("./stories/assets/code-brackets.svg"),__webpack_require__("./stories/assets/colors.svg"),__webpack_require__("./stories/assets/comments.svg"),__webpack_require__("./stories/assets/direction.svg"),__webpack_require__("./stories/assets/flow.svg"),__webpack_require__("./stories/assets/plugin.svg"),__webpack_require__("./stories/assets/repo.svg"),__webpack_require__("./stories/assets/stackalt.svg")),Dotting=__webpack_require__("./src/components/Dotting.tsx"),slicedToArray=(__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js")),useBrush=__webpack_require__("./src/hooks/useBrush.ts"),useData=__webpack_require__("./src/hooks/useData.ts");const useDataComponents_DataInformation=function DataInformation(){var ref=(0,react.useRef)(null),dataArray=(0,useData.Z)(ref).dataArray,changeBrushColor=(0,useBrush.Z)(ref).changeBrushColor,_useState=(0,react.useState)(new Map),_useState2=(0,slicedToArray.Z)(_useState,2),groupData=_useState2[0],setGroupData=_useState2[1];(0,react.useEffect)((function(){var map=new Map;dataArray.forEach((function(row){row.forEach((function(pixel){pixel.color&&(map.has(pixel.color)?map.set(pixel.color,map.get(pixel.color)+1):map.set(pixel.color,1))}))})),setGroupData(map)}),[dataArray]);var entries=(0,react.useMemo)((function(){return Array.from(groupData.entries())}),[groupData]);return react.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",fontFamily:"'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif"}},react.createElement(Dotting.Z,{ref,width:"100%",height:300}),react.createElement("div",null,["#FF0000","#0000FF","#00FF00","#FF00FF","#00FFFF","#FFFF00","#000000","#FFFFFF"].map((function(color){return react.createElement("div",{key:color,onClick:changeBrushColor.bind(null,color),style:{width:25,height:25,margin:10,border:"1px solid black",backgroundColor:color,display:"inline-block"}})}))),0===entries.length&&react.createElement("div",{style:{padding:10}},"Color some pixels to see color groups!"),react.createElement("div",null,entries.map((function(entry){return react.createElement("div",null,react.createElement("span",{style:{marginRight:10,color:entry[0]}},entry[0]),react.createElement("span",null,entry[1]))}))))};function _createMdxContent(props){var _components=Object.assign({h1:"h1",code:"code",p:"p",h4:"h4",pre:"pre",h3:"h3"},(0,dist_esm.ah)(),props.components);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(esm.h_,{title:"Hooks/useData"}),"\n",(0,jsx_runtime.jsx)("style",{children:'\n  .subheading {\n    --mediumdark: \'#999999\';\n    font-weight: 900;\n    font-size: 13px;\n    color: #999;\n    letter-spacing: 6px;\n    line-height: 24px;\n    text-transform: uppercase;\n    margin-bottom: 12px;\n    margin-top: 40px;\n    font-family: \'Nunito Sans\', \'Helvetica Neue\', Helvetica, Arial, sans-serif;\n  }\n\n  .link-list {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: 1fr 1fr;\n    row-gap: 10px;\n  }\n\n  @media (min-width: 620px) {\n    .link-list {\n      row-gap: 20px;\n      column-gap: 20px;\n      grid-template-columns: 1fr 1fr;\n    }\n  }\n\n  @media all and (-ms-high-contrast:none) {\n  .link-list {\n      display: -ms-grid;\n      -ms-grid-columns: 1fr 1fr;\n      -ms-grid-rows: 1fr 1fr;\n    }\n  }\n\n  .link-item {\n    display: block;\n    padding: 20px 30px 20px 15px;\n    border: 1px solid #00000010;\n    border-radius: 5px;\n    transition: background 150ms ease-out, border 150ms ease-out, transform 150ms ease-out;\n    color: #333333;\n    display: flex;\n    align-items: flex-start;\n  }\n\n  .link-item:hover {\n    border-color: #1EA7FD50;\n    transform: translate3d(0, -3px, 0);\n    box-shadow: rgba(0, 0, 0, 0.08) 0 3px 10px 0;\n  }\n\n  .link-item:active {\n    border-color: #1EA7FD;\n    transform: translate3d(0, 0, 0);\n  }\n\n  .link-item strong {\n    font-weight: 700;\n    display: block;\n    margin-bottom: 2px;\n  }\n  \n  .link-item img {\n    height: 40px;\n    width: 40px;\n    margin-right: 15px;\n    flex: none;\n  }\n\n  .link-item span {\n    font-size: 14px;\n    line-height: 20px;\n  }\n\n  .tip {\n    display: inline-block;\n    border-radius: 1em;\n    font-size: 11px;\n    line-height: 12px;\n    font-weight: 700;\n    background: #E7FDD8;\n    color: #66BF3C;\n    padding: 4px 12px;\n    margin-right: 10px;\n    vertical-align: top;\n  }\n\n  .tip-wrapper {\n    font-size: 13px;\n    line-height: 20px;\n    margin-top: 40px;\n    margin-bottom: 40px;\n  }\n\n  .tip-wrapper code {\n    font-size: 12px;\n    display: inline-block;\n  }\n  \ntable {\n  width: 100%;\n  border-collapse: collapse;\n  border: 1px solid #cccccc;\n  margin: 15px auto;\n  margin-bottom: 80px;\n  background: white;\n  color: #333333;\n  font-family: "Nunito Sans",-apple-system,".SFNSText-Regular","San Francisco",BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Helvetica,Arial,sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\nthead {\n  border-bottom: 1px solid #cccccc;\n}\n\ntable .css-1p8ieni {\n  margin: 0;\n}\n\nh4 {\n  margin-top: 15px;\n}\n\nth {\n  background: steelblue;\n  height: 54px;\n  width: 25%;\n  font-weight: lighter;\n  text-shadow: 0 1px 0 #38678f;\n  color: white;\n  border: 1px solid black;\n  box-shadow: inset 0px 1px 2px #cccccc;\n  transition: all 0.2s;\n}\ntr {\n  border-bottom: 1px solid #cccccc;\n}\ntr:last-child {\n  border-bottom: 0px;\n}\ntd {\n  border-right: 1px solid #cccccc;\n  padding: 10px;\n  transition: all 0.2s;\n  font-size: 14px;\n}\ntd:first-child {\n  font-size: 12px;\n  font-family: monospace\n\n}\ntd:last-child {\n  border-right: 0px;\n}\ntd.selected {\n  background: #d7e4ef;\n  z-index: ;\n}\ntd input {\n  font-size: 14px;\n  background: none;\n  outline: none;\n  border: 0;\n  display: table-cell;\n  height: 100%;\n  width: 100%;\n}\ntd input:focus {\n  box-shadow: 0 1px 0 steelblue;\n  color: steelblue;\n}\n::-moz-selection {\n  background: steelblue;\n  color: white;\n}\n::selection {\n  background: steelblue;\n  color: white;\n}\n'}),"\n",(0,jsx_runtime.jsx)(_components.h1,{children:(0,jsx_runtime.jsx)(_components.code,{children:"useData"})}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["With ",(0,jsx_runtime.jsx)(_components.code,{children:"useData"}),", you can get the current status of data"]}),"\n",(0,jsx_runtime.jsxs)(_components.h4,{children:["Features provided by ",(0,jsx_runtime.jsx)(_components.code,{children:"useData"})]}),"\n",(0,jsx_runtime.jsxs)("table",{children:[(0,jsx_runtime.jsx)("thead",{children:(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)("strong",{children:"Description"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)("strong",{children:"Parameters"})})]})}),(0,jsx_runtime.jsxs)("tbody",{children:[(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"data"})}),(0,jsx_runtime.jsxs)("td",{children:[(0,jsx_runtime.jsxs)(_components.p,{children:["Allows you to know the current pixel data. The variable type is ",(0,jsx_runtime.jsx)(_components.code,{children:"Map<number, Map<number, PixelData>>"})]}),(0,jsx_runtime.jsx)(_components.pre,{children:(0,jsx_runtime.jsx)(_components.code,{className:"language-ts",children:"type PixelData = {\n  color: string;\n};\n"})})]}),(0,jsx_runtime.jsx)("td",{})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"dataArray"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsxs)(_components.p,{children:["Allows you to know the 2d array of the pixel data. If you are not fond with Maps, you may use this instead. The variable type is ",(0,jsx_runtime.jsx)(_components.code,{children:"<Array<Array<PixelModifyItem>>>"})]})}),(0,jsx_runtime.jsx)("td",{})]})]})]}),"\n",(0,jsx_runtime.jsx)(_components.h3,{children:"Examples"}),"\n",(0,jsx_runtime.jsxs)(_components.h4,{children:["1. Data Array Example ",(0,jsx_runtime.jsx)(_components.code,{children:"dataArray"})]}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["With ",(0,jsx_runtime.jsx)(_components.code,{children:"dataArray"})," method, you can check the current status of the canvas"]}),"\n",(0,jsx_runtime.jsx)(useDataComponents_DataInformation,{}),"\n",(0,jsx_runtime.jsx)("div",{className:"subheading",children:"Example Source Codes"}),"\n",(0,jsx_runtime.jsx)("div",{className:"link-list",children:(0,jsx_runtime.jsxs)("a",{className:"link-item",href:"https://github.com/hunkim98/dotting/tree/main/stories/useDataComponents",target:"_blank",children:[(0,jsx_runtime.jsx)("img",{src:stackalt,alt:"Build"}),(0,jsx_runtime.jsx)("span",{children:(0,jsx_runtime.jsxs)(_components.p,{children:[(0,jsx_runtime.jsx)("strong",{children:"Github Source Code"}),"\nView the source code and contribute to the project!"]})})]})}),"\n",(0,jsx_runtime.jsx)("div",{className:"tip-wrapper"}),"\n",(0,jsx_runtime.jsx)(_components.pre,{children:(0,jsx_runtime.jsx)(_components.code,{})})]})}function MDXContent(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},MDXLayout=Object.assign({},(0,dist_esm.ah)(),props.components).wrapper;return MDXLayout?(0,jsx_runtime.jsx)(MDXLayout,Object.assign({},props,{children:(0,jsx_runtime.jsx)(_createMdxContent,props)})):_createMdxContent(props)}var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hooks/useData",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return react.createElement(esm.aT,{mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},react.createElement(MDXContent,null))}});const useData_stories=componentMeta;var __namedExportsOrder=["__page"]},"./stories/useDotting.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,__page:()=>__page,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_assets_stackalt_svg__WEBPACK_IMPORTED_MODULE_12__=(__webpack_require__("./stories/assets/code-brackets.svg"),__webpack_require__("./stories/assets/colors.svg"),__webpack_require__("./stories/assets/comments.svg"),__webpack_require__("./stories/assets/direction.svg"),__webpack_require__("./stories/assets/flow.svg"),__webpack_require__("./stories/assets/plugin.svg"),__webpack_require__("./stories/assets/repo.svg"),__webpack_require__("./stories/assets/stackalt.svg")),_useDottingComponents__WEBPACK_IMPORTED_MODULE_14__=(__webpack_require__("./src/components/Dotting.tsx"),__webpack_require__("./stories/useDottingComponents/index.ts"));function _createMdxContent(props){var _components=Object.assign({h1:"h1",code:"code",p:"p",h4:"h4",pre:"pre",h3:"h3"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.ah)(),props.components);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__.h_,{title:"Hooks/useDotting"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("style",{children:'\n  .subheading {\n    --mediumdark: \'#999999\';\n    font-weight: 900;\n    font-size: 13px;\n    color: #999;\n    letter-spacing: 6px;\n    line-height: 24px;\n    text-transform: uppercase;\n    margin-bottom: 12px;\n    margin-top: 40px;\n    font-family: \'Nunito Sans\', \'Helvetica Neue\', Helvetica, Arial, sans-serif;\n  }\n\n  .link-list {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: 1fr 1fr;\n    row-gap: 10px;\n  }\n\n  @media (min-width: 620px) {\n    .link-list {\n      row-gap: 20px;\n      column-gap: 20px;\n      grid-template-columns: 1fr 1fr;\n    }\n  }\n\n  @media all and (-ms-high-contrast:none) {\n  .link-list {\n      display: -ms-grid;\n      -ms-grid-columns: 1fr 1fr;\n      -ms-grid-rows: 1fr 1fr;\n    }\n  }\n\n  .link-item {\n    display: block;\n    padding: 20px 30px 20px 15px;\n    border: 1px solid #00000010;\n    border-radius: 5px;\n    transition: background 150ms ease-out, border 150ms ease-out, transform 150ms ease-out;\n    color: #333333;\n    display: flex;\n    align-items: flex-start;\n  }\n\n  .link-item:hover {\n    border-color: #1EA7FD50;\n    transform: translate3d(0, -3px, 0);\n    box-shadow: rgba(0, 0, 0, 0.08) 0 3px 10px 0;\n  }\n\n  .link-item:active {\n    border-color: #1EA7FD;\n    transform: translate3d(0, 0, 0);\n  }\n\n  .link-item strong {\n    font-weight: 700;\n    display: block;\n    margin-bottom: 2px;\n  }\n  \n  .link-item img {\n    height: 40px;\n    width: 40px;\n    margin-right: 15px;\n    flex: none;\n  }\n\n  .link-item span {\n    font-size: 14px;\n    line-height: 20px;\n  }\n\n  .tip {\n    display: inline-block;\n    border-radius: 1em;\n    font-size: 11px;\n    line-height: 12px;\n    font-weight: 700;\n    background: #E7FDD8;\n    color: #66BF3C;\n    padding: 4px 12px;\n    margin-right: 10px;\n    vertical-align: top;\n  }\n\n  .tip-wrapper {\n    font-size: 13px;\n    line-height: 20px;\n    margin-top: 40px;\n    margin-bottom: 40px;\n  }\n\n  .tip-wrapper code {\n    font-size: 12px;\n    display: inline-block;\n  }\n  \ntable {\n  width: 100%;\n  border-collapse: collapse;\n  border: 1px solid #cccccc;\n  margin: 15px auto;\n  margin-bottom: 80px;\n  background: white;\n  color: #333333;\n  font-family: "Nunito Sans",-apple-system,".SFNSText-Regular","San Francisco",BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Helvetica,Arial,sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\nthead {\n  border-bottom: 1px solid #cccccc;\n}\n\ntable .css-1p8ieni {\n  margin: 0;\n}\n\nh4 {\n  margin-top: 15px;\n}\n\nth {\n  background: steelblue;\n  height: 54px;\n  width: 25%;\n  font-weight: lighter;\n  text-shadow: 0 1px 0 #38678f;\n  color: white;\n  border: 1px solid black;\n  box-shadow: inset 0px 1px 2px #cccccc;\n  transition: all 0.2s;\n}\ntr {\n  border-bottom: 1px solid #cccccc;\n}\ntr:last-child {\n  border-bottom: 0px;\n}\ntd {\n  border-right: 1px solid #cccccc;\n  padding: 10px;\n  transition: all 0.2s;\n  font-size: 14px;\n}\ntd:first-child {\n  font-size: 12px;\n  font-family: monospace\n\n}\ntd:last-child {\n  border-right: 0px;\n}\ntd.selected {\n  background: #d7e4ef;\n  z-index: ;\n}\ntd input {\n  font-size: 14px;\n  background: none;\n  outline: none;\n  border: 0;\n  display: table-cell;\n  height: 100%;\n  width: 100%;\n}\ntd input:focus {\n  box-shadow: 0 1px 0 steelblue;\n  color: steelblue;\n}\n::-moz-selection {\n  background: steelblue;\n  color: white;\n}\n::selection {\n  background: steelblue;\n  color: white;\n}\n'}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.h1,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"useDotting"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:["With ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"useDotting"}),", you can manipulate the grids."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.h4,{children:["Features provided by ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"useDotting"})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("table",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("thead",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("tr",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("strong",{children:"Description"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("strong",{children:"Parameters"})})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("tbody",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("tr",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"downloadImage(options?: ImageDownloadOptions)"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:"Allows you to download the pixel image"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("td",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.p,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"ImageDownloadOptions"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{className:"language-ts",children:"export interface ImageDownloadOptions {\n  isGridVisible?: boolean;\n}\n"})})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("tr",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"clear()"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:"Allows you to clear the canvas"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("tr",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"colorPixels(data: Array<PixelModifyItem>)"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.p,{children:"Allows you to color pixels on specific indices. If the index provided is\nnot in the grid, the grid first extends its grid and then colors it"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("td",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"Array<PixelModifyItem>"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"PixelModifyItem"})," is defined as follows:"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{className:"language-ts",children:"export interface PixelModifyItem {\n  rowIndex: number;\n  columnIndex: number;\n  color: string;\n}\n"})})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("tr",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"erasePixels(data: Array<{rowIndex: number; columnIndex: number}>)"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.p,{children:"Allows you to erase pixels on specific indices. If the index provided is\nnot in the grid, that data is ignored"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"Array<{rowIndex: number; columnIndex: number}>"})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("tr",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"setIndicatorPixels(indicators: Array<PixelModifyItem>)"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.p,{children:"Allows you to set the indicator pixels. If the index provided is not in\nthe grid, that data is ignored"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"Array<PixelModifyItem>"})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("tr",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"setData(data: Array<Array<PixelModifyItem>>)"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.p,{children:"Allows you to set the data of the pixel canvas. (The 2d array should be a square array)"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("td",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"Array<PixelModifyItem>"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"PixelModifyItem"})," is defined as follows:"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{className:"language-ts",children:"export interface PixelModifyItem {\n  rowIndex: number;\n  columnIndex: number;\n  color: string;\n}\n"})})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("tr",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"undo()"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.p,{children:"Allows you to undo the last action"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("tr",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"redo()"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.p,{children:"Allows you to redo the last action"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("td",{})]})]})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.h3,{children:"Examples"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.h4,{children:["1. Download Image Example ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"downloadImage()"})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:["With ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"downloadImage"})," method, you can download the image of the grid."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_useDottingComponents__WEBPACK_IMPORTED_MODULE_14__.sQ,{}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.h4,{children:["2. Change Pixel Color Example ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"colorPixels(data: PixelModifyData)"}),", ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"erasePixels(data: Array<{rowIndex: number; columnIndex: number}>)"})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:["With ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"colorPixels"})," method, you can change the color of specific pixels.\nThe ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"PixelModifyData"})," type is defined as follows:"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{className:"language-ts",children:"export type PixelModifyData = Array<PixelModifyItem>;\n\nexport interface PixelModifyItem {\n  rowIndex: number;\n  columnIndex: number;\n  color: string;\n}\n"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:["By passing an array of ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"PixelModifyItem"})," you are able to color the pixels.\nIf the rowIndex and columnIndex of the pixel is not in the grid, the grid\nfirst extends its grid and then colors it."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:["You can also erase pixels using ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"erasePixels"})," method. The ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"erasePixels"})," method\ntakes an array of ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"{rowIndex: number; columnIndex: number}"})," as a parameter. If the rowIndex and\ncolumnIndex of the pixel is not in the grid, that data is ignored."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_useDottingComponents__WEBPACK_IMPORTED_MODULE_14__.aF,{}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.h4,{children:["3. Clear Example ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"clear()"})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:["With ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"clear"})," method, you can clear all the pixels in the grid."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_useDottingComponents__WEBPACK_IMPORTED_MODULE_14__.UZ,{}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.h4,{children:["4. Set Indicator Pixels ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"setIndicatorPixels(data: Array<PixelModifyItem>)"})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:["With ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"setIndicatorPixels"})," method, you can set the indicator pixels. The indicator pixels are\nthe pixels that are shwon as indicators in the grid. Their opacity is lower than the real pixel data.\nThey do not affect the data of the grid."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:["By the way, if you want to initially have the indicator pixels before the canvas mounts,\nyou need to pass the ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"initIndicatorData"})," prop to the ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"Dotting"})," component.\nThe data type of the ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"initIndicatorData"})," is the ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"Array<PixelModifyItem>"}),"."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_useDottingComponents__WEBPACK_IMPORTED_MODULE_14__.Z_,{}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.h4,{children:["5. Undo and Redo Example ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"undo()"}),", ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"redo()"})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:["With ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"undo"})," and ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"redo"})," methods, you can undo and redo the last action."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_useDottingComponents__WEBPACK_IMPORTED_MODULE_14__.QA,{}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.h4,{children:["6. SetData Example ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"setData(data: Array<Array<PixelModifyItem>>)"})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:["With ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{children:"setData"}),", you can set the data of the pixel canvas. (The 2d array should be a square array)"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_useDottingComponents__WEBPACK_IMPORTED_MODULE_14__.P$,{}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"subheading",children:"Example Source Codes"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"link-list",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("a",{className:"link-item",href:"https://github.com/hunkim98/dotting/tree/main/stories/useDottingComponents",target:"_blank",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("img",{src:_assets_stackalt_svg__WEBPACK_IMPORTED_MODULE_12__,alt:"Build"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("span",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_components.p,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("strong",{children:"Github Source Code"}),"\nView the source code and contribute to the project!"]})})]})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"tip-wrapper"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components.code,{})})]})}function MDXContent(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},MDXLayout=Object.assign({},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.ah)(),props.components).wrapper;return MDXLayout?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(MDXLayout,Object.assign({},props,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_createMdxContent,props)})):_createMdxContent(props)}var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hooks/useDotting",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return react__WEBPACK_IMPORTED_MODULE_1__.createElement(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__.aT,{mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},react__WEBPACK_IMPORTED_MODULE_1__.createElement(MDXContent,null))}});const __WEBPACK_DEFAULT_EXPORT__=componentMeta;var __namedExportsOrder=["__page"]},"./stories/useGrids.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,__page:()=>__page,default:()=>useGrids_stories});__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var react=__webpack_require__("./node_modules/react/index.js"),esm=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),dist_esm=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),stackalt=(__webpack_require__("./stories/assets/code-brackets.svg"),__webpack_require__("./stories/assets/colors.svg"),__webpack_require__("./stories/assets/comments.svg"),__webpack_require__("./stories/assets/direction.svg"),__webpack_require__("./stories/assets/flow.svg"),__webpack_require__("./stories/assets/plugin.svg"),__webpack_require__("./stories/assets/repo.svg"),__webpack_require__("./stories/assets/stackalt.svg")),Dotting=__webpack_require__("./src/components/Dotting.tsx"),useGrids=(__webpack_require__("./stories/useBrushComponents/index.ts"),__webpack_require__("./src/hooks/useGrids.ts"));const useGridComponents_GridInformation=function GridInformation(){var ref=(0,react.useRef)(null),_useGrids=(0,useGrids.Z)(ref),dimensions=_useGrids.dimensions,indices=_useGrids.indices;return react.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",fontFamily:"'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif"}},react.createElement(Dotting.Z,{ref,width:"100%",height:300}),react.createElement("div",null,"column count: ",dimensions.columnCount),react.createElement("div",null,"row count: ",dimensions.rowCount),react.createElement("div",null,"top row index: ",indices.topRowIndex),react.createElement("div",null,"left column index: ",indices.leftColumnIndex),react.createElement("div",null,"bottom row index: ",indices.bottomRowIndex),react.createElement("div",null,"right column index: ",indices.rightColumnIndex))};function _createMdxContent(props){var _components=Object.assign({h1:"h1",code:"code",p:"p",h4:"h4",h3:"h3",pre:"pre"},(0,dist_esm.ah)(),props.components);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(esm.h_,{title:"Hooks/useGrids"}),"\n",(0,jsx_runtime.jsx)("style",{children:'\n  .subheading {\n    --mediumdark: \'#999999\';\n    font-weight: 900;\n    font-size: 13px;\n    color: #999;\n    letter-spacing: 6px;\n    line-height: 24px;\n    text-transform: uppercase;\n    margin-bottom: 12px;\n    margin-top: 40px;\n    font-family: \'Nunito Sans\', \'Helvetica Neue\', Helvetica, Arial, sans-serif;\n  }\n\n  .link-list {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: 1fr 1fr;\n    row-gap: 10px;\n  }\n\n  @media (min-width: 620px) {\n    .link-list {\n      row-gap: 20px;\n      column-gap: 20px;\n      grid-template-columns: 1fr 1fr;\n    }\n  }\n\n  @media all and (-ms-high-contrast:none) {\n  .link-list {\n      display: -ms-grid;\n      -ms-grid-columns: 1fr 1fr;\n      -ms-grid-rows: 1fr 1fr;\n    }\n  }\n\n  .link-item {\n    display: block;\n    padding: 20px 30px 20px 15px;\n    border: 1px solid #00000010;\n    border-radius: 5px;\n    transition: background 150ms ease-out, border 150ms ease-out, transform 150ms ease-out;\n    color: #333333;\n    display: flex;\n    align-items: flex-start;\n  }\n\n  .link-item:hover {\n    border-color: #1EA7FD50;\n    transform: translate3d(0, -3px, 0);\n    box-shadow: rgba(0, 0, 0, 0.08) 0 3px 10px 0;\n  }\n\n  .link-item:active {\n    border-color: #1EA7FD;\n    transform: translate3d(0, 0, 0);\n  }\n\n  .link-item strong {\n    font-weight: 700;\n    display: block;\n    margin-bottom: 2px;\n  }\n  \n  .link-item img {\n    height: 40px;\n    width: 40px;\n    margin-right: 15px;\n    flex: none;\n  }\n\n  .link-item span {\n    font-size: 14px;\n    line-height: 20px;\n  }\n\n  .tip {\n    display: inline-block;\n    border-radius: 1em;\n    font-size: 11px;\n    line-height: 12px;\n    font-weight: 700;\n    background: #E7FDD8;\n    color: #66BF3C;\n    padding: 4px 12px;\n    margin-right: 10px;\n    vertical-align: top;\n  }\n\n  .tip-wrapper {\n    font-size: 13px;\n    line-height: 20px;\n    margin-top: 40px;\n    margin-bottom: 40px;\n  }\n\n  .tip-wrapper code {\n    font-size: 12px;\n    display: inline-block;\n  }\n  \ntable {\n  width: 100%;\n  border-collapse: collapse;\n  border: 1px solid #cccccc;\n  margin: 15px auto;\n  margin-bottom: 80px;\n  background: white;\n  color: #333333;\n  font-family: "Nunito Sans",-apple-system,".SFNSText-Regular","San Francisco",BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Helvetica,Arial,sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\nthead {\n  border-bottom: 1px solid #cccccc;\n}\n\ntable .css-1p8ieni {\n  margin: 0;\n}\n\nh4 {\n  margin-top: 15px;\n}\n\nth {\n  background: steelblue;\n  height: 54px;\n  width: 25%;\n  font-weight: lighter;\n  text-shadow: 0 1px 0 #38678f;\n  color: white;\n  border: 1px solid black;\n  box-shadow: inset 0px 1px 2px #cccccc;\n  transition: all 0.2s;\n}\ntr {\n  border-bottom: 1px solid #cccccc;\n}\ntr:last-child {\n  border-bottom: 0px;\n}\ntd {\n  border-right: 1px solid #cccccc;\n  padding: 10px;\n  transition: all 0.2s;\n  font-size: 14px;\n}\ntd:first-child {\n  font-size: 12px;\n  font-family: monospace\n\n}\ntd:last-child {\n  border-right: 0px;\n}\ntd.selected {\n  background: #d7e4ef;\n  z-index: ;\n}\ntd input {\n  font-size: 14px;\n  background: none;\n  outline: none;\n  border: 0;\n  display: table-cell;\n  height: 100%;\n  width: 100%;\n}\ntd input:focus {\n  box-shadow: 0 1px 0 steelblue;\n  color: steelblue;\n}\n::-moz-selection {\n  background: steelblue;\n  color: white;\n}\n::selection {\n  background: steelblue;\n  color: white;\n}\n'}),"\n",(0,jsx_runtime.jsx)(_components.h1,{children:(0,jsx_runtime.jsx)(_components.code,{children:"useGrids"})}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["With ",(0,jsx_runtime.jsx)(_components.code,{children:"useGrids"}),", you can get information about the the canvas columns and rows.\nYou also get information about the indices of the top row, left column, bottom row, and the right column."]}),"\n",(0,jsx_runtime.jsxs)(_components.h4,{children:["Features provided by ",(0,jsx_runtime.jsx)(_components.code,{children:"useGrids"})]}),"\n",(0,jsx_runtime.jsxs)("table",{children:[(0,jsx_runtime.jsx)("thead",{children:(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)("strong",{children:"Description"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)("strong",{children:"Parameters"})})]})}),(0,jsx_runtime.jsxs)("tbody",{children:[(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"dimensions"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsxs)(_components.p,{children:["Allows you to know the ",(0,jsx_runtime.jsx)(_components.code,{children:"columnCount"})," and ",(0,jsx_runtime.jsx)(_components.code,{children:"rowCount"})," of the current grid"]})}),(0,jsx_runtime.jsx)("td",{})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"indices"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsxs)(_components.p,{children:["Allows you to know the ",(0,jsx_runtime.jsx)(_components.code,{children:"topRowIndex"}),", ",(0,jsx_runtime.jsx)(_components.code,{children:"bottomRowIndex"}),",\n",(0,jsx_runtime.jsx)(_components.code,{children:"leftColumnIndex"}),", and ",(0,jsx_runtime.jsx)(_components.code,{children:"rightColumnIndex"})," of the grids. This is useful\nwhen you want to implement ",(0,jsx_runtime.jsx)(_components.code,{children:"colorPixels"})," method provided by ",(0,jsx_runtime.jsx)(_components.code,{children:"useDotting"}),"\nhook."]})}),(0,jsx_runtime.jsx)("td",{})]})]})]}),"\n",(0,jsx_runtime.jsx)(_components.h3,{children:"Examples"}),"\n",(0,jsx_runtime.jsxs)(_components.h4,{children:["1. Grid Information Example ",(0,jsx_runtime.jsx)(_components.code,{children:"dimensions"}),", ",(0,jsx_runtime.jsx)(_components.code,{children:"indices"})]}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["With ",(0,jsx_runtime.jsx)(_components.code,{children:"dimensions"})," and ",(0,jsx_runtime.jsx)(_components.code,{children:"indices"}),", you can get the information about the current grid."]}),"\n",(0,jsx_runtime.jsx)(useGridComponents_GridInformation,{}),"\n",(0,jsx_runtime.jsx)("div",{className:"subheading",children:"Example Source Codes"}),"\n",(0,jsx_runtime.jsx)("div",{className:"link-list",children:(0,jsx_runtime.jsxs)("a",{className:"link-item",href:"https://github.com/hunkim98/dotting/tree/main/stories/useGridComponents",target:"_blank",children:[(0,jsx_runtime.jsx)("img",{src:stackalt,alt:"Build"}),(0,jsx_runtime.jsx)("span",{children:(0,jsx_runtime.jsxs)(_components.p,{children:[(0,jsx_runtime.jsx)("strong",{children:"Github Source Code"}),"\nView the source code and contribute to the project!"]})})]})}),"\n",(0,jsx_runtime.jsx)("div",{className:"tip-wrapper"}),"\n",(0,jsx_runtime.jsx)(_components.pre,{children:(0,jsx_runtime.jsx)(_components.code,{})})]})}function MDXContent(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},MDXLayout=Object.assign({},(0,dist_esm.ah)(),props.components).wrapper;return MDXLayout?(0,jsx_runtime.jsx)(MDXLayout,Object.assign({},props,{children:(0,jsx_runtime.jsx)(_createMdxContent,props)})):_createMdxContent(props)}var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hooks/useGrids",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return react.createElement(esm.aT,{mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},react.createElement(MDXContent,null))}});const useGrids_stories=componentMeta;var __namedExportsOrder=["__page"]},"./stories/useHandlers.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,__page:()=>__page,default:()=>useHandlers_stories});__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var react=__webpack_require__("./node_modules/react/index.js"),esm=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),dist_esm=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),stackalt=(__webpack_require__("./stories/assets/code-brackets.svg"),__webpack_require__("./stories/assets/colors.svg"),__webpack_require__("./stories/assets/comments.svg"),__webpack_require__("./stories/assets/direction.svg"),__webpack_require__("./stories/assets/flow.svg"),__webpack_require__("./stories/assets/plugin.svg"),__webpack_require__("./stories/assets/repo.svg"),__webpack_require__("./stories/assets/stackalt.svg")),Dotting=__webpack_require__("./src/components/Dotting.tsx"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),useHandlers=__webpack_require__("./src/hooks/useHandlers.ts");const useHandlersComponents_CanvasElementEvents=function CanvasElementEvents(){var ref=(0,react.useRef)(null),_useHandlers=(0,useHandlers.Z)(ref),addCanvasElementEventListener=_useHandlers.addCanvasElementEventListener,removeCanvasElementEventListener=_useHandlers.removeCanvasElementEventListener,_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),isMouseDown=_useState2[0],setIsMouseDown=_useState2[1];return(0,react.useEffect)((function(){var handleMouseDown=function handleMouseDown(){setIsMouseDown(!0)},handleMouseUp=function handleMouseUp(){setIsMouseDown(!1)};return addCanvasElementEventListener("mousedown",handleMouseDown),addCanvasElementEventListener("mouseup",handleMouseUp),function(){removeCanvasElementEventListener("mousedown",handleMouseDown),removeCanvasElementEventListener("mouseup",handleMouseUp)}}),[]),react.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",fontFamily:"'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif"}},react.createElement(Dotting.Z,{ref,width:"100%",height:300}),react.createElement("div",{style:{marginTop:25,display:"flex",alignItems:"center",flexDirection:"column",marginBottom:50}},react.createElement("strong",null,"Is Mouse Down?"),react.createElement("div",null,isMouseDown?"Yes":"No")))};const useHandlersComponents_HoverPixelListener=function HoverPixelListener(){var ref=(0,react.useRef)(null),_useHandlers=(0,useHandlers.Z)(ref),addHoverPixelChangeListener=_useHandlers.addHoverPixelChangeListener,removeHoverPixelChangeListener=_useHandlers.removeHoverPixelChangeListener,_useState=(0,react.useState)(null),_useState2=(0,slicedToArray.Z)(_useState,2),hoveredPixel=_useState2[0],setHoveredPixel=_useState2[1],handleHoverPixelChangeHandler=function handleHoverPixelChangeHandler(_ref){var indices=_ref.indices;setHoveredPixel(indices)};return(0,react.useEffect)((function(){return addHoverPixelChangeListener(handleHoverPixelChangeHandler),function(){removeHoverPixelChangeListener(handleHoverPixelChangeHandler)}}),[]),react.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",fontFamily:"'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif"}},react.createElement(Dotting.Z,{ref,width:"100%",height:300}),react.createElement("div",{style:{marginTop:25,display:"flex",alignItems:"center",flexDirection:"column",marginBottom:50}},react.createElement("strong",null,"Hovered Pixel"),hoveredPixel&&react.createElement("div",null,"rowIndex: ",hoveredPixel.rowIndex,", columnIndex:"," ",hoveredPixel.columnIndex)))};__webpack_require__("./node_modules/core-js/modules/es.array.map.js");const useHandlersComponents_StrokeListener=function StrokeListener(){var ref=(0,react.useRef)(null),_useHandlers=(0,useHandlers.Z)(ref),addStrokeEndListener=_useHandlers.addStrokeEndListener,removeStrokeEndListener=_useHandlers.removeStrokeEndListener,_useState=(0,react.useState)([]),_useState2=(0,slicedToArray.Z)(_useState,2),strokedPixels=_useState2[0],setStrokedPixels=_useState2[1],handleStrokeEnd=function handleStrokeEnd(_ref){var strokedPixels=_ref.strokedPixels;_ref.data,_ref.strokeTool;setStrokedPixels(strokedPixels)};return(0,react.useEffect)((function(){return addStrokeEndListener(handleStrokeEnd),function(){removeStrokeEndListener(handleStrokeEnd)}}),[]),react.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",fontFamily:"'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif"}},react.createElement(Dotting.Z,{ref,width:"100%",height:300}),react.createElement("div",{style:{marginTop:25,display:"flex",alignItems:"center",flexDirection:"column",marginBottom:50}},react.createElement("div",null,react.createElement("strong",null,"Stroked Pixels")),strokedPixels.map((function(item,index){return react.createElement("div",{key:index},"rowIndex: ",item.rowIndex,", columnIndex: ",item.columnIndex,", color:"," ",item.color)}))))};function _createMdxContent(props){var _components=Object.assign({h1:"h1",code:"code",p:"p",ul:"ul",li:"li",h4:"h4",pre:"pre",h3:"h3"},(0,dist_esm.ah)(),props.components);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(esm.h_,{title:"Hooks/useHandlers"}),"\n",(0,jsx_runtime.jsx)("style",{children:'\n  .subheading {\n    --mediumdark: \'#999999\';\n    font-weight: 900;\n    font-size: 13px;\n    color: #999;\n    letter-spacing: 6px;\n    line-height: 24px;\n    text-transform: uppercase;\n    margin-bottom: 12px;\n    margin-top: 40px;\n    font-family: \'Nunito Sans\', \'Helvetica Neue\', Helvetica, Arial, sans-serif;\n  }\n\n  .link-list {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: 1fr 1fr;\n    row-gap: 10px;\n  }\n\n  @media (min-width: 620px) {\n    .link-list {\n      row-gap: 20px;\n      column-gap: 20px;\n      grid-template-columns: 1fr 1fr;\n    }\n  }\n\n  @media all and (-ms-high-contrast:none) {\n  .link-list {\n      display: -ms-grid;\n      -ms-grid-columns: 1fr 1fr;\n      -ms-grid-rows: 1fr 1fr;\n    }\n  }\n\n  .link-item {\n    display: block;\n    padding: 20px 30px 20px 15px;\n    border: 1px solid #00000010;\n    border-radius: 5px;\n    transition: background 150ms ease-out, border 150ms ease-out, transform 150ms ease-out;\n    color: #333333;\n    display: flex;\n    align-items: flex-start;\n  }\n\n  .link-item:hover {\n    border-color: #1EA7FD50;\n    transform: translate3d(0, -3px, 0);\n    box-shadow: rgba(0, 0, 0, 0.08) 0 3px 10px 0;\n  }\n\n  .link-item:active {\n    border-color: #1EA7FD;\n    transform: translate3d(0, 0, 0);\n  }\n\n  .link-item strong {\n    font-weight: 700;\n    display: block;\n    margin-bottom: 2px;\n  }\n  \n  .link-item img {\n    height: 40px;\n    width: 40px;\n    margin-right: 15px;\n    flex: none;\n  }\n\n  .link-item span {\n    font-size: 14px;\n    line-height: 20px;\n  }\n\n  .tip {\n    display: inline-block;\n    border-radius: 1em;\n    font-size: 11px;\n    line-height: 12px;\n    font-weight: 700;\n    background: #E7FDD8;\n    color: #66BF3C;\n    padding: 4px 12px;\n    margin-right: 10px;\n    vertical-align: top;\n  }\n\n  .tip-wrapper {\n    font-size: 13px;\n    line-height: 20px;\n    margin-top: 40px;\n    margin-bottom: 40px;\n  }\n\n  .tip-wrapper code {\n    font-size: 12px;\n    display: inline-block;\n  }\n  \ntable {\n  width: 100%;\n  border-collapse: collapse;\n  border: 1px solid #cccccc;\n  margin: 15px auto;\n  margin-bottom: 80px;\n  background: white;\n  color: #333333;\n  font-family: "Nunito Sans",-apple-system,".SFNSText-Regular","San Francisco",BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Helvetica,Arial,sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\nthead {\n  border-bottom: 1px solid #cccccc;\n}\n\ntable .css-1p8ieni {\n  margin: 0;\n}\n\nh4 {\n  margin-top: 15px;\n}\n\nth {\n  background: steelblue;\n  height: 54px;\n  width: 25%;\n  font-weight: lighter;\n  text-shadow: 0 1px 0 #38678f;\n  color: white;\n  border: 1px solid black;\n  box-shadow: inset 0px 1px 2px #cccccc;\n  transition: all 0.2s;\n}\ntr {\n  border-bottom: 1px solid #cccccc;\n}\ntr:last-child {\n  border-bottom: 0px;\n}\ntd {\n  border-right: 1px solid #cccccc;\n  padding: 10px;\n  transition: all 0.2s;\n  font-size: 14px;\n}\ntd:first-child {\n  font-size: 12px;\n  font-family: monospace\n\n}\ntd:last-child {\n  border-right: 0px;\n}\ntd.selected {\n  background: #d7e4ef;\n  z-index: ;\n}\ntd input {\n  font-size: 14px;\n  background: none;\n  outline: none;\n  border: 0;\n  display: table-cell;\n  height: 100%;\n  width: 100%;\n}\ntd input:focus {\n  box-shadow: 0 1px 0 steelblue;\n  color: steelblue;\n}\n::-moz-selection {\n  background: steelblue;\n  color: white;\n}\n::selection {\n  background: steelblue;\n  color: white;\n}\n'}),"\n",(0,jsx_runtime.jsx)(_components.h1,{children:(0,jsx_runtime.jsx)(_components.code,{children:"useHandlers"})}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["With ",(0,jsx_runtime.jsx)(_components.code,{children:"useHandlers"}),", you can add event listeners to the canvas.\nThe events that you can listen to are:"]}),"\n",(0,jsx_runtime.jsxs)(_components.ul,{children:["\n",(0,jsx_runtime.jsx)(_components.li,{children:(0,jsx_runtime.jsx)(_components.code,{children:"data change"})}),"\n",(0,jsx_runtime.jsx)(_components.li,{children:(0,jsx_runtime.jsx)(_components.code,{children:"grid change"})}),"\n",(0,jsx_runtime.jsx)(_components.li,{children:(0,jsx_runtime.jsx)(_components.code,{children:"stroke end"})}),"\n",(0,jsx_runtime.jsx)(_components.li,{children:(0,jsx_runtime.jsx)(_components.code,{children:"hover pixel change"})}),"\n",(0,jsx_runtime.jsx)(_components.li,{children:(0,jsx_runtime.jsx)(_components.code,{children:"brush change"})}),"\n"]}),"\n",(0,jsx_runtime.jsxs)(_components.h4,{children:["Features provided by ",(0,jsx_runtime.jsx)(_components.code,{children:"useHandlers"})]}),"\n",(0,jsx_runtime.jsxs)("table",{children:[(0,jsx_runtime.jsx)("thead",{children:(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)("strong",{children:"Description"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)("strong",{children:"Parameters"})})]})}),(0,jsx_runtime.jsxs)("tbody",{children:[(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"addDataChangeListener(listener: CanvasDataChangeHandler)"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.p,{children:"Allows you to listen to data change events."})}),(0,jsx_runtime.jsxs)("td",{children:[(0,jsx_runtime.jsx)(_components.p,{children:(0,jsx_runtime.jsx)(_components.code,{children:"CanvasDataChangeHandler"})}),(0,jsx_runtime.jsx)(_components.pre,{children:(0,jsx_runtime.jsx)(_components.code,{className:"language-ts",children:"export type CanvasDataChangeParams = { data: DottingData };\nexport type CanvasDataChangeHandler = (params: CanvasDataChangeParams) => void;\nexport type DottingData = Map<number, Map<number, PixelData>>;\nexport type PixelData = {\n    color: string;\n};\n"})})]})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"removeDataChangeListener(listener: CanvasDataChangeHandler)"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.p,{children:"Allows you to remove a data change listener"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"CanvasDataChangeHandler"})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"addGridChangeListener(listener: CanvasGridChangeHandler)"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.p,{children:"Allows you to the listen to grid change events."})}),(0,jsx_runtime.jsxs)("td",{children:[(0,jsx_runtime.jsx)(_components.p,{children:(0,jsx_runtime.jsx)(_components.code,{children:"CanvasGridChangeHandler"})}),(0,jsx_runtime.jsx)(_components.pre,{children:(0,jsx_runtime.jsx)(_components.code,{className:"language-ts",children:"export type CanvasGridChangeParams = {\n  dimensions: {\n    columnCount: number;\n    rowCount: number;\n  };\n  indices: {\n    topRowIndex: number;\n    bottomRowIndex: number;\n    leftColumnIndex: number;\n    rightColumnIndex: number;\n  };\n};\n\nexport type CanvasGridChangeHandler = (params: CanvasGridChangeParams) => void;\n"})})]})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"removeGridChangeListener(listener: CanvasGridChangeHandler)"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.p,{children:"Allows you to remove a grid change listener"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"CanvasGridChangeHandler"})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"addBrushChangeListener(listener: CanvasBrushChangeHandler)"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.p,{children:"Allows you to listen to brush change events"})}),(0,jsx_runtime.jsxs)("td",{children:[(0,jsx_runtime.jsx)(_components.p,{children:(0,jsx_runtime.jsx)(_components.code,{children:"CanvasBrushChangeHandler"})}),(0,jsx_runtime.jsx)(_components.pre,{children:(0,jsx_runtime.jsx)(_components.code,{className:"language-ts",children:'export type CanvasBrushChangeParams = {\n  brushColor: string;\n  brushTool: BrushTool;\n};\n\nexport type CanvasBrushChangeHandler = (\n  params: CanvasBrushChangeParams,\n) => void;\n\nexport enum BrushTool {\n  DOT = "DOT",\n  ERASER = "ERASER",\n  PAINT_BUCKET = "PAINT_BUCKET",\n  SELECT = "SELECT",\n}\n'})})]})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"removeBrushChangeListener(listener: CanvasBrushChangeHandler)"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.p,{children:"Allows you to remove a brush change listener"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"CanvasBrushChangeHandler"})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"addStrokeEndListener(listener: CanvasStrokeEndHandler)"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.p,{children:"Allows you to add a listener to stroke end events"})}),(0,jsx_runtime.jsxs)("td",{children:[(0,jsx_runtime.jsx)(_components.p,{children:(0,jsx_runtime.jsx)(_components.code,{children:"CanvasStrokeEndHandler"})}),(0,jsx_runtime.jsx)(_components.pre,{children:(0,jsx_runtime.jsx)(_components.code,{className:"language-ts",children:"\nexport type CanvasStrokeEndParams = {\n  strokedPixels: Array<ColorChangeItem>;\n  data: DottingData;\n  strokeTool: BrushTool;\n};\n\nexport type CanvasStrokeEndHandler = (params: CanvasStrokeEndParams) => void;\n\nexport interface ColorChangeItem {\n    rowIndex: number;\n    columnIndex: number;\n    color: string;\n    previousColor: string;\n}\nexport type DottingData = Map<number, Map<number, PixelData>>;\nexport type PixelData = {\n    color: string;\n};\n"})})]})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"removeStrokeEndListener(listener: CanvasStrokeEndHandler)"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.p,{children:"Allows you to remove a stroke end listener"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"CanvasStrokeEndHandler"})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"addHoverPixelChangeListener(listener: CanvasHoverPixelChangeHandler)"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.p,{children:"Allows you to listen to hover pixel change events"})}),(0,jsx_runtime.jsxs)("td",{children:[(0,jsx_runtime.jsx)(_components.p,{children:(0,jsx_runtime.jsx)(_components.code,{children:"CanvasHoverPixelChangeHandler"})}),(0,jsx_runtime.jsx)(_components.pre,{children:(0,jsx_runtime.jsx)(_components.code,{className:"language-ts",children:"export type CanvasHoverPixelChangeHandler = ({\n  indices: {\n    rowIndex: number;\n    columnIndex: number;\n  } | null\n}) => void;\n"})})]})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"removeHoverPixelChangeListener(listener: CanvasHoverPixelChangeHandler)"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.p,{children:"Allows you to remove pixel change listener"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"CanvasHoverPixelChangeHandler"})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"addCanvasElementEventListener(event: string, listener: EventListenerOrEventListenerObject) "})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsxs)(_components.p,{children:["Allows you to directly add event listeners to the canvas element (E.g. ",(0,jsx_runtime.jsx)(_components.code,{children:"mousemove"}),")"]})}),(0,jsx_runtime.jsxs)("td",{children:[(0,jsx_runtime.jsx)(_components.code,{children:"string"}),", ",(0,jsx_runtime.jsx)(_components.code,{children:"EventListenerOrEventListenerObject"})]})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.code,{children:"removeCanvasElementEventListener(event: string, listener: EventListenerOrEventListenerObject)"})}),(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsx)(_components.p,{children:"Allows you to directly remove event listeners from the canvas element"})}),(0,jsx_runtime.jsxs)("td",{children:[(0,jsx_runtime.jsx)(_components.code,{children:"string"}),", ",(0,jsx_runtime.jsx)(_components.code,{children:"EventListenerOrEventListenerObject"})]})]})]})]}),"\n",(0,jsx_runtime.jsx)(_components.h3,{children:"Examples"}),"\n",(0,jsx_runtime.jsxs)(_components.h4,{children:["1. Stroke end listener ",(0,jsx_runtime.jsx)(_components.code,{children:"addStrokeEndListener"}),", ",(0,jsx_runtime.jsx)(_components.code,{children:"removeStrokeEndListener"})]}),"\n",(0,jsx_runtime.jsx)(_components.p,{children:"With stroke end related listeners, you can observer the changes when the user ends the stroke."}),"\n",(0,jsx_runtime.jsx)(useHandlersComponents_StrokeListener,{}),"\n",(0,jsx_runtime.jsxs)(_components.h4,{children:["2. Hover Pixel Change Listener ",(0,jsx_runtime.jsx)(_components.code,{children:"addHoverPixelChangeListener"}),", ",(0,jsx_runtime.jsx)(_components.code,{children:"removeHoverPixelChangeListener"})]}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["With the hover pixel change listener, you can observe the changes when the user hovers over the canvas.\nWhen there is no hovered pixel, the return value will be ",(0,jsx_runtime.jsx)(_components.code,{children:"null"})]}),"\n",(0,jsx_runtime.jsx)(useHandlersComponents_HoverPixelListener,{}),"\n",(0,jsx_runtime.jsxs)(_components.h4,{children:["3. Canvas Element Custom Event Listener ",(0,jsx_runtime.jsx)(_components.code,{children:"addCanvasElementEventListener"}),", ",(0,jsx_runtime.jsx)(_components.code,{children:"removeCanvasElementEventListener"})]}),"\n",(0,jsx_runtime.jsx)(_components.p,{children:"You can also directly add event listeners to the canvas element.\nThis is useful when you want to listen to events that are not provided by the library."}),"\n",(0,jsx_runtime.jsx)(useHandlersComponents_CanvasElementEvents,{}),"\n",(0,jsx_runtime.jsx)("div",{className:"subheading",children:"Example Source Codes"}),"\n",(0,jsx_runtime.jsx)("div",{className:"link-list",children:(0,jsx_runtime.jsxs)("a",{className:"link-item",href:"https://github.com/hunkim98/dotting/tree/main/stories/useHandlersComponent",target:"_blank",children:[(0,jsx_runtime.jsx)("img",{src:stackalt,alt:"Build"}),(0,jsx_runtime.jsx)("span",{children:(0,jsx_runtime.jsxs)(_components.p,{children:[(0,jsx_runtime.jsx)("strong",{children:"Github Source Code"}),"\nView the source code and contribute to the project!"]})})]})}),"\n",(0,jsx_runtime.jsx)("div",{className:"tip-wrapper"}),"\n",(0,jsx_runtime.jsx)(_components.pre,{children:(0,jsx_runtime.jsx)(_components.code,{})})]})}function MDXContent(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},MDXLayout=Object.assign({},(0,dist_esm.ah)(),props.components).wrapper;return MDXLayout?(0,jsx_runtime.jsx)(MDXLayout,Object.assign({},props,{children:(0,jsx_runtime.jsx)(_createMdxContent,props)})):_createMdxContent(props)}var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hooks/useHandlers",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return react.createElement(esm.aT,{mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},react.createElement(MDXContent,null))}});const useHandlers_stories=componentMeta;var __namedExportsOrder=["__page"]},"./stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Ctsx%7Cmdx%7Cjsx))$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./Dotting.stories.tsx":"./stories/Dotting.stories.tsx","./Hooks.stories.mdx":"./stories/Hooks.stories.mdx","./Introduction.stories.mdx":"./stories/Introduction.stories.mdx","./useBrush.stories.mdx":"./stories/useBrush.stories.mdx","./useData.stories.mdx":"./stories/useData.stories.mdx","./useDotting.stories.mdx":"./stories/useDotting.stories.mdx","./useGrids.stories.mdx":"./stories/useGrids.stories.mdx","./useHandlers.stories.mdx":"./stories/useHandlers.stories.mdx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Ctsx%7Cmdx%7Cjsx))$"},"./stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx\\))$":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx\\))$",module.exports=webpackEmptyContext},"./stories/assets/code-brackets.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/code-brackets.2e1112d7.svg"},"./stories/assets/colors.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/colors.a4bd0486.svg"},"./stories/assets/comments.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/comments.a3859089.svg"},"./stories/assets/direction.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/direction.b770f9af.svg"},"./stories/assets/flow.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/flow.edad2ac1.svg"},"./stories/assets/plugin.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/plugin.d494b228.svg"},"./stories/assets/repo.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/repo.6d496322.svg"},"./stories/assets/stackalt.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/stackalt.dba9fbb3.svg"},"?4f7e":()=>{},"./generated-stories-entry.cjs":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module=__webpack_require__.nmd(module),(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Ctsx%7Cmdx%7Cjsx))$"),__webpack_require__("./stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx\\))$")],module,!1)}},__webpack_require__=>{var __webpack_exec__=moduleId=>__webpack_require__(__webpack_require__.s=moduleId);__webpack_require__.O(0,[590],(()=>(__webpack_exec__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_exec__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_exec__("./storybook-init-framework-entry.js"),__webpack_exec__("./node_modules/@storybook/react/dist/esm/client/docs/config-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-docs/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-actions/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-backgrounds/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-measure/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-outline/preview.js-generated-config-entry.js"),__webpack_exec__("./.storybook/preview.js-generated-config-entry.js"),__webpack_exec__("./generated-stories-entry.cjs"))));__webpack_require__.O()}]);